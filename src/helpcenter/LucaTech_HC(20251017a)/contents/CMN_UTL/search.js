var searchWords = $('<div class="search"><div id="CMN14001"><div class="search_breadcrumbs">システム管理 &gt; はじめに</div></div><div id="CMN14003"><div class="search_breadcrumbs">システム管理 &gt; 会社データ関係 &gt; 会社データを作成する</div><div class="search_title">会社データを作成する</div><div class="displayText">会社データを作成する　［設定］＞［システム管理］＞［データ関係］＞［会社作成処理］会社データを作成します。会社情報に入力した内容は、『会社基本情報登録』に表示されます。①　［新規会 ...</div><div class="search_word">会社データを作成する　［設定］＞［システム管理］＞［データ関係］＞［会社作成処理］会社データを作成します。会社情報に入力した内容は、『会社基本情報登録』に表示されます。①　［新規会社登録］をクリックします。②　会社情報を入力して［追加］をクリックします。会社コードコードを数字8桁で入力します。正式会社名会社名を60文字以内で入力します。簡略会社名システムの画面上で表示される名称です。［簡略会社名へコピー］をクリックすると、［正式会社名］の30文字分が［簡略会社名］へコピーされます。修正する場合は30文字以内で入力します。フリガナ60文字以内で入力します。利用業務システム会社データが利用する業務システムに✔をつけます。ライセンスを購入し、『ログインアカウント設定』でライセンスを有効にした業務システムが表示されます。会社データの作成後は変更できません。ただし、業務システムの追加は『利用システム設定』で可能です。⇒『利用システムを追加する』参照会計期間をクリックして、『LucaTech GX』の利用を開始する年度の、会計期間の開始日を指定します。指定した会計期間は変更できません。月次開始日［会計期間］で指定した「日」が表示されます。変更する場合は、任意の日にちを入力します。仕訳入力開始月指定した［会計期間］の「月」が表示されます。変更する場合は、任意の月を入力します。コードマスターNo.これまでのMJSシステムで使用していたコードマスターを選択します。使用していたコードマスターは、MJSシステムの会社基本情報で確認するか、MJS担当者にお問い合わせください。マスター選択マスターの管理方法を選択します。［共通マスター］複数システムで共通して社員・部門・役職などのマスターを管理します。『ワークフロー』を使用する場合は［共通マスター］を選択します。［システム別マスター］システムごとにマスターを管理します。共通マスターとシステム別マスターの詳細は、次を参照してください。⇒『共通マスターとシステム別マスターの違い』参照③　［会社一覧］画面が表示されたら、［作成する］をクリックします。④　表示された確認画面で、［開始］をクリックします。会社データの作成が完了すると、ヘッダー［通知履歴］に通知が届きます。『LucaTech GX』の利用環境や会社データの規模によって異なりますが、会社データの作成にはある程度の時間が必要です。他の処理を操作したり、『LucaTech GX』からログアウトしても問題ありません。⑤　をクリックして、会社データが作成されたことを確認します。⑥　ヘッダーの会社選択をクリックします。⑦　［会社選択］画面で、作成した会社の会社コードを入力します。表示された会社をクリックし、［選択して次へ］をクリックします。作成した会社が表示されます。</div></div><div id="CMN14004"><div class="search_breadcrumbs">システム管理 &gt; 会社データ関係 &gt; 利用システムを追加する</div><div class="search_title">利用システムを追加する</div><div class="displayText">利用システムを追加する　［設定］＞［システム管理］＞［データ関係］＞［利用システム設定］作成済みの会社に、業務システムを追加します。追加する会社でログインする必要があります。①　会 ...</div><div class="search_word">利用システムを追加する　［設定］＞［システム管理］＞［データ関係］＞［利用システム設定］作成済みの会社に、業務システムを追加します。追加する会社でログインする必要があります。①　会社コードをクリックして、会社情報を表示します。②　新たに利用する業務システムに✔をつけて、［更新］をクリックします。更新後は✔をはずせません。③　次のメッセージで［開始］をクリックします。④　次のメッセージで［OK］をクリックします。⑤　ブラウザーの更新ボタン、または［F5］を押します。✔をつけた業務システムが、メニューに追加されます。</div></div><div id="CMN14005"><div class="search_breadcrumbs">システム管理 &gt; 会社データ関係 &gt; 会社データを削除する</div><div class="search_title">会社データを削除する</div><div class="displayText">会社データを削除する　［設定］＞［システム管理］＞［データ関係］＞［会社データ削除］不要になった会社データを削除します。『会社データ削除』は、ログインアカウントが［テナント管理者］ ...</div><div class="search_word">会社データを削除する　［設定］＞［システム管理］＞［データ関係］＞［会社データ削除］不要になった会社データを削除します。『会社データ削除』は、ログインアカウントが［テナント管理者］のとき、メニューに表示されます。削除した会社データを復旧したい場合は、MJS担当者にお問い合わせください。   会社データを削除した直後に同一コードで会社を作成する場合システムの都合上、同じコードでは作成できません。削除後、7～14日経過すると作成可能となります。急ぎで同じコードを使用して会社を作成する必要がある場合は、MJS担当者にお問い合わせください。①　削除する会社に✔をつけ、［削除］をクリックします。②　次の画面で、「上記注意事項を確認しました」に✔をつけ、［削除］をクリックします。会社データが削除されます。</div></div><div id="CMN14007"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインの基本情報を設定する</div><div class="search_title">ログインの基本情報を設定する</div><div class="displayText">ログインの基本情報を設定する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ログイン基本設定］この画面では、システムの処理権限の管理方法と、担当者の作成設定を行います。すべ ...</div><div class="search_word">ログインの基本情報を設定する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ログイン基本設定］この画面では、システムの処理権限の管理方法と、担当者の作成設定を行います。すべての会社で共通する設定です。 処理権限管理設定処理権限管理を行う範囲を選択します。［設定する］社員一人一人に権限を付与して権限管理する場合に選択します。『ワークフロー』を使用する場合は必須です。［設定しない］『ワークフロー』を使用せず、担当者区分および個人番号区分のみで権限管理する場合に選択します。『LucaTech   GX』を導入後、［設定しない］から［設定する］に変更すると、担当者区分および個人番号区分の設定内容がクリアされます。［設定する］に変更した後に、処理権限を設定してください。担当者同時作成設定ログインアカウント登録時に、担当者も同時に作成するかどうかを選択します。［担当者として作成する］ログインアカウント登録時に、担当者も同時に作成します。担当者を作成する場合は次のとおりです。マスターの管理方法を［共通マスター］で運用する場合社員マスターに登録しない社外のユーザーに処理権限を付与する場合は、社外のユーザーに対して担当者を作成します。マスターの管理方法を［システム別マスター］で運用する場合［処理権限管理設定］を［設定する］にした場合は、すべてのユーザーに対して担当者を作成します。［ログインアカウントのみ作成する］ログインアカウント登録時に、担当者は作成しません。      すでに存在するログインアカウントに対して担当者を作成したい場合は、『処理権限付与』で行います。</div></div><div id="CMN14008"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する</div><div class="search_title">ログインアカウントを設定する</div><div class="displayText">ログインアカウントを設定する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ログインアカウント設定］ログインアカウントの登録と招待をします。テナント管理者がログインアカウン ...</div><div class="search_word">ログインアカウントを設定する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ログインアカウント設定］ログインアカウントの登録と招待をします。テナント管理者がログインアカウントを招待し、招待されたユーザーが仮パスワードを使用してログインすることで『LucaTech GX』を使用できるようになります。</div></div><div id="CMN14009"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; ログインアカウントを登録する</div><div class="search_title">ログインアカウントを登録する</div><div class="displayText">ログインアカウントを登録するログインアカウントを登録します。［新規アカウント追加］をクリックして、ログインアカウントごとに手入力します。ログインアカウント情報ログインIDログインに ...</div><div class="search_word">ログインアカウントを登録するログインアカウントを登録します。［新規アカウント追加］をクリックして、ログインアカウントごとに手入力します。ログインアカウント情報ログインIDログインに使用するIDを半角英数20文字以内で入力します。使用できる記号は、次のとおりです。［-（ハイフン）］［.（ドット）］［_（アンダーバー）］［@（アットマーク）］［+（プラス）］［,（カンマ）］なお一度使用したログインIDは削除した場合でも使用できません。ログイン可否ログイン可能とする場合は［有効］を選択します。氏名氏名（カナ）氏名とカナを20文字以内で入力します。ミドルネームミドルネーム（カナ）ミドルネームを20文字以内で入力します。『会社基本情報登録』で［ミドルネーム採用区分］を採用している場合に表示されます。メールアドレス招待メールを送信するメールアドレスを半角128文字以内で入力します。利用開始日利用終了日ログインできる期間を指定します。個人番号区分個人番号に関連する操作権限を設定します。『ログイン基本設定』の［処理権限管理設定］で［設定しない］を選択している場合に表示されます。担当者区分担当者区分を設定します。［オペレーター］伝票の入力のみなど、制限付きの操作を行う場合に選択します。［管理者］すべての処理の操作を行う場合に選択します。ただし、［テナント管理者］を［無効］にしている場合は『会社作成』などテナント全体に関する操作は行えません。『ログイン基本設定』の［処理権限管理設定］で［設定しない］を選択している場合に表示されます。テナント管理者『会社作成』など『LucaTech GX』全体の設定を行う場合は［有効］を選択します。テナント管理者の権限を付与する場合、メールアドレスの登録は必須です。財務会計システムライセンス資産管理システムライセンスワークフローシステムライセンスライセンスを購入している業務システムが表示されます。［有効］を選択した業務システムのメニューが表示されるようになります。［…］の［ライセンス紐づけ］から複数のログインアカウントにまとめて設定することもできます。⇒『業務システムのライセンスを一括で変更する』参照社員情報登録『ログイン基本設定』の［処理権限管理設定］で［設定する］を選択している場合に表示されます。変更はできません。担当者情報登録『ログイン基本設定』の［担当者同時作成設定］で［設定する］を選択している場合に表示されます。変更はできません。紐づけ先社員会社単位でログインアカウントと同時に社員マスターの新規作成または、登録済みの社員マスターとログインアカウントを紐付けます。『ログイン基本設定』の［処理権限管理設定］で［設定する］を選択している場合に表示されます。社員マスターを登録していない場合は［新規社員登録］をクリックして登録できます。1つの会社には、社員または担当者のいずれかのみ登録できます。紐付け先担当者［新規担当者登録］をクリックして、担当者を作成する会社を選択します。『ログイン基本設定』の［担当者同時作成設定］で［設定する］を選択している場合に表示されます。1つの会社には、社員または担当者のいずれかのみ登録できます。</div></div><div id="CMN14010"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; 登録済みのログインアカウントを招待する</div><div class="search_title">登録済みのログインアカウントを招待する</div><div class="displayText">登録済みのログインアカウントを招待するログインアカウントを招待します。招待の方法は、次の2通りがあります。招待メールを送信する（推奨）ログインアカウントに登録しているメールアドレス ...</div><div class="search_word">登録済みのログインアカウントを招待するログインアカウントを招待します。招待の方法は、次の2通りがあります。招待メールを送信する（推奨）ログインアカウントに登録しているメールアドレスに、ログインID、仮パスワード、ログイン用URLが記載された招待メールを送ります。PDFファイルを出力して配布するメールアドレスが登録されていないログインアカウントのログインID、仮パスワード、ログイン用URLが記載されたPDFファイルを出力し、ユーザーに配布します。 ユーザーは招待メール、またはPDFファイルに記載された［ログイン用URL］にアクセスし、仮パスワードを使用してログイン後、パスワードを変更します。 招待メールを送信するログインアカウントに登録しているメールアドレスに、招待メールを送信します。①　招待するログインアカウントに✔をつけ、［ログインアカウント招待］をクリックします。②　メールアドレスを登録済みのログインアカウントが表示されます。✔をつけて［招待メールを送信］をクリックします。③　登録したメールアドレスに”LucaTech GX システム”＜lucatechgx-info@mjs.co.jp＞からメールが届きます。ユーザーは仮パスワードを使用してログイン後、パスワードを変更します。メールが届かない場合は受信できるメールアドレスを登録していることを確認します。 招待メールのイメージPDFファイルを出力して配布するメールアドレスが登録されていないログインアカウントのログインID、仮パスワード、ログイン用URLが記載されたPDFファイルを出力します。①　招待を行うログインアカウントに✔をつけ、画面上部の［仮パスワード発行］をクリックします。②　任意でファイル名およびパスワードを設定し、［出力］をクリックします。パスワードに使用できる文字や記号は  にマウスカーソルを乗せて確認できます。③　次のメッセージで［OK］をクリックします。PDFの出力が完了すると、ヘッダーに通知が届きます。④　［ファイル出力一覧］からファイル名をクリックしてPDFファイルをダウンロードします。⑤　PDFファイルをユーザーに配布します。ユーザーは仮パスワードを使用してログイン後、パスワードを変更します。 PDF出力イメージ</div></div><div id="CMN14014"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; ログインアカウントを編集する</div><div class="search_title">ログインアカウントを編集する</div><div class="displayText">ログインアカウントを編集する登録済みのログインアカウントを編集します。ただし、ログインIDとメールアドレスは変更できません。メールアドレスが変更になった場合は、アカウントを再作成す ...</div><div class="search_word">ログインアカウントを編集する登録済みのログインアカウントを編集します。ただし、ログインIDとメールアドレスは変更できません。メールアドレスが変更になった場合は、アカウントを再作成する必要があります。アカウントの再作成は、［新規アカウント追加］から行います。⇒『ログインアカウントを登録する』参照表示するアカウントの条件を指定して［条件で出力］をクリックすることで、ログインアカウントが表示されます。  をクリックしてログインアカウントの登録内容を編集できます。</div></div><div id="CMN14015"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; ログインアカウント情報をエクスポートする</div><div class="search_title">ログインアカウント情報をエクスポートする</div><div class="displayText">ログインアカウント情報をエクスポートするログインアカウント情報をCSVファイルにエクスポートします。ログインアカウントの登録内容や、社員マスター、会社コードの紐づけ情報を効率的に確 ...</div><div class="search_word">ログインアカウント情報をエクスポートするログインアカウント情報をCSVファイルにエクスポートします。ログインアカウントの登録内容や、社員マスター、会社コードの紐づけ情報を効率的に確認できます。①　をクリックします。②　［エクスポート情報の種類］を選択し［OK］をクリックます。ログインアカウント情報のみログインアカウントに登録されている基本情報や各業務システムのライセンス付与状況を確認できます。紐づけ情報のみログインアカウントが、社員マスターおよび会社と紐づいているか確認できます。 ③　ファイル名、文字コード、引用符、ヘッダー行を設定し、［出力］をクリックします。CSVの出力が完了すると、ヘッダーに通知が届き、［ファイル出力一覧］にCSVファイルが保存されます。④　［ファイル出力一覧］を開き、CSVファイルをダウンロードします。 ログインアカウントのCSVレイアウトログインアカウント情報をエクスポートしたCSVファイルのレイアウトは次のとおりです。文字コード：UTF-8タイトル行必須項目属性内　容ログインID必須文字半角英数20文字以内使用できる記号は、次のとおりです。［-（ハイフン）］［.（ドット）］［_（アンダーバー）］［@（アットマーク）］［+（プラス）］［,（カンマ）］ログイン可否 数字［1：有効］［0：無効］姓必須文字20文字以内ミドルネーム 名必須姓カナ ミドルネームカナ 名カナ 利用開始日 日付『会社基本情報登録』の［和暦/西暦区分］の選択によって入力方法が異なります。［和暦表示の場合］年号yy年mm月dd日の形式で入力（例）令和07年04月01日［西暦表示の場合］yyyy/mm/ddの形式で入力（例）2025/04/01利用終了日 メールアドレス 文字半角128文字以内テナント管理者 数字［1：有効］［0：無効］個人番号区分 数字［0：使用不可］［1：参照のみ可］［2：印刷のみ可］［3：参照・印刷可］［4：参照・更新可］［7：参照・印刷・更新可］『ログイン基本設定』の［処理権限管理設定］で［設定しない］を選択している場合に設定します。担当者区分  ［0：オペレーター］［1：管理者］『ログイン基本設定』の［処理権限管理設定］で［設定しない］を選択している場合に設定します。財務ライセンス資産ライセンスWFライセンス人給ライセンス 文字［有効］［無効］</div></div><div id="CMN14016"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; 業務システムのライセンスを一括で変更する</div><div class="search_title">業務システムのライセンスを一括で変更する</div><div class="displayText">業務システムのライセンスを一括で変更するログインアカウントに付与されている業務システムのライセンスを一括で変更します。 ライセンスを変更するログインアカウントに✔をつけ、［…］の［ ...</div><div class="search_word">業務システムのライセンスを一括で変更するログインアカウントに付与されている業務システムのライセンスを一括で変更します。 ライセンスを変更するログインアカウントに✔をつけ、［…］の［ライセンス紐づけ］をクリックします。 ［ログインアカウントライセンスの紐づけ］で有効／無効を選択し、［更新］をクリックします。</div></div><div id="CMN14017"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; ロックアウトを解除する</div><div class="search_title">ロックアウトを解除する</div><div class="displayText">ロックアウトを解除するログイン時に規定回数以上パスワード入力を間違えると、アカウントがロックされ、ログインできない状態になります（ロックアウト）。ロックアウトされるまでの回数は『ポ ...</div><div class="search_word">ロックアウトを解除するログイン時に規定回数以上パスワード入力を間違えると、アカウントがロックされ、ログインできない状態になります（ロックアウト）。ロックアウトされるまでの回数は『ポリシー設定』に従います。『ポリシー設定』の［ロックアウトの期間］で指定した時間が経過するとロックアウトが解除されますが、すぐに解除したい場合はテナント管理者が行います。 ロックアウトされたログインアカウントの をクリックします。 次のメッセージが表示されると、解除は完了です。</div></div><div id="CMN14018"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; ユーザーのパスワードを再発行する</div><div class="search_title">ユーザーのパスワードを再発行する</div><div class="displayText">ユーザーのパスワードを再発行する仮パスワードの有効期限は24時間です。初回ログイン時にパスワードを変更しないと有効期限が切れます。有効期限が切れたときや、設定したパスワードを忘れて ...</div><div class="search_word">ユーザーのパスワードを再発行する仮パスワードの有効期限は24時間です。初回ログイン時にパスワードを変更しないと有効期限が切れます。有効期限が切れたときや、設定したパスワードを忘れてしまったときは、パスワードを再発行します。ユーザーのメールアドレスを登録していない場合は、ユーザー自身でパスワードを再発行できないため、テナント管理者がここで再発行します。ユーザーが自身のパスワードを再発行する方法は、次を参照してください。⇒『パスワードを再設定する』参照 再発行を行うログインアカウントに✔をつけ［仮パスワード発行］をクリックします。 メールアドレスを登録している場合は、”LucaTech GX システム”＜lucatechgx-info@mjs.co.jp＞からメールが届きます。メールアドレスを登録していない場合は、アカウント情報をPDFファイルに出力し、ユーザーに配布します。⇒『PDFファイルを出力して配布する』参照ユーザーは、届いたメールまたはPDFファイルの仮パスワードを使用してログインし、パスワードを変更します。</div></div><div id="CMN14019"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ログインアカウントを設定する &gt; ログインアカウントを削除する</div><div class="search_title">ログインアカウントを削除する</div><div class="displayText">ログインアカウントを削除するログインアカウントを削除します。   ログインアカウントを削除する際の注意点削除すると、『LucaTech   GX』にログインができなくなります。また ...</div><div class="search_word">ログインアカウントを削除するログインアカウントを削除します。   ログインアカウントを削除する際の注意点削除すると、『LucaTech   GX』にログインができなくなります。また、この操作は元に戻すことはできません。①　削除するログインアカウントのをクリックします。②　［ログインアカウント編集］で［削除］をクリックします。③　次のメッセージで［削除］をクリックするとログインアカウントが削除されます。</div></div><div id="CMN14020"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; メニューパターンを登録する</div><div class="search_title">メニューパターンを登録する</div><div class="displayText">メニューパターンを登録する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［メニューパターン登録］『LucaTech GX』では、あらかじめすべての処理が追加されている「標準 ...</div><div class="search_word">メニューパターンを登録する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［メニューパターン登録］『LucaTech GX』では、あらかじめすべての処理が追加されている「標準」および「管理者メニュー」が用意されています。経理担当者などの権限ごとにメニューの表示内容を変えたい場合は、メニューパターンを作成しカスタマイズします。作成したメニューパターンは、『処理権限登録』で処理権限に登録し、この処理権限を『処理権限付与』で社員・役職・部門・担当者（担当者グループ）に割り当てることで適用されます。 機能改良で新しい処理が追加されると、［全処理］タブの処理にが表示されます。新しく追加された処理は、自動で追加されないため、メニューパターンに登録する必要があります。</div></div><div id="CMN14021"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; メニューパターンを登録する &gt; メニューパターンを新規作成する</div><div class="search_title">メニューパターンを新規作成する</div><div class="displayText">メニューパターンを新規作成する［新規パターン登録］をクリックして、メニューパターンを作成します。［新規パターン名］を入力し、［作成方法］と［コピー元］を選択後、［更新］をクリックす ...</div><div class="search_word">メニューパターンを新規作成する［新規パターン登録］をクリックして、メニューパターンを作成します。［新規パターン名］を入力し、［作成方法］と［コピー元］を選択後、［更新］をクリックするとメニューパターンが作成されます。 新規パターン名メニューパターン名を64文字以内で入力します。作成方法登録済みのメニューパターンをコピーする場合は、［コピーして新規作成］を選択します。コピー元コピー元となるメニューパターンを選択します。</div></div><div id="CMN14022"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; メニューパターンを登録する &gt; メニューパターンを編集する</div><div class="search_title">メニューパターンを編集する</div><div class="displayText">メニューパターンを編集する作成したメニューパターンにフォルダーまたは処理をドラッグ＆ドロップして追加します。また、メニューパターンに追加したフォルダーまたは処理の名称を変更してカス ...</div><div class="search_word">メニューパターンを編集する作成したメニューパターンにフォルダーまたは処理をドラッグ＆ドロップして追加します。また、メニューパターンに追加したフォルダーまたは処理の名称を変更してカスタマイズすることも可能です。メニューの階層について編集画面で配置したメニューは、実際のメニュー画面では、次のとおり配置されます。 メニューは最大6階層まで設定できます。フォルダーは1～5階層まで、処理は4～6階層まで配置できます。  メニューパターンを編集する①　編集するメニューパターンをリストから選択します。②　［参照元］タブで参照するパターンをリストから選択します。『LucaTech GX』の処理一覧から選択したい場合は、［全処理］タブを使用します。処理を検索する場合は、検索欄に処理名を入力します。入力した文字と一致する処理の背景に色がつきます。③　左のメニューパターンに、フォルダーまたは処理をドラッグ＆ドロップします。フォルダーをドラッグ＆ドロップすると、下の階層にあるフォルダーや処理もまとめて追加されます。フォルダーまたは処理はドラッグ＆ドロップで任意の場所に移動できます。フォルダーまたは処理がメニューパターンに追加されます。コピーせずに新規作成した場合で、参照パターンのメニューを一度で追加する場合は、［…］の［すべて追加］をクリックします。④　左のメニューパターンの［…］から追加や削除、名称の変更などを行います。⇒『フォルダーや処理の編集操作』参照⑤　［更新］をクリックして変更を保存します。 フォルダーや処理の編集操作メニュー表示に関する編集は［…］をクリックして行います。 ［アイコン変更］処理内に表示される次のアイコンを変更します。なお現状はアコインの変更には対応していません。 ［アイコン変更］をクリックすると、［アイコン変更］画面が表示されます。任意のアイコンを選択し、［変更］をクリックして変更します。 ［名称編集］フォルダーまたは処理の表示名称を変更します。［名称編集］をクリックすると、編集が可能な状態になります。編集後、［更新］をクリックして確定します。 ［処理説明／キーワード変更］処理にカーソルを合わせたときに表示される処理の説明と、処理検索時で使用するキーワードを変更します。［処理説明］と［キーワード］を入力して［変更］をクリックします。 処理説明各処理の概要などを入力します。キーワード処理検索用のキーワードを全角200文字以内で入力します。複数登録する場合は、「,（カンマ）」で区切って入力します。 ［削除］フォルダーまたは処理をメニューパターンから削除します。 ［フォルダ作成］2～5階層目にフォルダーを作成します。新しいフォルダーは、［フォルダ作成］をクリックした位置よりも下の階層に作成されます。1階層目にフォルダーを配置するには、2階層目以降にフォルダーを作成したうえで、1階層目にドラッグ＆ドロップで移動します。 メニューパターン名を変更するメニューパターンの名称を変更します。名称を変更するメニューパターンをリストから選択後、［…］の［パターン名変更］をクリックします。 ［パターン名］を入力して［更新］をクリックします。 メニューパターンを削除する作成したメニューパターンを削除します。削除するメニューパターンをリストから選択し、［削除］をクリックします。次のメッセージで［削除］をクリックします。</div></div><div id="CMN14026"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ロールを登録する</div><div class="search_title">ロールを登録する</div><div class="displayText">ロールを登録する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ロール登録］社員・部門・役職ごとに処理の操作を制限するためのロールを作成します。『LucaTech GX』で ...</div><div class="search_word">ロールを登録する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ロール登録］社員・部門・役職ごとに処理の操作を制限するためのロールを作成します。『LucaTech GX』ではあらかじめすべての処理の操作が許可された標準ロールを用意しています。この標準ロールには、『ワークフロー』で新規に作成した申請書メニューは含まれません。ロールとは「編集できる」「削除はできない」といった、処理ごとの操作ルールをまとめたものです。作成したロールは、『処理権限登録』で処理権限に登録し、この処理権限を『処理権限付与』で社員・役職・部門・担当者（担当者グループ）に割り当てることで適用されます。1表示選択エリアメニューパターンと、ロールを選択します。［メニューパターン］［処理選択エリア］に表示させるメニューパターンを選択します。［ロール名］設定するロールを選択します。『LucaTech   GX』で用意しているロールを選択肢に表示させない場合は［表示条件］に✔をつけます。2処理選択エリアロールを設定する処理を選択します。［検索］タブから処理の検索もできます。３操作権限設定エリア選択した処理内のメニューの表示・修正・追加・削除・印刷などの操作権限を設定します。</div></div><div id="CMN14027"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ロールを登録する &gt; ロールを新規作成する</div><div class="search_title">ロールを新規作成する</div><div class="displayText">ロールを新規作成する［新規ロール登録］をクリックして、ロールを作成します。［新規ロール名］を入力し、必要に応じて［コピー元］を選択後、［更新］をクリックするとロールが作成されます。 ...</div><div class="search_word">ロールを新規作成する［新規ロール登録］をクリックして、ロールを作成します。［新規ロール名］を入力し、必要に応じて［コピー元］を選択後、［更新］をクリックするとロールが作成されます。 新規ロール名ロールの名称を全半角40文字以内で入力します。コピー元作成済みのロール設定をコピーする場合は、コピー元となるロールに✔をつけます。複数のロールをコピー元として選択した場合、設定がまとめて反映されます。</div></div><div id="CMN14028"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ロールを登録する &gt; ロールを編集する</div><div class="search_title">ロールを編集する</div><div class="displayText">ロールを編集する作成したロールに対して処理ごとに操作権限を設定します。①　編集するロールをリストから選択します。［メニューパターン］を変更すると、そのメニューパターンに登録されてい ...</div><div class="search_word">ロールを編集する作成したロールに対して処理ごとに操作権限を設定します。①　編集するロールをリストから選択します。［メニューパターン］を変更すると、そのメニューパターンに登録されている処理のみが表示されます。「標準」のメニューパターンは、すべての処理が表示されます。②　［リスト］タブから操作権限を設定する処理をクリックします。処理を検索する場合は、［検索］タブの［処理名称］に処理名を入力し、［検索］をクリックします。入力した文字と一致する処理の背景に色がつきます。③　操作権限を設定します。許可する操作に✔をつけます。［システム］の✔をはずした処理は、メニューに表示されなくなります。次の表は操作権限の一例です。処理によって動作は異なります。入力処理（伝票入力など）表示入力済み伝票等の検索・表示追加伝票等の新規入力修正伝票等の修正削除伝票等の削除印刷伝票入力処理内の伝票の印刷出力伝票入力処理内の伝票のファイル出力登録処理（マスター登録など）追加各種マスター等の追加修正各種マスター等の修正削除各種マスター等の削除印刷登録リスト等の印刷出力登録リスト等のファイル出力出力処理表示帳票の画面表示追加出力条件パターンの保存修正出力条件パターンの変更削除出力条件パターンの削除印刷帳票の印刷出力帳票のファイル出力更新処理（マスター更新など）追加更新処理の実行印刷更新結果やエラーリスト等の印刷出力更新結果やエラーリスト等のファイル出力④　［更新］をクリックして設定を保存します。 ロール名を変更するロールの名称を変更します。名称を変更するロールをリストから選択し、［…］の［ロール名変更］をクリックします。 ［ロール名］を入力して［更新］をクリックします。 ロールを削除する作成したロールを削除します。あらかじめ用意されている「標準ロール」は削除できません。削除したいロールをリストから選択し、［…］の［ロール削除］をクリックします。 次のメッセージで［削除］をクリックします。</div></div><div id="CMN14031"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を登録する</div><div class="search_title">処理権限を登録する</div><div class="displayText">処理権限を登録する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［処理権限登録］処理権限の作成と管理を行います。『メニューパターン登録』および『ロール登録』で登録した内容を ...</div><div class="search_word">処理権限を登録する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［処理権限登録］処理権限の作成と管理を行います。『メニューパターン登録』および『ロール登録』で登録した内容をもとに処理権限を作成し、ここで作成した処理権限を『処理権限付与』で社員・役職・部門・担当者（担当者グループ）に割り当てます。処理権限は新規作成またはコピーして作成します。</div></div><div id="CMN14032"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を登録する &gt; 処理権限を新規登録する</div><div class="search_title">処理権限を新規登録する</div><div class="displayText">処理権限を新規登録する［新規登録］をクリックして処理権限を新規に作成します。項目を入力し、［登録］をクリックします。外部コード処理権限のコードを半角英数字20文字以内で入力します。 ...</div><div class="search_word">処理権限を新規登録する［新規登録］をクリックして処理権限を新規に作成します。項目を入力し、［登録］をクリックします。外部コード処理権限のコードを半角英数字20文字以内で入力します。処理権限名処理権限の名称を全半角64文字以内で入力します。メニューパターン処理権限に設定するメニューパターンを選択します。担当者区分個人番号区分担当者区分・個人番号区分を設定する場合に変更します。ロール設定処理権限に設定するロールに✔をつけます。複数選択が可能です。</div></div><div id="CMN14033"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を登録する &gt; 処理権限をコピーする</div><div class="search_title">処理権限をコピーする</div><div class="displayText">処理権限をコピーする作成済みの処理権限をコピーします。①　コピーする処理権限を選択し、［コピー］をクリックします。②　［外部コード］を入力します。必要に応じてその他の項目を修正し、 ...</div><div class="search_word">処理権限をコピーする作成済みの処理権限をコピーします。①　コピーする処理権限を選択し、［コピー］をクリックします。②　［外部コード］を入力します。必要に応じてその他の項目を修正し、［登録］をクリックします。</div></div><div id="CMN14034"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を登録する &gt; 処理権限を削除する</div><div class="search_title">処理権限を削除する</div><div class="displayText">処理権限を削除する作成した処理権限を削除します。削除する権限を選択し、［削除］をクリックします。 次のメッセージで［削除］をクリックします。</div><div class="search_word">処理権限を削除する作成した処理権限を削除します。削除する権限を選択し、［削除］をクリックします。 次のメッセージで［削除］をクリックします。</div></div><div id="CMN14035"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; ポリシーを設定する</div><div class="search_title">ポリシーを設定する</div><div class="displayText">ポリシーを設定する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ポリシー設定］パスワードとアカウントに関するポリシーを設定します。すべての会社で共通する設定です。『Luc ...</div><div class="search_word">ポリシーを設定する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ポリシー設定］パスワードとアカウントに関するポリシーを設定します。すべての会社で共通する設定です。『LucaTech GX』で設定できるポリシーは次のとおりです。［パスワードポリシー］有効期限、文字数、使用可能な文字の種類（大文字・小文字・数字・記号など）［アカウントポリシー］ログイン失敗時のロックアウト条件（回数、時間、通知先など）パスワードポリシー［パスワードの有効期限］［パスワードの変更禁止期間］［パスワードの変更を促すメッセージ］の項目で設定する数値は、「◯日後」のように日数単位でカウントされます。たとえば、［パスワードの有効期限］を「3日」に設定した場合、パスワードを4月1日12:00に変更すると、有効期限は「4月4日0:00（3日目の開始時点）」となります。パスワードの有効期限パスワードの有効期限（日数）を「1～999」の範囲で入力します。ユーザーが最後にパスワードを変更してから、この有効期限を過ぎると、次回ログイン時にパスワード変更のメッセージが表示されます。パスワードの有効期限を設定しない場合は「0」を入力します。パスワードの変更禁止期間パスワードを変更してから、再び変更できるまでの日数を「1～999」の範囲で入力します。パスワードの変更禁止期間は、［パスワードの有効期限］よりも短い日数を入力します。変更禁止期間中は、ユーザーが自分でパスワードを再変更できません。すぐにパスワードを変更するには、システム管理者が『ログインアカウント設定』でパスワードを再発行します。⇒『ユーザーのパスワードを再発行する』参照パスワードの変更禁止期間を設定しない場合は「0」を入力します。パスワードの文字数パスワードの最小文字数を「1～20」の範囲で入力します。すでに最小文字数より短いパスワードが設定されている場合は、そのパスワードは次回の変更まで使用できます。パスワードの最小文字数を設定しない場合は「0」を入力します。パスワードの複雑さパスワードの強度を高めるために、使用を必須とする文字の種類に✔をつけます。パスワードの再利用の禁止過去に使用したパスワードの再利用を制限する回数を「1～24」の範囲で入力します。たとえば「3」と設定した場合、過去3回分に使用したパスワードは再利用できません。パスワードの変更を促すメッセージパスワードの有効期限の何日前から、変更を促すメッセージを表示するかを「1～999」の範囲で入力します。［パスワードの有効期限］で設定した日数よりも短い日数を入力します。設定した日数を過ぎると、パスワードを変更するまでログイン時にメッセージが表示されます。パスワードの変更を促すメッセージを表示しない場合は「0」を入力します。 アカウントポリシーロックアウトのしきい値ログインに連続で失敗した場合、ログインアカウントをロックアウトするまでの失敗回数を「1～999」の範囲で入力します。ログインに何回失敗してもロックアウトさせない場合は「0」を入力します。ロックアウトの期間ログインアカウントがロックアウトされる時間（分）を「1～9999」の範囲で入力します。設定した時間が経過すると、ロックアウトは自動で解除されます。ロックアウト時間を無期限にする場合は「0」を入力します。この場合、システム管理者がロックアウトを解除します。⇒『ロックアウトを解除する』参照ロックアウトのしきい値のリセットログインの失敗回数（しきい値）のリセットを行うまでの時間（分）を「1～9999」の範囲で入力します。しきい値をリセットしない場合は「0」を入力します。ロックアウト失敗時の通知先ログインアカウントがロックアウトされた際に、通知するメールアドレスを入力します。最大50件登録が可能です。メールアドレスを入力後、［Tab］または［;（セミコロン）］を押すと確定します。</div></div><div id="CMN14036"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; CSを招待する</div><div class="search_title">CSを招待する</div><div class="displayText">CSを招待する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［CS招待］『CS招待』は、MJSのCS担当者（カスタマーサポート）に一時的な操作権限を付与し、直接の画面操作を ...</div><div class="search_word">CSを招待する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［CS招待］『CS招待』は、MJSのCS担当者（カスタマーサポート）に一時的な操作権限を付与し、直接の画面操作を依頼できる機能です。CS担当者から通知されたメールアドレス・姓名・有効期間を入力して招待すると、ログイン情報が記載された招待メールがCS担当者に送信されます。なおCS担当者の操作範囲は、招待を行うアカウントと同じ操作範囲になります。招待する際は、必要な権限があるか事前にご確認ください。③　［新規CSアカウント追加］をクリックします。④　CS担当者から通知された［メールアドレス］［姓名］［有効期間］を入力します。メールアドレスCS担当者から通知されたメールアドレスを入力します。ステータス項目をすべて入力しており、［有効期間］の終了時刻が現在時刻よりも後の場合に［有効］と表示されます。姓名CS担当者から通知された姓名を入力します。有効期間CS担当者のログインを許可する開始日時と終了日時を入力します。開始日時は、［招待メールを送信］をクリックする時刻よりも後の時刻を入力します。⑤　［ステータス］が［有効］になっているのを確認し、［招待メールを送信］をクリックします。［無効］になっている場合は、入力漏れがないか確認します。⑥　次のメッセージで［OK］をクリックします。⑦　CS担当者に招待メールが送信されログインが可能になります。</div></div><div id="CMN14037"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; CSを招待する &gt; CSを再招待する</div><div class="search_title">CSを再招待する</div><div class="displayText">CSを再招待する一度招待したCS担当者のメールアドレスなどの情報は、有効期間を過ぎても削除されずに保持されます。同じメールアドレスを複数登録することはできないため、有効期間を延長す ...</div><div class="search_word">CSを再招待する一度招待したCS担当者のメールアドレスなどの情報は、有効期間を過ぎても削除されずに保持されます。同じメールアドレスを複数登録することはできないため、有効期間を延長する場合や再招待を行う場合は、該当アカウントのチェックボックスに✔をつけ、［有効期間］を設定したうえで招待メールを再送信してください。</div></div><div id="CMN14038"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を付与する</div><div class="search_title">処理権限を付与する</div><div class="displayText">処理権限を付与する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［処理権限付与］『処理権限登録』で作成した処理権限を部門・役職・社員・担当者・担当者グループに紐づけます。紐 ...</div><div class="search_word">処理権限を付与する　［設定］＞［システム管理］＞［ログイン・権限付与］＞［処理権限付与］『処理権限登録』で作成した処理権限を部門・役職・社員・担当者・担当者グループに紐づけます。紐づけを行うには、『ログイン基本設定』で［処理権限管理設定］を［設定する］にしておく必要があります。 会社作成時の［マスター選択］の選択によって、『処理権限付与』に表示されるタブが異なります。システム別マスター：［担当者］タブ共通マスター：［部門］タブ、［役職］タブ、［社員］タブ、［担当者］タブ 『異動対象者選択』『部門所属体系登録（予約）』に予約データが登録されている場合、『処理権限付与』を起動すると、［異動対象者一覧］ が表示されます。異動前と異動後の変更内容を確認後、［閉じる］ をクリックします。</div></div><div id="CMN14039"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を付与する &gt; 部門に処理権限を付与する</div><div class="search_title">部門に処理権限を付与する</div><div class="displayText">部門に処理権限を付与する部門ごとに処理権限を付与し、該当部門に所属する社員がどの部門のデータを処理できるかを設定します。所属体系期間『部門所属体系登録』で設定した［パターン1］の部 ...</div><div class="search_word">部門に処理権限を付与する部門ごとに処理権限を付与し、該当部門に所属する社員がどの部門のデータを処理できるかを設定します。所属体系期間『部門所属体系登録』で設定した［パターン1］の部門所属体系の適用期間の開始日が初期表示されています。コード部門名部門コードと部門名が表示されます。権限名処理可能部門部門に紐づけた処理権限と処理可能部門が表示されます。 ［操作］のをクリックして部門に処理権限と処理可能部門を設定し、［更新］をクリックします。権限名部門に紐づける処理権限をリストから選択します。処理可能部門設定する部門に所属している社員が、どの部門のデータを処理できるかを指定します。［未設定］権限を設定しない場合に選択します。［全ての部門を処理可能］すべての部門のデータの処理を行う場合に選択します。［自部門のみ処理可能］自部門のデータのみ処理を行う場合に選択します。［処理可能部門を任意で選択］指定した部門のデータのみ処理を行う場合に選択します。選択すると［任意処理可能部門］が表示されるので、をクリックして許可する部門を選択します。複数選択も可能です。［自部門と配下部門を処理可能］『部門所属体系登録』で設定された自部門とその配下の部門のデータの処理を行う場合に選択します。任意処理可能部門指定した部門のデータのみ処理を行う場合に［選択］をクリックします。［任意処理可能部門］で、をクリックして許可する部門を選択します。複数選択も可能です。</div></div><div id="CMN14040"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を付与する &gt; 役職に処理権限を付与する</div><div class="search_title">役職に処理権限を付与する</div><div class="displayText">役職に処理権限を付与する役職ごとに処理権限を付与し、該当の役職に就いた社員がどの部門のデータを処理できるかを設定します。所属体系期間『部門所属体系登録』で設定した［パターン1］の部 ...</div><div class="search_word">役職に処理権限を付与する役職ごとに処理権限を付与し、該当の役職に就いた社員がどの部門のデータを処理できるかを設定します。所属体系期間『部門所属体系登録』で設定した［パターン1］の部門所属体系の適用期間の開始日が初期表示されています。コード役職名役職コードと役職名が表示されます。権限名処理可能部門役職に紐づけた処理権限と処理可能部門設定が表示されます。 ［操作］の  をクリックして役職に処理権限と処理可能部門を設定し、［更新］をクリックします。権限名役職に紐づける処理権限をリストから選択します。処理可能部門設定する役職に就いた社員が、どの部門のデータを処理できるかを指定します。［未設定］権限を設定しない場合に選択します。［全ての部門を処理可能］すべての部門のデータの処理を行う場合に選択します。［自部門のみ処理可能］自部門のデータのみ処理を行う場合に選択します。［処理可能部門を任意で選択］指定した部門のデータのみ処理を行う場合に選択します。選択すると［任意処理可能部門］が表示されるので、をクリックして許可する部門を選択します。複数選択も可能です。［自部門と配下部門を処理可能］『部門所属体系登録』で設定された自部門とその配下の部門のデータの処理を行う場合に選択します。［部門に従う］自部門に設定された処理権限に従う場合に選択します。任意処理可能部門指定した部門のデータのみ処理を行う場合に［選択］をクリックします。［任意処理可能部門］で、をクリックして許可する部門を選択します。複数選択も可能です。</div></div><div id="CMN14041"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を付与する &gt; 社員に処理権限を付与する</div><div class="search_title">社員に処理権限を付与する</div><div class="displayText">社員に処理権限を付与する社員ごとに処理権限を付与し、該当の社員がどの部門のデータを処理できるかを設定します。所属体系期間現在の所属体系期間が選択された状態です。変更すると、その期間 ...</div><div class="search_word">社員に処理権限を付与する社員ごとに処理権限を付与し、該当の社員がどの部門のデータを処理できるかを設定します。所属体系期間現在の所属体系期間が選択された状態です。変更すると、その期間に対応した所属体系が表示されます。コード姓名社員のコードと姓名が表示されます。ログインID社員情報に紐づけたログインアカウントのIDが表示されます。ログイン可ログインできる状態かどうかが表示されます。役職社員に設定した役職名が表示されます。個人番号設定社員に設定した個人番号の設定が表示されます。権限名処理可能部門社員に紐づけた処理権限と処理可能部門設定が表示されます。 ［操作］のをクリックして社員に処理権限と処理可能部門を設定し、［更新］をクリックします。 権限名社員に紐づける処理権限をリストから選択します。個人番号設定社員に付与する個人番号の操作権限をリストから選択します。処理可能部門設定する社員が、どの部門のデータを処理できるかを指定します。［未設定］権限を設定しない場合に選択します。［全ての部門を処理可能］すべての部門のデータの処理を行う場合に選択します。［自部門のみ処理可能］自部門のデータのみ処理を行う場合に選択します。［処理可能部門を任意で選択］指定した部門のデータのみ処理を行う場合に選択します。選択すると［任意処理可能部門］が表示されるので、をクリックして許可する部門を選択します。複数選択も可能です。［自部門と配下部門を処理可能］『部門所属体系登録』で設定された自部門とその配下の部門のデータの処理を行う場合に選択します。［部門・役職に従う］部門と役職の処理権限に従う場合に選択します。ログインID紐づけをクリックして紐づけるログインアカウントを選択します。 社員情報とログインアカウントを一括で紐づける社員マスターに付与した処理権限を有効にするには、社員情報とログインアカウントを紐づけておく必要があります。『ログインアカウント設定』で紐づけを行っていない場合は、『処理権限付与』の［社員］タブから社員ごとに紐づけることができます。 一括でログインアカウントを紐づける場合は、［一括ログインID紐付け］から行います。なお、一括紐づけを行うには、『社員登録』および『ログインアカウント設定』の［メールアドレス（個人連絡用）］に、同一のアドレスが入力されている必要があります。①　『社員登録』の［メールアドレス（個人連絡用）］と『ログインアカウント設定』の［メールアドレス］に同じアドレスが入力されていることを確認します。②　『処理権限付与』の［社員］タブで［…］の［一括ログインID紐付け］をクリックします。③　一致している社員が表示されるため、紐づける社員に✔をつけて［更新］をクリックします。④　次のメッセージで［更新］をクリックします。次のメッセージが表示されたら紐づけは完了です。</div></div><div id="CMN14043"><div class="search_breadcrumbs">システム管理 &gt; ログイン・権限付与 &gt; 処理権限を付与する &gt; 担当者および担当者グループに処理権限を付与する</div><div class="search_title">担当者および担当者グループに処理権限を付与する</div><div class="displayText">担当者および担当者グループに処理権限を付与する担当者および担当者グループに処理権限を付与し、該当の担当者・担当者グループがどの部門のデータを処理できるかを設定します。担当者グループ ...</div><div class="search_word">担当者および担当者グループに処理権限を付与する担当者および担当者グループに処理権限を付与し、該当の担当者・担当者グループがどの部門のデータを処理できるかを設定します。担当者グループを作成して権限を設定すると、グループに属するすべての担当者に一括で権限が適用され、担当者ごとに権限を設定する手間を省くことができます。 担当者および担当者グループの処理権限付与の流れ担当者または担当者グループへの処理権限の付与は、次の条件によって設定方法が異なります。ログインアカウント作成時に担当者を作成したかどうか処理権限を担当者単体に付与するか、担当者グループに付与するか ログインアカウント作成時に担当者を作成した場合担当者グループ単位で権限を付与する場合担当者単位で権限を付与する場合担当者グループを作成する担当者グループを作成し、［処理権限］［処理可能部門］を設定します。担当者グループを作成する担当者グループを作成し、［処理権限］［処理可能部門］は［未設定］を選択します。⇒『担当者グループを作成し、処理権限を付与する』参照⇒『担当者グループを作成し、処理権限を付与する』参照担当者を担当者グループに紐づける担当者と担当者グループを紐づけます。担当者に権限を付与する登録済みの担当者に処理権限を付与します。⇒『担当者を担当者グループに紐づける』参照⇒『担当者に処理権限を付与する』参照 ログインアカウント作成時に担当者を作成してない場合担当者グループ単位で権限を付与する場合担当者単位で権限を付与する場合担当者グループを作成する担当者グループを作成し、［処理権限］［処理可能部門］を設定します。担当者グループを作成する担当者グループを作成し、［処理権限］［処理可能部門］は［未設定］を選択します。⇒『担当者グループを作成し、処理権限を付与する』参照⇒『担当者グループを作成し、処理権限を付与する』参照ログインアカウントを担当者グループと紐づけるログインアカウントを担当者グループに紐づけることで、担当者が新規登録されます。担当者グループとログインアカウントを紐づけるログインアカウントを担当者グループに紐づけることで、担当者が新規登録されます。⇒『ログインアカウントを担当者グループと紐づける』参照⇒『担当者を担当者グループに紐づける』参照  担当者に処理権限を付与する担当者ごとに処理権限を付与します。 ⇒『担当者に処理権限を付与する』参照 担当者グループを作成し、処理権限を付与する複数の担当者をまとめる担当者グループを作成し、処理権限を付与します。①　［設定］をクリックします。②　［担当者グループ設定］で［新規担当者グループ登録］をクリックします。③　［コード］［担当者グループ名称］［処理権限］［処理可能部門］を設定し、［更新］をクリックします。担当者単位で権限を付与する場合は、［処理権限］［処理可能部門］は［未設定］にします。コード担当者グループのコードを半角数字8文字以内で入力します。担当者グループ名称担当者グループの名称を全半角128文字以内で入力します。フリガナ担当者グループのフリガナを全半角120文字以内で入力します。処理権限担当者グループに紐づける処理権限をリストから選択します。処理可能部門担当者グループに所属する担当者が、どの部門のデータを処理できるかを指定します。［未設定］権限を設定しない場合に選択します。［全ての部門を処理可能］すべての部門のデータの処理を行う場合に選択します。［処理可能部門を任意で選択］指定した部門のデータのみ処理を行う場合に選択します。［任意処理可能部門］で、をクリックして許可する部門を選択します。複数選択も可能です。④　 ⑤　次のメッセージで［更新］をクリックします。次のメッセージが表示されたら紐づけは完了です。 担当者を担当者グループに紐づける担当者を担当者グループにドラッグ＆ドロップして紐づけます。『ログインアカウント設定』で担当者を同時に登録すると、担当者は［未所属］グループに配置されます。［未所属］グループに配置されている担当者を担当者グループに紐づけます。なお担当者に処理権限が付与されていた場合は削除されるため、再度処理権限を付与する必要があります。 担当者を複数の担当者グループに紐づける担当者を複数の担当者グループに紐づける場合は［…］の［兼務先追加］をクリックします。［兼務先コード］で担当者グループを選択し、［更新］をクリックします。次のメッセージが表示されたら紐づけは完了です。 ログインアカウントを担当者グループと紐づける『ログインアカウント設定』で担当者を同時登録していない場合は、ログインアカウントを担当者グループに紐づけることで、担当者を新規に登録します。①　［設定］をクリックします。②　［担当者グループ設定］で［…］の［担当者グループ紐づけ］をクリックします。③　［登録者グループ］で追加する担当者グループを選択します。下のエリアには、担当者として登録されていないログインアカウントが表示されます。担当者に登録するログインアカウントに✔をつけて［更新］をクリックします。④　次のメッセージで［更新］をクリックします。次のメッセージが表示されたら、担当者の登録と担当者グループへの紐づけは完了です。 担当者に処理権限を付与する担当者に処理権限を付与し、どの部門のデータを処理できるかを設定します。をクリックして担当者に処理権限と処理可能部門を設定し、［更新］をクリックします。権限名担当者に紐づける処理権限をリストから選択します。個人番号設定担当者に付与する個人番号の操作権限をリストから選択します。処理可能部門設定する担当者が、どの部門のデータを処理できるかを指定します。［未設定］権限を設定しない場合に選択します。［全ての部門を処理可能］すべての部門のデータの処理を行う場合に選択します。［処理可能部門を任意で選択］指定した部門のデータのみ処理を行う場合に選択します。選択すると［任意処理可能部門］が表示されるので、をクリックして許可する部門を選択します。複数選択も可能です。［担当者グループに従う］担当者グループの処理権限に従う場合に選択します。ログインID紐づけをクリックして紐づけるログインアカウントを選択します。 担当者を担当者グループからはずす担当者グループに所属している担当者をグループからはずす場合は［…］の［所属情報削除］をクリックします。 次のメッセージが表示されるので、［削除］をクリックします。 担当者グループからはずした担当者は、［未所属］グループに移動されます。</div></div><div id="CMN14050"><div class="search_breadcrumbs">システム管理 &gt; ユーティリティ &gt; ログイン状況を解除する</div><div class="search_title">ログイン状況を解除する</div><div class="displayText">ログイン状況を解除する　［設定］＞［システム管理］＞［ユーティリティ］＞［ログイン状況・動作解除］『LucaTech GX』にログイン中のアカウントの確認や強制ログアウト、排他状況 ...</div><div class="search_word">ログイン状況を解除する　［設定］＞［システム管理］＞［ユーティリティ］＞［ログイン状況・動作解除］『LucaTech GX』にログイン中のアカウントの確認や強制ログアウト、排他状況の強制解除を行います。 ［ログイン状況］タブログイン中のアカウントの確認や強制ログアウトができます。強制ログアウトは、ログイン状態やセッションが残った状態で画面を閉じてしまい、ユーザーがログインできない場合などに使用します。［排他状況］タブ排他状況の確認や解除ができます。処理の操作中に異常終了して排他状況が残っていたり、排他状況が解除されないとできない処理を行う場合などに使用します。排他については次を参照してください。⇒『排他制御について』参照 ここでは、強制ログアウトを行う操作を説明します。［排他状況］タブで排他情報を解除する場合も同様です。   強制ログアウト／排他情報解除する前に確認してくださいログインアカウントが操作中ではないことを確認してください。操作中の場合、未保存のデータが失われる可能性があります。  強制ログアウトする①　ログインアカウントに✔をつけ［強制ログアウト］をクリックします。②　次のメッセージで［OK］をクリックすると、強制ログアウトが行われます。強制ログアウトされたユーザーには、次のメッセージが表示されます。</div></div><div id="CMN14051"><div class="search_breadcrumbs">システム管理 &gt; ユーティリティ &gt; ポータルを設定する</div><div class="search_title">ポータルを設定する</div><div class="displayText">ポータルを設定する　［設定］＞［システム管理］＞［ユーティリティ］＞［ポータル設定］ホーム画面（ポータル）に表示する「システムからのお知らせ」や「よく使う処理」などの各種機能（ポー ...</div><div class="search_word">ポータルを設定する　［設定］＞［システム管理］＞［ユーティリティ］＞［ポータル設定］ホーム画面（ポータル）に表示する「システムからのお知らせ」や「よく使う処理」などの各種機能（ポートレット）の配置と変更を行います。ポータルには、会社で一元管理する「標準用ポータル」とユーザーごとに設定できる「個人ポータル」の2種類があります。</div></div><div id="CMN14052"><div class="search_breadcrumbs">システム管理 &gt; ユーティリティ &gt; ポータルを設定する &gt; 個人ポータルの利用を有効にする</div><div class="search_title">個人ポータルの利用を有効にする</div><div class="displayText">個人ポータルの利用を有効にする各ユーザーが個人ポータルを使用できるようにするには、［個人ポータル利用可否］を［有効］にしている必要があります。 有効にすると、各ユーザーはホーム画面 ...</div><div class="search_word">個人ポータルの利用を有効にする各ユーザーが個人ポータルを使用できるようにするには、［個人ポータル利用可否］を［有効］にしている必要があります。 有効にすると、各ユーザーはホーム画面の［…］に［個人ポータル］および［個人ポータル設定］が表示され、自分用の表示内容を設定・表示できるようになります。⇒『ポータルの画面レイアウトを編集する』参照</div></div><div id="CMN14053"><div class="search_breadcrumbs">システム管理 &gt; ユーティリティ &gt; ポータルを設定する &gt; ポータルの画面レイアウトを編集する</div><div class="search_title">ポータルの画面レイアウトを編集する</div><div class="displayText">ポータルの画面レイアウトを編集するポータルのレイアウトを編集します。個人ポータルでも標準ポータルでも基本的な設定方法は共通です。①　個人ポータルを設定する場合は、ホーム画面の［…］ ...</div><div class="search_word">ポータルの画面レイアウトを編集するポータルのレイアウトを編集します。個人ポータルでも標準ポータルでも基本的な設定方法は共通です。①　個人ポータルを設定する場合は、ホーム画面の［…］から［個人ポータル設定］をクリックします。②　ログイン後に初期表示するポータルを［初期表示］で選択します。③　［テンプレート］から、編集に使用するテンプレートを選択します。あらかじめ登録されているテンプレートをもとに作成する場合は［経理担当］～［一般従業員］を選択します。テンプレートを使用せずに新規作成する場合は［テンプレート無］を選択します。テンプレートをもとに作成した場合、［テンプレート無］にレイアウトの設定が保存されます。④　ポータルのレイアウトを設定します。［ポートレットリスト］からポートレットを［ポータルレイアウト］にドラッグ＆ドロップして追加します。各ポートレットの機能については、次を参照してください。⇒『ポートレットについて』参照⑤　必要に応じて配置場所の移動や、表示サイズを変更します。［ポータルレイアウト］に空きがない場合はポートレットを配置できません。配置済みのポートレットを削除してから追加します。⑥　［更新］をクリックして設定を保存します。⑦　設定したレイアウトがホーム画面に反映されます。一部のポートレットについては、ポータルのレイアウトを設定した後に、個別に編集が必要なものがあります。⇒『ポートレットについて』参照反映されていない場合は、ログアウトしてから再度ログインして確認します。</div></div><div id="CMN14056"><div class="search_breadcrumbs">システム管理 &gt; 履歴管理 &gt; ログイン履歴を表示する</div><div class="search_title">ログイン履歴を表示する</div><div class="displayText">ログイン履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［ログイン履歴表示］条件を指定して［条件で出力］をクリックすることで、『LucaTech GX』へのログイン・ログ ...</div><div class="search_word">ログイン履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［ログイン履歴表示］条件を指定して［条件で出力］をクリックすることで、『LucaTech GX』へのログイン・ログアウトの履歴画面が表示されます。いつ、誰が、どのWebブラウザーからログインしたかなどを確認できます。 ステータスログイン・ログアウトの状態が表示されます。問題なくログイン・ログアウトができたときに表示されます。同じアカウントのユーザーが異なる端末からログインしようとしたときに表示されます。次の場合に表示されます。・『ログインアカウント設定』で［ログイン可否］が［無効］のユーザーが、ログインしようとしたとき・『ログインアカウント設定』で［利用開始日］と［利用終了日］の設定が期間外のユーザーが、ログインしようとしたとき・解約済みなどで『LucaTech GX』のライセンスを持たないユーザーが、ログインしようとしたとき日時ログイン・ログアウトした日時が表示されます。ログインID担当者ログイン・ログアウトしたユーザーのログインIDとログインアカウント氏名が表示されます。IPアドレスログイン・ログアウトしたユーザーのIPアドレスが表示されます。Webブラウザーログイン・ログアウトしたWebブラウザーが表示されます。対象履歴ログイン・ログアウトのいずれかが表示されます。備考［ステータス］が警告のときは、「同一ユーザーログイン済み」と表示されます。［ステータス］が失敗のときは、「ライセンス無効」／「アカウント無効」と表示されます。</div></div><div id="CMN14057"><div class="search_breadcrumbs">システム管理 &gt; 履歴管理 &gt; メニューの利用履歴を表示する</div><div class="search_title">メニューの利用履歴を表示する</div><div class="displayText">メニューの利用履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［メニュー利用履歴表示］条件を指定して［条件で出力］をクリックすることで、『LucaTech GX』のメニュ ...</div><div class="search_word">メニューの利用履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［メニュー利用履歴表示］条件を指定して［条件で出力］をクリックすることで、『LucaTech GX』のメニューの利用履歴画面が表示されます。いつ、誰が、どの会社データでどの処理を利用したか確認できます。 開始日時終了日時メニューを起動した日時と、メニューを閉じた日時が表示されます会社コード会社名メニューを起動したユーザーが所属している会社のコードと正式名が表示されます。決算開始年月日会社の決算開始年月日が表示されます。ログインID担当者メニューを起動したユーザーのログインIDと、ログインアカウント氏名が表示されます。メニュー名起動したメニュー名が表示されます。システム名システム名が表示されます。</div></div><div id="CMN14058"><div class="search_breadcrumbs">システム管理 &gt; 履歴管理 &gt; メールの送信履歴を表示する</div><div class="search_title">メールの送信履歴を表示する</div><div class="displayText">メールの送信履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［メール送信履歴機能］条件を指定して［条件で出力］をクリックすることで、メールの送信履歴画面が表示されます。い ...</div><div class="search_word">メールの送信履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［メール送信履歴機能］条件を指定して［条件で出力］をクリックすることで、メールの送信履歴画面が表示されます。いつ、誰に、どのような種類のメールが送信されたかを確認できます。 メール内容確認送信したメールの内容を確認する場合は、をクリックします。ステータスメールの送信結果が表示されます。メールを送信できたときに表示されます。メールを送信できなかったときに表示されます。連携日時メールを送信した日時が表示されます。メール種類送信したメールの種類が表示されます。メールタイトル送信したメールの件名が表示されます。ログインID担当者メールが送信されたユーザーのログインIDと、ログインアカウント氏名が表示されます。</div></div><div id="CMN14059"><div class="search_breadcrumbs">システム管理 &gt; 履歴管理 &gt; ファイルの出力履歴を表示する</div><div class="search_title">ファイルの出力履歴を表示する</div><div class="displayText">ファイルの出力履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［ファイル出力履歴表示］条件を指定して［条件で出力］をクリックすることで、ファイルを出力した履歴画面が表示さ ...</div><div class="search_word">ファイルの出力履歴を表示する　［設定］＞［システム管理］＞［履歴管理］＞［ファイル出力履歴表示］条件を指定して［条件で出力］をクリックすることで、ファイルを出力した履歴画面が表示されます。いつ、誰が、どの会社データのどの処理から、どのようなファイルを出力したか確認できます。 出力日時ファイルを出力した日時が表示されます。会社コード会社名ファイルを出力した会社のコードと正式名が表示されます。決算開始年月日ファイルを出力した会社の決算開始年月日が表示されます。ログインID担当者ファイルを出力したユーザーのログインIDと、ログインアカウント氏名が表示されます。システム名ファイルを出力したシステム名が表示されます。処理名ファイルを出力した処理名が表示されます。ファイルID ファイルを出力したときに、システムによって自動的に設定されたファイルIDが表示されます。ファイル名ファイルを出力したときに、ユーザーが設定したファイル名が表示されます。出力種別出力したファイルの種別が表示されます。複数ファイルをまとめたzipファイルやエラーログなどのログファイルは、「その他」と表示されます。</div></div></div>');
// ========================================
// グローバル変数定義
// ========================================

// MutationObserver機能用のグローバル変数
var currentSearchValue = ""; // 現在の検索キーワード
var mutationObserver = null; // MutationObserverインスタンス
var debounceTimer = null; // DOM変更用のデバウンスタイマー

// jQueryセレクタキャッシュ
var $cachedElements = {
    iframe: null,
    searchField: null,
    searchResultItemsBlock: null,
    searchResultsEnd: null,
    searchMsg: null,
    searchInput: null
};

// セレクタマップ（キャッシュ機構の効率化）
var selectorMap = {
    iframe: "iframe.topic",
    searchField: ".wSearchField",
    searchResultItemsBlock: ".wSearchResultItemsBlock",
    searchResultsEnd: ".wSearchResultsEnd",
    searchMsg: "#searchMsg",
    searchInput: ".search-input"
};

// HTMLエンティティ復元用の正規表現（効率化のためグローバル定義）
var htmlEntityRegexes = {
    nbsp: /&nbsp;(?=[^<>]*<)/gm,
    gt: /&gt;(?=[^<>]*<)/gm,
    lt: /&lt;(?=[^<>]*<)/gm,
    quot: /&quot;(?=[^<>]*<)/gm,
    amp: /&amp;(?=[^<>]*<)/gm
};

// 文字変換マップ（効率化のため初期化時に正規表現を構築）
var characterMappings = (function () {
    // 文字変換用の配列定義（配列リテラルに変更）
    var wide = ["０", "１", "２", "３", "４", "５", "６", "７", "８", "９", "ａ", "ｂ", "ｃ", "ｄ", "ｅ", "ｆ", "ｇ", "ｈ", "ｉ", "ｊ", "ｋ", "ｌ", "ｍ", "ｎ", "ｏ", "ｐ", "ｑ", "ｒ", "ｓ", "ｔ", "ｕ", "ｖ", "ｗ", "ｘ", "ｙ", "ｚ", "ガ", "ギ", "グ", "ゲ", "ゴ", "ザ", "ジ", "ズ", "ゼ", "ゾ", "ダ", "ヂ", "ヅ", "デ", "ド", "バ", "ビ", "ブ", "ベ", "ボ", "パ", "ピ", "プ", "ペ", "ポ", "。", "「", "」", "、", "ヲ", "ァ", "ィ", "ゥ", "ェ", "ォ", "ャ", "ュ", "ョ", "ッ", "ー", "ア", "イ", "ウ", "エ", "オ", "カ", "キ", "ク", "ケ", "コ", "サ", "シ", "ス", "セ", "ソ", "タ", "チ", "ツ", "テ", "ト", "ナ", "ニ", "ヌ", "ネ", "ノ", "ハ", "ヒ", "フ", "ヘ", "ホ", "マ", "ミ", "ム", "メ", "モ", "ヤ", "ユ", "ヨ", "ラ", "リ", "ル", "レ", "ロ", "ワ", "ン"];
    var narrow = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "ｶﾞ", "ｷﾞ", "ｸﾞ", "ｹﾞ", "ｺﾞ", "ｻﾞ", "ｼﾞ", "ｽﾞ", "ｾﾞ", "ｿﾞ", "ﾀﾞ", "ﾁﾞ", "ﾂﾞ", "ﾃﾞ", "ﾄﾞ", "ﾊﾞ", "ﾋﾞ", "ﾌﾞ", "ﾍﾞ", "ﾎﾞ", "ﾊﾟ", "ﾋﾟ", "ﾌﾟ", "ﾍﾟ", "ﾎﾟ", "｡", "｢", "｣", "､", "ｦ", "ｧ", "ｨ", "ｩ", "ｪ", "ｫ", "ｬ", "ｭ", "ｮ", "ｯ", "ｰ", "ｱ", "ｲ", "ｳ", "ｴ", "ｵ", "ｶ", "ｷ", "ｸ", "ｹ", "ｺ", "ｻ", "ｼ", "ｽ", "ｾ", "ｿ", "ﾀ", "ﾁ", "ﾂ", "ﾃ", "ﾄ", "ﾅ", "ﾆ", "ﾇ", "ﾈ", "ﾉ", "ﾊ", "ﾋ", "ﾌ", "ﾍ", "ﾎ", "ﾏ", "ﾐ", "ﾑ", "ﾒ", "ﾓ", "ﾔ", "ﾕ", "ﾖ", "ﾗ", "ﾘ", "ﾙ", "ﾚ", "ﾛ", "ﾜ", "ﾝ"];
    var highlight = ["(?:０|0)", "(?:１|1)", "(?:２|2)", "(?:３|3)", "(?:４|4)", "(?:５|5)", "(?:６|6)", "(?:７|7)", "(?:８|8)", "(?:９|9)", "(?:ａ|a)", "(?:ｂ|b)", "(?:ｃ|c)", "(?:ｄ|d)", "(?:ｅ|e)", "(?:ｆ|f)", "(?:ｇ|g)", "(?:ｈ|h)", "(?:ｉ|i)", "(?:ｊ|j)", "(?:ｋ|k)", "(?:ｌ|l)", "(?:ｍ|m)", "(?:ｎ|n)", "(?:ｏ|o)", "(?:ｐ|p)", "(?:ｑ|q)", "(?:ｒ|r)", "(?:ｓ|s)", "(?:ｔ|t)", "(?:ｕ|u)", "(?:ｖ|v)", "(?:ｗ|w)", "(?:ｘ|x)", "(?:ｙ|y)", "(?:ｚ|z)", "(?:ガ|ｶﾞ)", "(?:ギ|ｷﾞ)", "(?:グ|ｸﾞ)", "(?:ゲ|ｹﾞ)", "(?:ゴ|ｺﾞ)", "(?:ザ|ｻﾞ)", "(?:ジ|ｼﾞ)", "(?:ズ|ｽﾞ)", "(?:ゼ|ｾﾞ)", "(?:ゾ|ｿﾞ)", "(?:ダ|ﾀﾞ)", "(?:ヂ|ﾁﾞ)", "(?:ヅ|ﾂﾞ)", "(?:デ|ﾃﾞ)", "(?:ド|ﾄﾞ)", "(?:バ|ﾊﾞ)", "(?:ビ|ﾋﾞ)", "(?:ブ|ﾌﾞ)", "(?:ベ|ﾍﾞ)", "(?:ボ|ﾎﾞ)", "(?:パ|ﾊﾟ)", "(?:ピ|ﾋﾟ)", "(?:プ|ﾌﾟ)", "(?:ペ|ﾍﾟ)", "(?:ポ|ﾎﾟ)", "(?:。|｡)", "(?:「|｢)", "(?:」|｣)", "(?:、|､)", "(?:ヲ|ｦ)", "(?:ァ|ｧ)", "(?:ィ|ｨ)", "(?:ゥ|ｩ)", "(?:ェ|ｪ)", "(?:ォ|ｫ)", "(?:ャ|ｬ)", "(?:ュ|ｭ)", "(?:ョ|ｮ)", "(?:ッ|ｯ)", "(?:ー|ｰ)", "(?:ア|ｱ)", "(?:イ|ｲ)", "(?:ウ|ｳ)", "(?:エ|ｴ)", "(?:オ|ｵ)", "(?:カ|ｶ)", "(?:キ|ｷ)", "(?:ク|ｸ)", "(?:ケ|ｹ)", "(?:コ|ｺ)", "(?:サ|ｻ)", "(?:シ|ｼ)", "(?:ス|ｽ)", "(?:セ|ｾ)", "(?:ソ|ｿ)", "(?:タ|ﾀ)", "(?:チ|ﾁ)", "(?:ツ|ﾂ)", "(?:テ|ﾃ)", "(?:ト|ﾄ)", "(?:ナ|ﾅ)", "(?:ニ|ﾆ)", "(?:ヌ|ﾇ)", "(?:ネ|ﾈ)", "(?:ノ|ﾉ)", "(?:ハ|ﾊ)", "(?:ヒ|ﾋ)", "(?:フ|ﾌ)", "(?:ヘ|ﾍ)", "(?:ホ|ﾎ)", "(?:マ|ﾏ)", "(?:ミ|ﾐ)", "(?:ム|ﾑ)", "(?:メ|ﾒ)", "(?:モ|ﾓ)", "(?:ヤ|ﾔ)", "(?:ユ|ﾕ)", "(?:ヨ|ﾖ)", "(?:ラ|ﾗ)", "(?:リ|ﾘ)", "(?:ル|ﾙ)", "(?:レ|ﾚ)", "(?:ロ|ﾛ)", "(?:ワ|ﾜ)", "(?:ン|ﾝ)"];

    // 全角→半角の変換マップを作成
    var wideToNarrowMap = {};
    var narrowToHighlightMap = {};

    for (var i = 0; i < wide.length; i++) {
        wideToNarrowMap[wide[i]] = narrow[i];
        // 半角文字をキーにしてハイライトパターンをマップ
        narrowToHighlightMap[narrow[i]] = highlight[i];
    }

    // 全角文字の正規表現パターンを作成（エスケープ処理を含む）
    var wideCharsPattern = wide.map(function (char) {
        return char.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }).join('|');

    var wideToNarrowRegex = new RegExp(wideCharsPattern, 'g');

    return {
        wideToNarrowMap: wideToNarrowMap,
        narrowToHighlightMap: narrowToHighlightMap,
        wideToNarrowRegex: wideToNarrowRegex,
        // 効率的な変換関数
        convertWideToNarrow: function (text) {
            return text.replace(wideToNarrowRegex, function (match) {
                return wideToNarrowMap[match] || match;
            });
        }
    };
})();

// ========================================
// 基本ユーティリティ関数（依存なし）
// ========================================

// セレクタ用のエスケープ処理
function selectorEscape(val) {
    return val.replace(/[-\/\\^$*+?.()|[\]{}\!]/g, '\\$&');
}

// 文字列を正規化（全角→半角カナ変換、小文字化）
function normalizeForSearch(text) {
    var normalized = text.toLowerCase();
    return characterMappings.convertWideToNarrow(normalized);
}

// HTMLエンティティを復元
function decodeHtmlEntities(html) {
    return html
        .replace(htmlEntityRegexes.nbsp, "　")
        .replace(htmlEntityRegexes.gt, ">")
        .replace(htmlEntityRegexes.lt, "<")
        .replace(htmlEntityRegexes.quot, '"')
        .replace(htmlEntityRegexes.amp, "&");
}

// ========================================
// キャッシュ管理関数
// ========================================

// キャッシュを初期化
function initializeCachedElements() {
    for (var key in selectorMap) {
        if (selectorMap.hasOwnProperty(key)) {
            if (key === 'searchInput') {
                $cachedElements[key] = $(selectorMap[key], document);
            } else {
                $cachedElements[key] = $(selectorMap[key]);
            }
        }
    }
}

// キャッシュされた要素を取得（存在チェック付き）
function getCachedElement(key) {
    if (!$cachedElements[key] || $cachedElements[key].length === 0) {
        // キャッシュが無効な場合は再取得
        if (selectorMap.hasOwnProperty(key)) {
            if (key === 'searchInput') {
                $cachedElements[key] = $(selectorMap[key], document);
            } else {
                $cachedElements[key] = $(selectorMap[key]);
            }
        }
    }
    return $cachedElements[key];
}

// ========================================
// 検索処理関連関数（依存関係順）
// ========================================

// 検索語を正規化してエスケープ
function prepareSearchWords(searchValue) {
    // 全角・半角スペースを統一して連続スペースを1つにまとめる
    var searchWordTmp = searchValue.replace(/[　\s]+/g, " ").trim().toLowerCase();
    searchWordTmp = characterMappings.convertWideToNarrow(searchWordTmp);

    var searchWord = searchWordTmp.split(" ");
    for (var i = 0; i < searchWord.length; i++) {
        searchWord[i] = selectorEscape(searchWord[i].replace(/>/g, "&gt;").replace(/</g, "&lt;"));
    }
    return searchWord;
}

// ハイライト用の正規表現パターンを生成
function createHighlightPattern(searchWords) {
    // 各検索ワードを全角・半角両対応のパターンに変換
    var patterns = searchWords.map(function(word) {
        // 2文字パターンを優先的にマッチさせる正規表現を作成
        var result = '';
        var pos = 0;
        
        while (pos < word.length) {
            var matched = false;
            
            // 2文字の組み合わせを試行
            if (pos + 1 < word.length) {
                var twoChar = word.substring(pos, pos + 2);
                var pattern = characterMappings.narrowToHighlightMap[twoChar];
                if (pattern) {
                    result += pattern;
                    pos += 2;
                    matched = true;
                }
            }
            
            // 1文字で処理
            if (!matched) {
                var char = word.charAt(pos);
                var pattern = characterMappings.narrowToHighlightMap[char];
                result += pattern || char.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                pos++;
            }
        }
        
        return result;
    });
    return patterns.join("|");
}

// iframeのbody要素を取得
function getIframeBody() {
    var $iframe = getCachedElement('iframe');
    if ($iframe.length === 0) return null;
    return $iframe.contents().find("body");
}

// iframeコンテンツにハイライトを適用
function applyHighlight(searchValue) {
    var $body = getIframeBody();
    if (!$body) return;

    var searchWords = prepareSearchWords(searchValue);
    var highlightPattern = createHighlightPattern(searchWords);
    var reg = new RegExp("(" + highlightPattern + ")(?=[^<>]*<)", "gmi");
    var html = $body.html();
    var decodedHtml = decodeHtmlEntities(html);
    var highlightedHtml = decodedHtml.replace(reg, "<font class='keyword' style='color:rgb(0, 0, 0); background-color:rgb(252, 255, 0);'>$1</font>");

    $body.html(highlightedHtml);
}

// キーワードのハイライトを削除
function removeHighlight() {
    var $body = getIframeBody();
    if (!$body) return;

    $body.find(".keyword").each(function () {
        var $this = $(this);
        $this.replaceWith($this.contents());
    });
}

// 検索結果をクリア
function clearSearchResults() {
    var $searchResultItemsBlock = getCachedElement('searchResultItemsBlock');
    var $searchResultsEnd = getCachedElement('searchResultsEnd');
    var $searchMsg = getCachedElement('searchMsg');

    $searchResultItemsBlock.html("");
    $searchResultsEnd.addClass("rh-hide");
    $searchResultsEnd.attr("hidden", "");
    $searchMsg.html("2つ以上の語句を入力して検索する場合は、スペース（空白）で区切ります。");
    removeHighlight();
    currentSearchValue = "";
    disconnectMutationObserver();
}

// ========================================
// MutationObserver関連関数
// ========================================

// キーワード要素のみの追加かどうかを判定
function isOnlyKeywordAddition(mutation) {
    if (mutation.addedNodes.length !== 1) {
        return false;
    }
    
    var node = mutation.addedNodes[0];
    if (node.nodeType !== Node.ELEMENT_NODE) {
        return false;
    }
    
    // 追加されたノードがキーワード要素か、キーワード要素を含むか
    return (node.classList && node.classList.contains('keyword')) ||
           (node.querySelector && node.querySelector('.keyword') !== null);
}

// デバウンスされた再ハイライト処理
function debouncedReHighlight() {
    if (debounceTimer) {
        clearTimeout(debounceTimer);
    }

    debounceTimer = setTimeout(function () {
        reHighlightAfterDomChange();
    }, 500);
}

// DOM変更後の再ハイライト処理
function reHighlightAfterDomChange() {
    if (!currentSearchValue || currentSearchValue.trim() === "") {
        return;
    }

    try {
        disconnectMutationObserver();
        removeHighlight();
        applyHighlight(currentSearchValue);

        setTimeout(function () {
            setupMutationObserver();
        }, 100);

        console.debug("DOM変更後に検索語を再ハイライトしました");
    } catch (error) {
        console.warn("DOM変更後の再ハイライトに失敗しました:", error);
        setupMutationObserver();
    }
}

// iframeコンテンツ用のMutationObserverをセットアップ
function setupMutationObserver() {
    disconnectMutationObserver();

    try {
        var $iframe = getCachedElement('iframe');
        if ($iframe.length === 0) return;

        var iframeDocument = $iframe[0].contentDocument || $iframe[0].contentWindow.document;
        if (!iframeDocument || !iframeDocument.body) return;

        mutationObserver = new MutationObserver(function (mutations) {
            if (!currentSearchValue || currentSearchValue.trim() === "") {
                return;
            }

            var shouldReHighlight = mutations.some(function(mutation) {
                if (mutation.type === 'characterData') {
                    return true;
                }
                
                if (mutation.type === 'childList') {
                    // キーワード要素自身の追加は無視
                    if (isOnlyKeywordAddition(mutation)) {
                        return false;
                    }
                    
                    // ノードの追加または削除があれば再ハイライト
                    return mutation.addedNodes.length > 0 || mutation.removedNodes.length > 0;
                }
                
                return false;
            });

            if (shouldReHighlight) {
                debouncedReHighlight();
            }
        });

        mutationObserver.observe(iframeDocument.body, {
            childList: true,
            subtree: true,
            characterData: true,
            attributes: false
        });

        console.debug("iframeコンテンツ用のMutationObserverをセットアップしました");
    } catch (error) {
        console.warn("MutationObserverのセットアップに失敗しました:", error);
    }
}

// MutationObserverを切断
function disconnectMutationObserver() {
    if (mutationObserver) {
        mutationObserver.disconnect();
        mutationObserver = null;
    }

    if (debounceTimer) {
        clearTimeout(debounceTimer);
        debounceTimer = null;
    }
}

// ========================================
// jQueryカスタムセレクタ
// ========================================

// カスタムの:contains()セレクタ（正規化された検索用）
$.expr[':'].containsNormalized = function (elem, index, match) {
    var normalizedElemText = normalizeForSearch($(elem).text());
    var normalizedSearchText = normalizeForSearch(match[3]);
    return normalizedElemText.indexOf(normalizedSearchText) >= 0;
};

// ========================================
// jQueryイベントハンドラー
// ========================================

$(function () {
    // 要素のキャッシュを初期化
    initializeCachedElements();

    $(document).on("click", "ul.toc li.book", function () {
        if ($(this).children("a[href='#'],a[href='javascript:void 0;']").length == 0) {
            $(this).children("a").each(function () {
                location.href = location.href.replace(location.hash, "") + "#t=" + $(this).attr("href");
            });
        }
    });

    getCachedElement('searchField').each(function () {
        $(this).off();
    });

    $(document).on("keyup", ".wSearchField", function () {
        var $searchResultItemsBlock = getCachedElement('searchResultItemsBlock');
        var $searchResultsEnd = getCachedElement('searchResultsEnd');
        var $searchMsg = getCachedElement('searchMsg');
        var searchValue = $(this).val();

        // trim()を追加してスペースのみの入力も空として扱う
        if (searchValue.trim() === "") {
            clearSearchResults();
            return;
        }

        $searchMsg.html("");
        currentSearchValue = searchValue; // 現在の検索値を保存
        
        // スペースを正規化
        var searchWordTmp = searchValue.replace(/[　\s]+/g, " ").trim();
        // 正規化（全角→半角カナ、小文字化）
        searchWordTmp = normalizeForSearch(searchWordTmp);

        // 正規化後も空文字列チェックを追加
        if (searchWordTmp === "") {
            clearSearchResults();
            return;
        }

        var searchWord = searchWordTmp.split(" ");
        var searchQuery = searchWord.map(function(word) {
            return ":containsNormalized(" + word + ")";
        }).join("");

        var findItems = searchWords.find(".search_word" + searchQuery);
        if (findItems.length !== 0) {
            $searchResultsEnd.removeClass("rh-hide");
            $searchResultsEnd.removeAttr("hidden");
            $searchResultItemsBlock.html("");
            findItems.each(function () {
                var displayText = $(this).parent().find(".displayText").text();
                var parentId = $(this).parent().attr("id");
                var searchTitle = $(this).parent().find(".search_title").html();
                
                var resultHtml = "<div class='wSearchResultItem'>" +
                    "<a class='nolink' href='./" + parentId + ".html'>" +
                    "<div class='wSearchResultTitle'>" + searchTitle + "</div>" +
                    "</a>" +
                    "<div class='wSearchContent'>" +
                    "<span class='wSearchContext'>" + displayText + "</span>" +
                    "</div></div>";
                
                $searchResultItemsBlock.append($(resultHtml));
            });
            removeHighlight();
            applyHighlight(currentSearchValue);
        }
        else {
            removeHighlight();
            $searchResultsEnd.addClass("rh-hide");
            $searchResultsEnd.attr("hidden", "");
            $searchResultItemsBlock.html("");
            var displayText = "検索条件に一致するトピックはありません。";
            $searchResultItemsBlock.append($("<div class='wSearchResultItem'><div class='wSearchContent'><span class='wSearchContext'>" + displayText + "</span></div></div>"));
        }
    });

    getCachedElement('iframe').on("load", function () {
        var $searchInput = getCachedElement('searchInput');
        var $searchField = getCachedElement('searchField');

        if ($searchInput.is(":not(.rh-hide)") && ($searchField.val() != "")) {
            var searchValue = $searchField.val();
            currentSearchValue = searchValue; // 現在の検索値を保存
            applyHighlight(searchValue);
        }

        // iframeコンテンツ変更用のMutationObserverをセットアップ
        setupMutationObserver();
    });
});
