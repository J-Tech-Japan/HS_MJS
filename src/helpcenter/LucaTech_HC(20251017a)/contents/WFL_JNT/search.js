var searchWords = $('<div class="search"><div id="WFL10001"><div class="search_breadcrumbs">導入処理 &gt; はじめに</div></div><div id="WFL10003"><div class="search_breadcrumbs">導入処理 &gt; 概要 &gt; ワークフローの概要</div><div class="search_title">ワークフローの概要</div><div class="displayText">ワークフローの概要『ワークフロー』では、申請書や承認ルートなどを設定することで、オンライン上で申請・承認を行うことができます。承認が完了すると、申請内容をもとに『財務大将』『固定資 ...</div><div class="search_word">ワークフローの概要『ワークフロー』では、申請書や承認ルートなどを設定することで、オンライン上で申請・承認を行うことができます。承認が完了すると、申請内容をもとに『財務大将』『固定資産管理』に必要な情報を連携することができます。また、『財務大将』の伝票入力で、ワークフロー機能を利用することができます。</div></div><div id="WFL10004"><div class="search_breadcrumbs">導入処理 &gt; 概要 &gt; 処理の流れ</div><div class="search_title">処理の流れ</div><div class="displayText">処理の流れ『ワークフロー』で推奨する処理の流れは次のとおりです。導入時の設定の流れワークフロー機能を使用して伝票入力を行う場合［設定］＞［導入処理］＞［財務］＞［伝票情報登録］の［ ...</div><div class="search_word">処理の流れ『ワークフロー』で推奨する処理の流れは次のとおりです。導入時の設定の流れワークフロー機能を使用して伝票入力を行う場合［設定］＞［導入処理］＞［財務］＞［伝票情報登録］の［ワークフロー］を［使用する］に設定します。⇒『伝票の入力・印刷情報を登録する』参照STEP1代行申請や取下の可否など、申請・承認時に使用する機能を設定します。⇒『申請・承認時の基本機能を設定する』参照『LucaTech GX』共通のマスター以外を申請書の選択肢に使用する場合『LucaTech GX』共通のマスター以外を複数の申請書の選択肢に使用する場合、ワークフロー独自のマスター（フリーマスター）を登録します。またフリーマスターを登録することで、選択肢を選ぶと、その選択肢に応じた内容が自動表示される申請書の項目を作成できます。⇒『フリーマスターを登録する』参照2つの選択肢に応じた内容を自動表示する項目を作成する場合2つの選択肢を選ぶと、その選択肢に応じた内容が自動表示される申請書の項目を作成するための設定を行います。⇒『フリーマスター（2次元）を登録する』参照複数の申請書に同じ採番方法を使用する場合複数の申請書に対して共通で使用する採番情報を設定します。⇒『申請書の共通の採番情報を登録する』参照STEP2申請書の様式の作成、申請日の入力方法など、申請書入力時の運用情報や、『財務大将』などへの連携情報を登録します。⇒『申請書の基本情報を登録する』参照複数の申請書・伝票で同じ承認ルートを使用する場合同じ承認ルートを使用する申請書・伝票をグループ登録します。⇒『同じ承認ルートの申請書・伝票をグループ登録する』参照STEP3承認ルートを作成し、承認ルートと申請書・伝票との紐づけを行います。⇒『承認ルートを登録する』参照関連する申請書を参照して承認する場合承認時に参照する申請書のグループを登録します。⇒『承認時に参照する申請書のグループを登録する』参照申請の一覧画面に表示する列項目を変更する場合申請の一覧画面の列項目の表示設定を行います。⇒『申請の一覧に表示する項目を登録する』参照申請依頼機能を使用する場合申請依頼機能（システム上で社員に申請を依頼する機能)を使用する場合に、申請依頼機能を使用できる社員の権限と依頼先に指定できる社員の範囲を設定します。⇒『申請依頼の権限を設定する』参照承認依頼時などに社員へ通知したい場合承認を依頼されたときや、代行者に設定されたときなどに社員へ送信する通知の設定を行います。⇒『通知機能を設定する』参照日常処理の流れ 処理の流れ申請者申請書の入力申請書を入力し、申請します。 ⇒『新規申請を行う』参照 承認者申請書の承認申請書の内容を確認し、承認します。 ⇒『承認依頼一覧を確認する』参照 各業務システムの担当者『財務大将』または『固定資産管理』に申請データを連携『財務大将』または『固定資産管理』と連携している場合は、最終承認が完了後、申請データが自動で連携されます。『財務大将』と連携している場合は、自動で仕訳が作成され、伝票が起票されます。『仕訳参照』などで内容を確認できます。『固定資産管理』と連携している場合は、『物件登録』の［申請書参照］をクリックすると、最終承認が完了した申請データが表示されるので、取り込みます。</div></div><div id="WFL10006"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; 申請書の基本情報を登録する</div><div class="search_title">申請書の基本情報を登録する</div><div class="displayText">申請書の基本情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］ここでは、申請書の運用情報や様式の設定を行います。1新規申請書登録申請書を新規に作成します。［… ...</div><div class="search_word">申請書の基本情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］ここでは、申請書の運用情報や様式の設定を行います。1新規申請書登録申請書を新規に作成します。［…］申請書一覧の一番上の階層にフォルダーを追加します。2［…］フォルダー内へのフォルダーの追加や、フォルダーの削除・移動・名称の変更を行います。3 編集申請書の基本的な情報を登録します。登録する情報は次の３つです。［基本情報設定］タブ申請書入力時の運用に関する情報を登録します。⇒『申請書の運用情報を登録する』参照［連動情報設定］タブ申請書の内容を『LucaTech GX』の『財務大将』や『固定資産管理』に連携する場合に、連携情報を設定します。たとえば、『財務大将』に連携して仕訳を自動作成する場合などに設定します。⇒『申請書の運用情報を登録する』参照［表示・入力権限設定］タブ申請書の特定の項目に対して、権限ごとに表示または入力の制限を設ける場合に設定します。⇒『権限ごとに申請書の入力・表示の制限を登録する』参照［…］［フォーム設定］申請書のレイアウトを設定します。設定方法については、次を参照してください。⇒『フォーム設定を行う』参照［プレビュー］申請書の入力イメージを確認します。［フォルダ移動］申請書の一覧画面に作成したフォルダーの中に申請書を移動します。［有効／無効切替］［有効］にすると、社員が申請書を新規で入力できるようになります。［無効］にすると、社員が申請書を新規で入力できないようになります。申請書をメンテナンスする場合などに使用します。［メニュー登録／解除］申請書のメニューを作成・削除します。メニューの作成後は、［設定］＞［システム管理］＞［ログイン・権限付与］＞［メニューパターン登録］で作成したメニューの表示設定を行います。［コピー］登録済みの申請書の様式をコピーして申請書を作成します。［削除］申請書を削除します。ただし次の申請書は削除できません。当年データ内で入力（一時保存含む）が行われた申請書『申請書・伝票グループ』『申請書関連付けグループ』『申請依頼権限設定』『承認ルート登録』など、他の設定で使用されている申請書4申請書ID名称登録済みの申請書のIDと名称が表示されます。5有効 申請書の有効・無効の状況が表示されます。フォーム連動設定メニュー申請書の設定状況が表示されます。［フォーム］［基本情報設定］タブの登録状況が表示されます。登録前は［×］、設定が完了すると［✓］で表示されます。［連動設定］［連動情報設定］タブの登録状況が表示されます。登録前は空欄、連動情報はあるが未完了だと［×］、設定が完了すると［✓］で表示されます。［メニュー登録］『LucaTech GX』のメニューへの登録状況が表示されます。登録前は空欄、メニュー登録を行った状態は［✓］で表示されます。6更新日時最後に申請書を編集した日時が表示されます。 申請書を作成・公開する申請書を作成し、社員に申請書を公開する手順は次のとおりです。   すでに社員に公開している申請書を編集する場合すでに社員に公開している申請書を編集する場合は、［…］の［有効／無効切替］をクリックして［無効］に切り替えてから行ってください。 ①　申請書一覧の申請書を使用する場合は、をクリックします。申請書一覧の申請書以外を使用する場合は、［新規申請書登録］をクリックします。申請書一覧の申請書をコピーする場合は、［…］の［コピー］をクリックして申請書IDと申請書名称を登録します。②　［基本情報設定］タブで、申請書の運用情報を設定します。⇒『申請書の運用情報を登録する』参照③　申請書の内容を『LucaTech GX』の業務システムに連携する場合は、［連動情報設定］タブで連携情報を設定します。⇒『申請書の運用情報を登録する』参照④　申請書の特定の項目に対して権限ごとに表示または入力の制限を設ける場合は、［表示・入力権限設定］タブで権限を設定します。⇒『権限ごとに申請書の入力・表示の制限を登録する』参照⑤　画面右上のをクリックして一覧画面に戻ります。⑥　申請書の［…］から［フォーム設定］をクリックし、申請書のレイアウトを作成します。システムで用意されている申請書、コピーした申請書の場合は、あらかじめレイアウトが用意されているため、必要に応じて修正します。新規で作成した申請書の場合は、一からレイアウトを作成します。⇒『フォーム設定を行う』参照⑦　申請書の［…］から［有効／無効切替］をクリックし、［有効］に切り替えます。⑧　申請書一覧の［…］から［メニュー登録／解除］をクリックします。申請書のメニューが作成されます。⑨　［設定］＞［システム管理］＞［ログイン・権限付与］＞［メニューパターン登録］で、作成された申請書のメニューの表示設定を行います。設定方法については、次を参照してください。⇒『メニューパターンを登録する』参照⑩　［設定］＞［システム管理］＞［ログイン・権限付与］＞［ロール登録］で、手順⑨で登録したパターンに対して、メニューの操作権限設定を行います。設定方法については、次を参照してください。⇒『ロールを編集する』参照</div></div><div id="WFL10007"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; 申請書の基本情報を登録する &gt; 申請書の運用情報を登録する</div><div class="search_title">申請書の運用情報を登録する</div><div class="displayText">申請書の運用情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］＞［基本情報設定］タブ申請日の入力方法や申請書No.の採番方法など、申請書入力時の運用に関する情 ...</div><div class="search_word">申請書の運用情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］＞［基本情報設定］タブ申請日の入力方法や申請書No.の採番方法など、申請書入力時の運用に関する情報を登録します。申請書設定申請書ID申請書のIDを20文字以内で入力します。他の申請書と同じIDは登録できません。申請書名称申請書の名称を40文字以内で入力します。申請書入力設定申請日［データ参照］アイテムで設定した申請日について、申請書入力時の申請者による修正可否を設定します。［入力あり］申請日に入力日が初期表示されますが、修正できます。［入力なし］申請日に入力日が表示されます。修正はできません。申請時添付ファイル申請者によるファイル添付の要否を設定します。［任意］ファイルの添付がなくても申請できます。［任意（確認メッセージ表示）］ファイルが添付されていないと確認のメッセージが表示されますが、そのまま申請できます。［必須］ファイルが添付されていないと申請できません。即時印刷初期設定申請書の入力画面で［即時印刷］に✔がついた状態とする場合は、［即時印刷する］を選択します。［即時印刷］にチェックがついていると、申請時に申請書がPDF形式で自動保存されます。申請者自身で✔をはずすこともできます。（例）交通費精算書の入力画面台紙印刷初期設定申請書のPDFファイルの出力範囲を設定します。［全印刷］台紙ページ含め、すべてのページがPDF出力されます。［申請書印刷］［フォーム設定］で［必須ページ］［任意ページ］に設定したページのみPDF出力されます。［台紙印刷］［フォーム設定］で［台紙ページ］に設定したページのみPDF出力されます。連続入力初期設定申請書の入力画面の［連続入力］に✔がついた状態とする場合は、［連続入力］を選択します。［連続入力］に✔がついていると、同じ申請書を続けて申請できます。申請者自身で✔をはずすこともできます。（例）交通費精算書の入力画面タイムスタンプ採用設定添付ファイルにタイムスタンプを付与する場合は、［採用する］を選択します。最終承認されたタイミングでタイムスタンプが付与されます。タイムスタンプの付与には、『タイムスタンプ』のライセンスが必要です。タイムスタンプが付与されるファイルはPDF・JPG・JPEG形式のファイルです。  最終承認時にタイムスタンプが付与できなかった場合は、『ワークフロー』ではタイムスタンプを再付与できません。再付与を行う場合は、［財務大将］＞［文書］＞［証憑確認］で行います。なお、タイムスタンプの再付与には『e文書対応』のライセンスが必要です。申請書No.採番設定設定方法申請書No.の採番情報を設定します。［申請書別設定］申請書ごとに採番します。［共通採番情報指定］あらかじめ『共通採番情報登録』で申請書の種別ごとに採番情報を登録した採番情報の中から申請書に適用させる採番情報を選択します。『共通採番情報登録』の登録方法については、次を参照してください。⇒『申請書の共通の採番情報を登録する』参照桁数自動で採番される申請書No.の桁数（付与文字を除く）を、1～8の範囲で入力します。申請書No.が設定した桁数を超えた場合は、最初の番号に戻って採番されます。申請書No.が設定した桁数未満で採番されたときに、前に0をつける場合は、［前ゼロあり］を選択します。採番方法月ごと、年ごとで採番する場合に［月次］［年次］に変更します。暦月・暦年とは、カレンダーに基づいた年月のことです。   月次・年次とは、会社で設定している会計上の年月のことです。採番設定付与文字と採番初期値を設定します。付与文字：申請書No.の前につける文字や番号採番初期値：採番を開始する番号たとえば、［桁数］を［8桁（前ゼロあり）］、［採番方法］を［月次（暦月）］を選択し、［付与文字］［採番初期値］を次のとおり設定したとします。このとき、R7年4月の申請書No.は「MJS070400000001」から採番されます。R7年5月の申請書No.は「MJS070500000001」から採番されます。部門ごとに採番設定を行う場合は、［部門管理する］を選択して［部門追加］から部門を追加します。そして設定する部門を切り替えて採番設定を行います。このとき、追加した部門に属さない社員が申請を行うと申請書No.は「1」で採番され、その社員の部門の採番設定が自動で追加されます。をクリックすると、［現在値］の番号が［採番初期値］と同じ番号になります。導入時に申請書をテスト入力した場合など、採番をやり直したい場合に使用します。決算No.採番設定決裁No.使用設定決裁No.とは、最終承認時に自動で採番される番号です。決裁No.を使用する場合に、［使用する］に変更します。設定方法桁数採番方法採番設定［申請書No.採番設定］と同様です。上記の［申請書No.採番設定］の説明を参照してください。</div></div><div id="WFL10008"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; 申請書の基本情報を登録する &gt; 各業務システムへの連携情報を設定する</div><div class="search_title">各業務システムへの連携情報を設定する</div><div class="displayText">各業務システムへの連携情報を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］＞［連携情報設定］タブ申請書の内容を『財務大将』などの他の業務システムに連携する場合に ...</div><div class="search_word">各業務システムへの連携情報を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］＞［連携情報設定］タブ申請書の内容を『財務大将』などの他の業務システムに連携する場合に、業務システムとの連携情報を設定します。設定できる連携情報は次のとおりです。 連携する業務システム連携内容財務大将申請書の内容から自動で仕訳が作成され伝票が起票されます。仮払申請書や交通費精算書など、仕訳入力が必要な申請書に対して設定します。固定資産管理申請書の内容から物件情報が連携されます。連携後、『物件登録』の［申請書参照］をクリックすると、物件情報が反映されます。資産取得申請書など、物件登録が必要な申請書に対して設定します。 ①　［新規連動情報登録］をクリックします。②　連動タイプを選択し、名称を入力して［更新］をクリックします。連動タイプ設定内容自動仕訳申請内容をもとに『財務大将』に仕訳情報を連携する場合に選択します。物件登録管理申請内容をもとに『固定資産管理』に物件情報を連携する場合に選択します。③　をクリックして、詳細設定を行います。連動タイプによって設定内容が異なります。設定内容については、次を参照してください。⇒『財務大将との連携情報を設定する』参照⇒『固定資産管理との連携情報を設定する』参照設定後は、［完了］が✔になります。④　［…］の［有効／無効切替］をクリックします。［有効］欄が有効になります。 財務大将との連携情報を設定する『財務大将』で伝票を自動起票するために、［基本情報］［仕訳情報］［貸借情報］の各タブで連携情報を設定します。すべてのタブで設定が完了したら、［更新］をクリックします。 ［基本情報］タブ伝票の形式や伝票の付番方法など、伝票起票時のルールを設定します。⇒『［基本情報］タブ』参照［仕訳情報］タブ伝票の起票日など、起票される伝票の項目の設定を行います。⇒『［仕訳情報］タブ』参照［貸借情報］タブ自動で作成される仕訳の貸借の科目などを設定します。⇒『［貸借情報］タブ』参照 設定した申請書で申請が行われると、ここで設定した内容に従って仕訳（未承認仕訳）が作成され、伝票が起票されます。最終承認が完了すると、この伝票は本伝票となります。起票された伝票の情報は、『仕訳参照』や『振替伝票』などで確認できます。   ［基本情報］タブ伝票の形式や伝票の付番方法など、伝票起票時のルールを設定します。基本情報仮払精算方法仮払金を相殺する仕訳の作成方法を選択します。現在は使用できません。仮払相殺科目仮払金を相殺する科目を選択します。現在は使用できません。自動仕訳形式仕訳データの作成方法を選択します。［単一仕訳］は伝票形式で起票されません。［財務大将］＞［日常処理］＞［参照］＞［仕訳参照］で確認のみ行う場合に選択します。伝票作成方法自動起票される伝票の作成方法を選択します。［単一明細］仕訳1件につき伝票が1つ起票されます。仕訳が2件ある場合は、起票される伝票は2つになります。［複数明細］申請書1つにつき伝票が1つ起票されます。仕訳が2件ある場合でも、起票される伝票は1つになります。［仕訳情報］タブの［新規パターン登録］で仕訳ごとにパターンの追加が必要です。新規パターン登録については、次を参照してください。⇒『複数の種類の仕訳を作成する』参照伝票No.付番方法自動起票される伝票の伝票No.の付番方法を選択します。［システム自動付番］『財務大将』で設定したシステム自動付番のルールを使用する場合に選択します。付番のルールは、［設定］＞［導入処理］＞［財務基本情報登録］＞［処理区分：基本情報］の［自動付番方法］で［システム自動付番］を選択して設定します。⇒『伝票No.情報』参照［申請書毎付番（申請書No.）］申請書No.と同じ番号を伝票No.とする場合に選択します。ただし、申請書No.に付与文字を設定している場合は、付与文字部分は起票される伝票No.には反映されません。申請書No.の付番方法は、『申請書登録』の［基本情報設定］タブで設定します。データ基準自動起票される伝票の会計基準を選択します。現在は使用できません。 ［仕訳情報］タブ伝票の起票日など、起票される伝票の項目の設定を行います。仕訳情報表形式［グリッド（表）］に作成した表内のすべての項目に対して［仕訳情報］タブ、［貸借情報］タブの設定内容を適用する場合は、表の名称を選択します。たとえば交通費精算書などで、表内のすべての行に対して同じ仕訳を作成する場合に、この設定をすると便利です。ただし、行ごとに仕訳が異なる場合は、画面右上に表示されている［通常仕訳パターン］からパターンを追加し、パターンごとに仕訳の設定を行います。⇒『複数の種類の仕訳を作成する』参照固定摘要仕訳作成される仕訳において、『固定摘要登録』で設定した固定摘要の貸借情報の科目の使用可否を選択します。固定摘要を使用すると、固定摘要に登録した科目情報を設定でき、借方・貸方それぞれに科目情報を設定する手間を省くことができます。［使用する（基準）］『固定摘要登録』で設定した借方・貸方の科目を使用して自動仕訳を作成する場合に選択します。あらかじめ、『固定摘要登録』で借方仕訳情報と貸方仕訳情報の両方の［勘定科目区分］を［基準］に設定する必要があります。［使用する（置換）］借方は『固定摘要登録』で設定した科目・貸方は［貸借情報］タブで設定した科目を使用して自動仕訳を作成する場合に選択します。あらかじめ、『固定摘要登録』で借方仕訳情報の［勘定科目区分］を［基準］、貸方仕訳情報の［勘定科目区分］を［置換］に設定する必要があります。［使用しない］固定摘要を使用せず、［貸借情報］タブで設定した借方・貸方・消費税を設定する場合に選択します。［使用する］を選択した場合、どの固定摘要を使用するかは［貸借情報］タブで設定します。また、『固定摘要登録』で補助や消費税が［可変］で設定されている場合は、［貸借情報］タブで補助と消費税の詳細情報を設定します。『固定摘要登録』については、次を参照してください。⇒『固定摘要を登録する』参照基本項目起票者指定方法起票者伝票の起票者欄の反映方法を選択します。［コード選択］特定の社員を起票者とする場合に選択し、［起票者］から社員を指定します。［項目選択］申請書の項目を使用して起票者を反映する場合に選択し、［起票者］から申請書の項目名を指定します。あらかじめ申請書に［申請者名称］を参照させる［データ参照］アイテムを配置している必要があります。証憑No.［設定］＞［導入処理］＞［財務］＞［財務基本情報登録］＞［処理区分：基本情報］の［証憑No.入力区分］が［入力する］の場合に設定します。申請書の項目を使用して伝票の証憑No.欄を反映する場合に、申請書の項目名を指定します。あらかじめ申請書に数値項目の配置が必要です。伝票日付／期日伝票日付指定方法伝票日付締め方法締め時間締日設定 伝票の伝票日付欄の反映方法を選択します。［締日設定］申請書の最終承認日と締日を考慮した日付を反映する場合に選択します。［締め方法］で締日の頻度を選択し、［締め時間］に1日の終わりとする時間を0～23の間で入力します。たとえば［締め方法］で［毎日］を選択し、［締め時間］を18と入力した場合、4月1日17時に最終承認された申請書の伝票日付は、4月1日になります。4月1日18時に最終承認された申請書の伝票日付は4月2日になります。［締め方法］が［曜日］［日］の場合は、［締日設定］で曜日または日にちを指定します。たとえば［締め方法］で［曜日］を選択し、［締め時間］を９時、［締日設定］を水と設定した場合、   4月3日（水）9時より前に最終承認された申請書の伝票日付は、4月3日（水）   4月3日（水）9時以降に最終承認された申請書の伝票日付は、4月10日（水）となります。［項目選択］申請書の項目を使用して伝票日付を反映する場合に選択し、［伝票日付］から申請書の項目名を指定します。あらかじめ申請書に日付入力項目の配置が必要です。［最終承認日］申請書の最終承認が行われた日付を伝票日付とする場合に選択します。休日休日振替伝票日付が休日にあたる場合に、［設定］＞［導入処理］＞［会社情報］＞［休日登録］に登録したカレンダーを使用して休日の考慮を含めるかを選択します。［設定しない］カレンダーは使用しません。起票日が休日の場合でも休日の日付で起票されます。［休日カレンダー］カレンダーを使用して休日の設定を行います。選択したカレンダーにおいて起票日が休日に該当する場合の振替日を［休日振替］で選択します。［当日］の場合は、伝票の起票日が休日であっても、休日の日付が伝票の起票日となります。［前営業日］の場合は、休日の1営業日前の日付が伝票の起票日となります。［翌営業日］の場合は、休日の翌営業日の日付が伝票の起票日となります。期日指定方法期日伝票の期日欄の反映方法を選択します。［項目選択］申請書の項目を使用して期日に反映する場合に選択し、［期日］から申請書の項目名を指定します。あらかじめ申請書に日付入力の項目の配置が必要です。［自動セット］『取引先登録』で設定した［入金予定］［支払予定］の締日を期日欄に反映する場合に選択します。［入金予定］と［支払予定］のどちらが使用されるかは、［貸借情報］タブで設定した科目によって決まります。（例：買掛金に仕入先が紐づいている場合、仕入先の支払予定締日が使用されます。）また、締日が複数設定されている場合は、起票日以降で最も早い締日が使用されます。『取引先登録』の［入金予定］［支払予定］については、次を参照してください。⇒『取引先を登録する』参照［設定なし］期日を設定しない場合に選択します。起票される伝票の期日欄は空欄になります。金額［固定摘要仕訳］で［使用しない］を選択した場合に、伝票の金額に関する設定を行います。消費税区分指定方法消費税コード 作成された仕訳に、消費税入力の対象となる科目が含まれている場合に、伝票の消費税欄への反映方法を設定します。［コード選択］特定の消費税コードを固定で反映する場合に選択し、［消費税コード］から消費税コードを指定します。［項目選択］申請書の項目を伝票の消費税とする場合に選択し、［消費税コード］から申請書のコンボボックスまたはコード入力の項目で設定した消費税コードを指定します。あらかじめ申請書に消費税マスターを選択肢に使用したコンボボックスまたはコード入力の項目の配置が必要です。［自動設定］［設定］＞［導入処理］＞［財務基本情報登録］＞［処理区分：消費税情報］の科目別消費税で登録している消費税コードを自動反映する場合に選択します。金額（内税）金額（外税）金額（その他）伝票の金額欄に反映する申請書の項目を選択します。あらかじめ申請書に数値入力の項目の配置が必要です。消費税額外税消費税を含む仕訳の場合に、消費税欄に反映する申請書の項目を選択します。あらかじめ、申請書に外税消費税の項目の配置が必要です（内税消費税の場合は、金額から消費税額が自動で計算され、伝票に反映されます）。［消費税区分指定方法］が次の設定の場合に設定します。［コード選択］を選択し、外税の消費税を指定した場合［項目選択］を選択し、項目の選択肢に外税の消費税が含まれる場合［自動設定］を選択した場合仮払金額仮払金を相殺する仕訳の場合に使用します。現在は使用できません。消費税率判定基準日消費税率判定基準項目伝票の消費税率欄の反映方法を選択します。［伝票日付にて判定］自動起票された伝票の伝票日付から消費税率を自動で判定する場合に選択します。［日付項目にて判定］申請書の日付項目から消費税率を自動判定する場合に選択し、［消費税率判定基準項目］で日付の項目を指定します。あらかじめ、申請書に日付入力の項目の配置が必要です。［消費税率を指定］特定の消費税率を固定で反映する場合に選択し、［消費税率判定基準項目］から消費税率を指定します。［消費税率項目にて判定］申請書の項目を伝票の消費税率とする場合に選択し、［消費税率判定基準項目］から申請書の項目名を指定します。あらかじめ申請書に消費率マスターを選択肢に使用したコンボボックスまたはコード入力の項目の配置が必要です。摘要摘要指定方法（１～5）摘要（１～5）伝票の摘要欄の反映方法を設定します。最大5つまで設定できます。［項目選択］申請書の項目を伝票の摘要とする場合に選択し、［摘要］から申請書の項目名を指定します。あらかじめ申請書に摘要に使用する項目の配置が必要です。［文字列設定］特定の摘要の内容を固定で反映する場合に選択し、［摘要］に摘要欄に反映する文字を入力します。［設定なし］摘要欄に反映しない場合に選択します。起票される伝票の摘要欄は空欄になります。摘要区切り文字（１～5）摘要を複数使用する場合に、摘要と摘要の区切りに使用する文字を設定します。フリー項目伝票のフリー項目欄に、申請書の項目を反映する場合に設定します。 文字フリー項目（１～10）伝票のフリー項目（文字）に反映する申請書の項目名を指定します。あらかじめ申請書に文字入力の項目の配置が必要です。数値フリー項目（１～10）伝票のフリー項目（数値）に反映する申請書の項目名を指定します。あらかじめ申請書に数値入力の項目の配置が必要です。日付フリー項目（１～10）伝票のフリー項目（日付）に反映する申請書の項目名を指定します。あらかじめ申請書に日付入力の項目の配置が必要です。 仕入税額控除の記載事項インボイス制度対応において、［設定］＞［導入処理］＞［財務基本情報登録］＞［処理区分：基本情報］で［仕入税額控除の記載事項の入力方法］が［仕入日／仕入先を摘要の他に入力する］に設定している場合は、伝票の仕入日・仕入先欄の反映方法を選択します。 仕入日入力方法仕入日仕入日（範囲）伝票の仕入日欄に反映する日付の入力方法を選択します。［日付］［年月］を選択した場合は、   仕入日欄に反映する申請書の項目を［仕入日］から選択します。［日付範囲］［年月範囲］を選択した場合は、仕入日欄に反映する申請書の項目を［仕入日（範囲）］から選択します。あらかじめ、申請書に日付入力の項目の配置が必要です。仕入先伝票の仕入先欄に反映する申請書の項目名を指定します。あらかじめ、申請書に文字入力・メモ入力の項目の配置が必要です。 インボイス制度対応インボイス制度対応において、伝票の事業者取引区分欄に反映する項目を設定します。あらかじめ、申請書の選択肢に［適格請求書発行事業者］を設定したコンボボックスまたはコード入力の項目の配置が必要です。 事業者区分申請書に配置した適格請求書発行事業者を選択肢に使用した項目を指定します。取引先申請書に配置した取引先マスターを選択肢に使用した項目を指定します。現在は使用できません。 ［貸借情報］タブ自動で作成される仕訳の借方・貸方の科目の設定を行います。［仕訳情報］タブの［固定摘要仕訳］の設定内容によって、設定する内容が異なります。 固定摘要仕訳仕訳の作成方法使用する（基準）『固定摘要登録』で登録した固定摘要の勘定科目を使用して仕訳を作成します。［補助区分］が［可変］の補助マスターがある場合は、ここで補助科目を設定できます。使用する（置換）借方は『固定摘要登録』で登録した固定摘要の勘定科目を使用します。［補助区分］が［可変］の補助マスターがある場合は、ここで補助科目を設定できます。貸方はここで設定した勘定科目を使用します。使用しないここで設定した勘定科目を使用して仕訳を作成します。  ［固定摘要仕訳］が［使用する（基準）］の場合①　［貸借情報］で仕訳に使用する固定摘要を選択します。 固定摘要指定方法固定摘要固定摘要の使用方法を選択します。［コード選択］特定の固定摘要を使用する場合に選択し、［固定摘要］から固定摘要を指定します。［項目選択］申請書に配置した固定摘要の項目を使用する場合に選択し、［固定摘要］から項目を指定します。あらかじめ申請書に固定摘要マスターを選択肢に使用したコンボボックスまたはコード入力の項目の配置が必要です。摘要分類［固定摘要指定方法］で［項目選択］を選択した場合、固定摘要の選択肢に対して摘要分類が設定されている場合、設定されている摘要分類が表示されます。［コード選択］を選択した場合は、『固定摘要登録』で設定した科目情報が［借方詳細情報］［貸方詳細情報］に表示されます。②　『固定摘要登録』で［補助マスター］の［補助区分］が［可変］になっている場合は、［借方詳細情報］［貸方詳細情報］で科目別補助を設定します。③　［金額］で、伝票の消費税欄への反映方法と、金額欄に反映する申請書の項目を選択します。 消費税区分指定方法伝票の消費税情報の反映方法の設定と、金額欄に反映する申請書の項目を選択します。金額欄の設定を行うには、あらかじめ申請書に数値入力の項目の配置が必要です。［固定摘要］『固定摘要登録』の［消費税関係］で設定した消費税情報を反映する場合に選択し、［金額項目］から伝票の金額欄に反映する申請書の項目を選択します。［コード選択］特定の消費税コードを固定で反映する場合に選択し、［消費税コード］から消費税コードを指定します。また、［金額（内税）］［金額（外税）］［金額（その他）］のいずれから金額欄に反映する申請書の項目を選択します。［項目選択］申請書の項目を伝票の消費税とする場合に選択し、［消費税コード］から申請書のコンボボックスまたはコード入力の項目で設定した消費税コードを指定します。あらかじめ申請書に消費税マスターを選択肢に使用したコンボボックスまたはコード入力の項目の配置が必要です。また、［金額（内税）］［金額（外税）］［金額（その他）］のいずれから伝票の金額欄に反映する申請書の項目を選択します。消費税額外税消費税を含む仕訳の場合に、消費税欄に反映する申請書の項目を選択します。あらかじめ、申請書に外税消費税の項目の配置が必要です（内税消費税の場合は、金額から消費税額が自動で計算され、伝票に反映されます）。［消費税区分指定方法］が次の設定の場合に設定します。［コード選択］を選択し、外税の消費税を指定した場合［項目選択］を選択し、項目の選択肢に外税の消費税が含まれる場合 ④　［更新］をクリックします。  ［固定摘要仕訳］が［使用する（置換）］の場合①　［貸借情報］で仕訳に使用する固定摘要を選択します。固定摘要指定方法固定摘要固定摘要の使用方法を選択します。［コード選択］特定の固定摘要を使用する場合に選択し、［固定摘要］から固定摘要を指定します。［項目選択］申請書に配置した固定摘要の項目を使用する場合に選択し、［固定摘要］から項目を指定します。あらかじめ申請書に選択肢に固定摘要マスターを使用したコンボボックスまたはコード入力の項目の配置が必要です。摘要分類［固定摘要指定方法］で［項目選択］を選択した場合、固定摘要の選択肢に対して摘要分類が設定されている場合、設定されている摘要分類が表示されます。［コード選択］を選択した場合は、『固定摘要登録』で設定した科目情報が［借方詳細情報］に表示されます。②　『固定摘要登録』で［補助マスター］の［補助区分］が［可変］になっている場合は、［借方詳細情報］で科目別補助を設定します。③　［貸方詳細情報］で、貸方の科目を設定します。［項目選択］の場合は、あらかじめ申請書にコンボボックスまたはコード入力の選択肢に固定摘要を使用した項目の配置が必要です。④　［金額］で、伝票の消費税欄への反映方法と、金額欄に反映する申請書の項目を選択します。消費税区分指定方法伝票の消費税情報の反映方法の設定と、金額欄に反映する申請書の項目を選択します。金額欄の設定を行うには、あらかじめ申請書に数値入力の項目の配置が必要です。［固定摘要］『固定摘要登録』の［消費税関係］で設定した消費税情報を反映する場合に選択し、［金額項目］から伝票の金額欄に反映する申請書の項目を選択します。［コード選択］特定の消費税コードを固定で反映する場合に選択し、［消費税コード］から消費税コードを指定します。また、［金額（内税）］［金額（外税）］［金額（その他）］のいずれから金額欄に反映する申請書の項目を選択します。［項目選択］申請書の項目を伝票の消費税とする場合に選択し、［消費税コード］から申請書のコンボボックスまたはコード入力の項目で設定した消費税コードを指定します。あらかじめ申請書の選択肢に消費税マスターを使用したコンボボックスまたはコード入力の項目の配置が必要です。また、［金額（内税）］［金額（外税）］［金額（その他）］のいずれから伝票の金額欄に反映する申請書の項目を選択します。消費税額外税消費税を含む仕訳の場合に、消費税欄に反映する申請書の項目を選択します。あらかじめ、申請書に外税消費税の項目の配置が必要です（内税消費税の場合は、金額から消費税額が自動で計算され、伝票に反映されます）。［消費税区分指定方法］が次の設定の場合に設定します。［コード選択］を選択し、外税の消費税を指定した場合［項目選択］を選択し、項目の選択肢に外税の消費税が含まれる場合⑤　［更新］をクリックします。   ［固定摘要仕訳］が［使用しない］の場合①　［借方情報］で、作成される仕訳の借方科目の反映方法を選択します。［コード選択］を選択した場合は、［借方詳細情報］で借方科目を設定します。。②　［貸方情報］で、作成される仕訳の貸方科目の反映方法を選択します［コード選択］を選択した場合は、［貸方詳細情報］で借方科目を設定します。③　［更新］をクリックします。 複数の種類の仕訳を作成する1つの申請書に対して複数の種類の仕訳を作成する場合に、［通常仕訳パターン］をクリックしてパターンを追加します。仕訳パターン2、仕訳パターン３とパターンが追加されます。追加したパターンに対して［仕訳情報］タブ、［貸借情報］タブで仕訳の情報を設定します。 次のような仕訳を作成する場合を例に、設定方法を説明します。 項目Aの金額の仕訳：通信費 / 当座項目Bの金額の仕訳：雑費  / 当座①　［通常仕訳パターン］をクリックし、パターンを追加します。仕訳パターン1に「項目Ａ」を設定します。仕訳パターン2に「項目B」を設定します。②　仕訳パターン１で項目Aの設定を行います。［仕訳情報］タブで起票に使用する申請書の項目などを設定し、［貸借情報］タブで「通信費 / 当座」の仕訳を設定します。③　仕訳パターン２で項目Bの設定を行います。［仕訳情報］タブで起票に使用する申請書の項目などを設定し、［貸借情報］タブで「旅費交通費 / 現金」の仕訳を設定します。仮払に対する相殺仕訳の確認方法について仮払の仕訳が発生した後に、仮払分が精算・相殺されているかの確認は、［財務大将］＞［日常処理］＞［帳票表示］＞［元帳］の『共通補助元帳』で行います。『社員元帳』の出力条件で次のように指定して出力します。［共通補助］［共通補助区分］で［社員］を選択［出力順序］［選択種別］［範囲］で出力順序や社員を指定［科目］［科目出力順序］［選択種別］［範囲］で出力順序や科目（連動情報設定で設定した科目）を指定出力した結果、貸借金額に差異がないかを確認します。 貸借金額に差額がある場合は、各伝票入力で差額分の仕訳を入力します。たとえば、『社員元帳』で次の差額があった場合、次のように仕訳を作成します。 ▼社員元帳社員：ミロク太郎　科目：仮払金 借方科目貸方科目7/2310,000 7/25 8,000↓▼伝票入力 借方科目貸方科目 未収入金　2,000仮払金　2,000  ミロク太郎 固定資産管理との連携情報を設定する承認が完了した申請書の物件情報を［固定資産管理］＞［資産管理］＞［資産登録］＞［物件登録］で取り込むための設定を行います。『物件登録』の項目に取り込む申請書の項目名を選択して、［更新］をクリックします。『固定資産管理』側で申請書の物件情報を取り込む方法については、次を参照してください。⇒『申請書から物件を登録する』参照 物件名称［物件名称］に取り込む申請書の項目を選択します。文字入力の申請書項目を設定できます。資産種類［資産種類］に取り込む申請書の項目を選択します。数値入力、コード入力、コンボボックスの申請書項目を設定できます。取得日［取得年月日］に取り込む申請書の項目を選択します。日付入力の申請書項目を設定できます。取得価額［取得価額］に取り込む申請書の項目を選択します。数値入力の申請書項目を設定できます。数量［数量］に取り込む申請書の項目を選択します。数値入力の申請書項目を設定できます。単位［数量］の［単位］に取り込む申請書の項目を選択します。数値入力、コード入力の申請書項目を設定できます。取得区分［取得区分］に取り込む申請書の項目を選択します。数値入力、コード入力の申請書項目を設定できます。部門［部門］に取り込む申請書の項目を選択します。文字入力、数値入力、コード入力、コンボボックスの申請書項目を設定できます。所在地［所在地］に取り込む申請書の項目を選択します。数値入力、コード入力の申請書項目を設定できます。稟議書番号［稟議書No.］に取り込む申請書の項目を選択します。文字入力、数値入力、コード入力の申請書項目を設定できます。購入先［購入先］に取り込む申請書の項目を選択します。文字入力、数値入力、コード入力、コンボボックスの申請書項目を設定できます。メモ内容［設定］＞［導入処理］＞［資産管理］＞［資産基本情報設定］の［メモ管理］が［管理あり］の場合に表示されます。［メモ］に取り込む申請書の項目を選択します。文字入力、数値入力、日付入力、コード入力、コンボボックスの申請書項目を設定できます。添付ファイル申請書の添付ファイルを［添付ファイル］に取り込む場合は、［連携する］を選択します。   メモ内容の連携について申請書のメモに関する項目の種別と『物件登録』の［メモ］の項目の種別が一致していないと、正しく内容が取り込まれない可能性があります。また、『物件登録』の［メモ］には、登録する物件の資産種類に紐づいたメモ管理項目が設定されます。よって資産種類ごとにメモ管理項目が異なる場合は、資産種類ごとに申請書を分けて連携する必要があります。</div></div><div id="WFL10011"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; 申請書の基本情報を登録する &gt; 権限ごとに申請書の入力・表示の制限を登録する</div><div class="search_title">権限ごとに申請書の入力・表示の制限を登録する</div><div class="displayText">権限ごとに申請書の入力・表示の制限を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］＞［表示・入力権限設定］タブ申請書の特定の項目に対して、権限ごとに表示または入 ...</div><div class="search_word">権限ごとに申請書の入力・表示の制限を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書登録］＞［表示・入力権限設定］タブ申請書の特定の項目に対して、権限ごとに表示または入力の制限を設ける場合に設定します。 申請者に対して制限を設ける場合は、左側で申請者を選択した状態で、制限を設ける項目名称の［表示］または［入力］を［OFF］にします。 申請者以外に対して表示・入力の制限を設ける場合は、［権限新規追加］で権限名称を追加します。なお、申請者以外が入力を行う場合は、『基本情報設定』の［承認者による修正］を［修正可］にする必要があります。追加した権限名称に対して、制限を設ける項目名称の［表示］または［入力］を［OFF］にします。その後、『承認ルート登録』の［ルート情報］でユニットに権限を割り当てます。『承認ルート登録』の設定方法は、次を参照してください。⇒『承認ルート情報を作成する』参照</div></div><div id="WFL10012"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; フリーマスターを登録する</div><div class="search_title">フリーマスターを登録する</div><div class="displayText">フリーマスターを登録する　［設定］＞［導入処理］＞［ワークフロー］＞［フリーマスター登録］『LucaTech GX』共通のマスター以外を申請書の選択肢に使用する場合、『ワークフロー ...</div><div class="search_word">フリーマスターを登録する　［設定］＞［導入処理］＞［ワークフロー］＞［フリーマスター登録］『LucaTech GX』共通のマスター以外を申請書の選択肢に使用する場合、『ワークフロー』独自のマスター（フリーマスター）を登録します。申請書のフォーム設定において『LucaTech GX』共通のマスター以外の選択肢を作成することは可能ですが、複数の申請書に共通する選択肢がある場合は、その選択肢をフリーマスターとして登録することで、各申請書で選択肢を作成する手間を省くことができます。登録方法については、次を参照してください。⇒『選択肢に使用するマスターを登録する』参照また、フリーマスターを登録することで、申請書内の選択肢を選ぶと、その選択肢に応じた内容が自動表示される項目を作成できます。たとえば、資格名を選択すると、資格名に応じたお祝い金が自動表示される項目を作成できます。⇒『選択肢に応じて自動表示される項目を作成する』参照2つの選択肢を組み合わせて、その選択肢に応じた内容が自動表示される項目を作成する場合は、『フリーマスター登録（2次元）』で登録します。『フリーマスター登録（2次元）』の登録方法は次を参照してください。⇒『フリーマスター（2次元）を登録する』参照</div></div><div id="WFL10013"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; フリーマスターを登録する &gt; 選択肢に使用するマスターを登録する</div><div class="search_title">選択肢に使用するマスターを登録する</div><div class="displayText">選択肢に使用するマスターを登録する次の表のように、移動手段のマスターを追加する場合を例に登録方法を説明します。移動手段移動手段名JR航空機私鉄地下鉄バスタクシー ①　［新規マスター ...</div><div class="search_word">選択肢に使用するマスターを登録する次の表のように、移動手段のマスターを追加する場合を例に登録方法を説明します。移動手段移動手段名JR航空機私鉄地下鉄バスタクシー ①　［新規マスター登録］をクリックします。②　［マスター定義］タブの内容を入力し、［更新］をクリックします。マスター名称マスターの名称を入力します。表示順選択肢の並び順を選択します。定義［列定義追加］をクリックし、フリーマスターで使用する列を設定します。今回の例では、「移動手段」という列を追加します。［列名称］列の名称を入力します。［データ型］データの種類を選択します。設定するデータが「移動手段」のように文字列であれば、［文字列］を選択します。登録後は修正できません。［文字列］を選択した場合は、入力できる最大文字数を設定します。［数値］を選択した場合は、入力できる最大桁数を設定します。［必須］［データ編集］タブで、この列のデータの登録を必須にする場合は、［ON］に設定します。［初期値］［データ編集］タブで行追加したときに初期表示する値を入力します。③　［データ編集］タブで［行追加］をクリックして選択肢の名称を入力し、［更新］をクリックします。今回の例では、次のように移動手段の名称を設定します。『申請書登録』の［フォーム設定］でコンボボックスアイテムを配置し、［リストアイテム設定］の［詳細設定］をクリックすると、登録したフリーマスターを設定できます。</div></div><div id="WFL10014"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; フリーマスターを登録する &gt; 選択肢に応じて自動表示される項目を作成する</div><div class="search_title">選択肢に応じて自動表示される項目を作成する</div><div class="displayText">選択肢に応じて自動表示される項目を作成する次の表のように、「資格取得お祝い金一覧」というフリーマスターを登録し、申請書上で「資格名」を選択したときに自動で「お祝い金額」を表示する場 ...</div><div class="search_word">選択肢に応じて自動表示される項目を作成する次の表のように、「資格取得お祝い金一覧」というフリーマスターを登録し、申請書上で「資格名」を選択したときに自動で「お祝い金額」を表示する場合を例に、登録方法を説明します。資格取得お祝い金一覧資格名金額日商簿記1級10,000日商簿記2級5,000日商簿記3級3,000①　［新規マスター登録］をクリックします。②　［マスター定義］タブの内容を入力し、［更新］をクリックします。今回の例では、次のように［マスター名称］で「資格取得お祝い金一覧」、［定義］で「資格名」と「金額」の列を設定します。項目の説明については、次を参照してください。⇒『選択肢に使用するマスターを登録する』参照③　［データ編集］タブで資格名別のお祝い金額のマスターを登録し、［更新］をクリックします。今回の例では、次のように資格名と金額を設定します。 これで『フリーマスター』の設定は完了です。続いて、『申請書登録』の［フォーム設定］で設定したフリーマスターの項目を配置します。④　『申請書登録』で申請書を選択し、［フォーム設定］をクリックします。⑤　［コンボボックス］と、自動表示させる項目（［文字入力］［数値入力］［日付入力］）のアイテムを配置します。今回の例では、資格名を選択する［コンボボックス］とお祝い金額を表示する［数値入力］のアイテムを配置します。⑥　配置したコンボボックス(項目名:コンボ_資格名)を選択し、［リストアイテム設定］の［詳細設定］をクリックします。⑦　［表示項目設定］の内容を設定します。基本設定:［種別］で［フリーマスター］を選択し、［マスター］で『フリーマスター登録』で登録したマスター名称を選択します。今回の例では、［マスター］で「資格取得お祝い金一覧」を選択します。フリーマスター設定:選択肢に使用する列を選択します。今回の例では、「資格名」を選択します。⑧　［出力先設定］の内容を設定します。［出力先項目追加］をクリックして、［マスター項目］で自動表示する列、［出力先項目］で出力先の項目を選択します。今回の例では、［マスター項目］で「金額」を選択し、［出力先項目］で手順②で配置した数値アイテム（項目名:数値_金額）を選択します。申請書入力時に、選択した内容に応じて金額が自動表示されるようになります。</div></div><div id="WFL10015"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; フリーマスター（2次元）を登録する</div><div class="search_title">フリーマスター（2次元）を登録する</div><div class="displayText">フリーマスター（2次元）を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［フリーマスター登録（２次元）］2つの選択肢を組み合わせて、その選択肢に応じた内容が自動表示される項目 ...</div><div class="search_word">フリーマスター（2次元）を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［フリーマスター登録（２次元）］2つの選択肢を組み合わせて、その選択肢に応じた内容が自動表示される項目を作成する場合は、『フリーマスター登録（2次元）』で登録します。たとえば、自身の役職と出張先の国内外区分（国内・海外）を選択すると、役職と国内外区分に応じて日当金額が自動で表示される項目を作成できます。 次の表のように、「役職・出張先別の日当金額」を例に登録方法を説明します。あらかじめ、『フリーマスター』で「国内外区分」のマスターを、『役職登録』で「役職」のマスターを登録しておきます。フリーマスターの登録方法については、次を参照してください。⇒『選択肢に使用するマスターを登録する』参照役職・出張先別の日当金額 課長係長一般社員国内8,0005,0003,000海外1,00008,0005,000 ①　［新規マスター登録］をクリックします。②　［マスター定義］タブの内容を入力し、［更新］をクリックします。基本設定マスター名称マスターの名称を入力します。データ型自動表示する項目のデータの種類を選択します。今回の例では金額を表示するため、［数値］を選択します。横軸マスター種別マスター指定条件の横軸に設定するマスターを選択します。今回の例では、横軸に役職を表示するため、［マスター種別］で［共通マスター］、［マスター指定］で［役職］を選択します。表示列指定［データ編集］タブで表示する列の名称を選択します。今回の例では、横軸に役職名を表示するため、［正式名称］を選択します。縦軸マスター種別マスター指定表示列指定条件の縦軸に設定するマスターを選択します。今回の例では、縦軸に『フリーマスター登録』で登録した国内外区分を表示するため、［マスター種別］で［フリーマスター(1次元)］を選択し、［マスター指定］と［表示列指定］で国内外区分名の情報を選択します。③　［データ編集］タブで縦軸・横軸の組み合わせに応じた内容を入力し、［更新］をクリックします。今回の例では、次のように国内外区分と役職、金額を設定します。これで『フリーマスター（2次元）』の設定は完了です。続いて、『申請書登録』の［フォーム設定］で設定したフリーマスターの項目を配置します。④　『申請書登録』で申請書を選択し、［フォーム設定］をクリックします。⑤　縦軸用と横軸用のアイテムと、自動表示する項目（データの種類に応じて［文字入力］［数値入力］のいずれか）のアイテムを配置します。今回の例では、2つの［コンボボックス］と［数値入力］のアイテムを配置します。⑥　1つ目のコンボボックス（項目名：コンボ_国内外）を選択し、［リストアイテム設定］の［詳細設定］をクリックします。       ⑦　［表示項目設定］の内容を設定し、［OK］をクリックします。今回の例では、次のように「国内外区分」の選択肢を設定します。基本設定：［種別］で［フリーマスター］を選択し、［マスター］で『フリーマスター登録』で登録したマスター名称を選択します。フリーマスター設定：選択肢に表示する項目名を選択します。⑧　2つ目のコンボボックス（項目名:コンボ_役職）を選択し、［リストアイテム設定］の［詳細設定］をクリックします。⑨　［表示項目設定］の内容を設定し、［OK］をクリックします。今回の例では、次のように「役職」の選択肢を設定します。基本設定：［種別］で［マスター］を選択し、［マスター］で［役職］を選択します。マスター別設定：選択肢に表示する役職を絞る場合は、［コード指定］を選択し、表示する役職を設定します。⑩　配置した数値アイテム（項目名：数値_金額）を選択し、［2次元マスター設定］の［詳細設定］をクリックします。⑪　『フリーマスター（2次元）』で設定したマスターと、手順⑦⑨で設定したコンボボックスの項目を選択し、［OK］をクリックします。申請書入力時に、縦軸の項目・横軸の項目で選択した内容に応じて、金額が自動表示されるようになります。</div></div><div id="WFL10016"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; 申請書の共通の採番情報を登録する</div><div class="search_title">申請書の共通の採番情報を登録する</div><div class="displayText">申請書の共通の採番情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［共通採番情報登録］複数の申請書に共通する申請書（決裁）No.の採番方法を設定します。共通する採番方法を ...</div><div class="search_word">申請書の共通の採番情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［共通採番情報登録］複数の申請書に共通する申請書（決裁）No.の採番方法を設定します。共通する採番方法を設定し、それを各申請書に適用することで、異なる申請書の申請書（決裁）No.を一律で管理できます。たとえば、［交通費精算書］［仮払申請書］という別の申請書を、「経費関連」という共通の採番情報で設定したときのイメージは次のとおりです。 共通の採番情報を設定する①　新規で採番情報を登録する場合は、［新規採番情報登録］をクリックします。登録済みの採番情報をコピーして作成する場合は、コピーする採番名称の［…］から［コピー］をクリックします。②　［採番名称］に「経費関係」など、共通の採番情報の名称を入力し、［種別］で共通の採番情報を適用する対象を選択します。［桁数］［採番方法］［採番設定］については、次を参照してください。⇒『申請書の運用情報を登録する』参照③　［更新］をクリックします。共通の採番情報の登録は完了です。続いて、登録した共通の採番情報を申請書ごとに適用します。④　『申請書登録』で適用する申請書のをクリックします。⑤　［基本情報設定］タブの［設定方法］で［共通採番情報指定］を選択し、『共通採番情報登録』で登録した共通の採番情報を選択します。申請書No.の採番情報を登録した場合決裁No.の採番情報を登録した場合［基本情報設定］タブのその他の設定内容については、次を参照してください。⇒『申請書の運用情報を登録する』参照</div></div><div id="WFL10017"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; 同じ承認ルートの申請書・伝票をグループ登録する</div><div class="search_title">同じ承認ルートの申請書・伝票をグループ登録する</div><div class="displayText">同じ承認ルートの申請書・伝票をグループ登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書・伝票グループ登録］複数の申請書・伝票で同じ承認ルートを使用する場合に、グループを ...</div><div class="search_word">同じ承認ルートの申請書・伝票をグループ登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書・伝票グループ登録］複数の申請書・伝票で同じ承認ルートを使用する場合に、グループを登録します。承認ルートは、申請書・伝票ごとに作成しますが、ここでグループを登録し、承認ルートに登録したグループを適用することで、承認ルートの作成にかかる手間を軽減できます。  申請書をグループ登録する①　新規でグループを登録する場合は、［新規グループ登録］をクリックします。登録済みのグループをコピーして作成する場合は、コピーするグループ名称の［…］から［コピー］をクリックします。②　［グループ名称］に「稟議関係」「経費関係」など、承認ルートをまとめるグループ名称を入力します。③　［申請書・伝票］の［申請書・伝票追加］をクリックします。④　グループ登録する申請書・伝票に✔をつけ、［OK］をクリックします。⑤　［更新］をクリックします。 承認ルート登録時、登録したグループを選択できるようになります。［承認ルート登録］画面『承認ルート登録』のその他の設定については、次を参照してください。⇒『承認ルート情報を作成する』参照</div></div><div id="WFL10018"><div class="search_breadcrumbs">導入処理 &gt; 申請書管理 &gt; 承認時に参照する申請書のグループを登録する</div><div class="search_title">承認時に参照する申請書のグループを登録する</div><div class="displayText">承認時に参照する申請書のグループを登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書関連付けグループ登録］承認時に参照する申請書のグループを登録します。グループ登録すると ...</div><div class="search_word">承認時に参照する申請書のグループを登録する　［設定］＞［導入処理］＞［ワークフロー］＞［申請書関連付けグループ登録］承認時に参照する申請書のグループを登録します。グループ登録すると、申請時に関連する申請書を設定でき、承認時は関連する申請書を参照しながら承認ができます。たとえば、複数の稟議書に対して一括で購入申請書を申請する場合や、経費付替依頼書の案件に対して経費精算書を参考にする場合などに利用すると便利です。 登録イメージ 承認時に参照する申請書のグループを登録する①　新規でグループを登録する場合は、［新規グループ登録］をクリックします。登録済みのグループをコピーして作成する場合は、コピーするグループ名称の［…］から［コピー］をクリックします。②　各項目を設定します。基本設定グループ名称グループ名称を入力します。申請書［申請書追加］をクリックして、グループ登録する申請書を選択します。たとえば、ここで出張旅費精算書と交通費精算書を設定した場合、交通費精算書を申請するときに、［関連付け可能範囲設定］で設定した範囲に従って、承認済みの出張旅費精算書と交通費精算書を関連付けすることができます。グループ使用可能部門グループ使用対象者申請時に申請書を関連付けできる権限（『所属人員登録』の部門長区分）を選択します。『所属人員登録』で部門承認者1~5のいずれかで登録していたとしても、『ワークフロー』では、すべて［部門承認者］として扱われます。グループ使用部門申請時に申請書を関連付けできる部門を選択します。たとえば、［グループ使用対象者］で［一般社員］に✔をつけ、［グループ使用部門］で［経理部］を指定した場合、経理部に所属している一般社員のみ、このグループの設定に従って申請書を関連付けできるようになります。関連付け可能範囲設定関連付け可能範囲設定添付できる申請書の範囲を選択します。［全部門］所属部門に関係なくすべての申請書を関連付けできます。［自部門］申請者と同じ部門の社員が申請した申請書のみ関連付けできます。たとえば自身が経理部に所属している場合、経理部の社員が申請した申請書のみ関連付けできます。［部門指定］指定した部門の社員が申請した申請書のみ関連付けできます。たとえば［部門指定］で総務部と設定した場合、所属部門に関係なく、総務部の社員が申請した申請書を関連付けできます。③　［更新］をクリックします。 申請書入力時、グループ登録した申請書を関連付けできるようになります。［申請書入力］画面 承認時、関連付けされた申請書を参照できるようになります。［申請書］画面</div></div><div id="WFL10020"><div class="search_breadcrumbs">導入処理 &gt; 承認ルート管理 &gt; 承認ルートを登録する</div><div class="search_title">承認ルートを登録する</div><div class="displayText">承認ルートを登録する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］申請書や伝票ごと、または『申請書・伝票グループ登録』で登録したグループごとに承認ルートを登録します ...</div><div class="search_word">承認ルートを登録する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］申請書や伝票ごと、または『申請書・伝票グループ登録』で登録したグループごとに承認ルートを登録します。1表示条件設定特定の承認ルートのみ表示する場合にクリックし、表示条件を指定します。新規承認ルート登録承認ルートを新規に作成します。［…］［フォルダ追加］承認ルート一覧の一番上の階層にフォルダーを追加します。［ルート検証］CSVファイルを出力し、承認ルートに不備がないかを確認します⇒『承認ルートを検証する』参照2［…］フォルダー内へのフォルダーの追加や、フォルダーの削除・移動・名称の変更を行います。3 編集承認ルートを編集します。［基本情報］タブ承認ルートを使用する部門体系パターンや申請書・伝票の基本情報を編集します。⇒『承認ルートの基本情報を登録する』参照［ルート情報］タブ処理者や分岐条件などを配置し、ルートを編集します。⇒『承認ルート情報を作成する』参照［…］［フォルダ移動］承認ルート一覧に作成したフォルダーの中に承認ルートを移動します。［有効／無効切替］［有効］にすると、社員が承認ルートを選択して申請できるようになります。［コピー］設定済みの承認ルートをコピーして承認ルートを作成します。［削除］設定済みの承認ルートを削除します。複数コピー・削除する場合は、対象の承認ルートに✔をつけて［一括コピー］［一括削除］をクリックします。4承認ルートID承認ルート名称承認ルート種別処理名称登録済みの承認ルートの情報が表示されます。一覧は［承認ルート名称］を基準に、名前順（数字→アルファベット→ひらがな→カタカナ→漢字）で表示されます。5有効承認ルートの有効・無効の状況が表示されます。完了承認ルートの設定状況が表示されます。［基本情報］タブと［ルート情報］タブの設定が完了すると✔に表示が変わります。更新日時最後に承認ルートを編集した日時が表示されます。  承認ルートの登録の流れ①　新規で承認ルートを登録する場合は、［新規承認ルート登録］をクリックします。登録済みの承認ルートをコピーする場合は、［…］の［コピー］をクリックしてをクリックします。②　［基本情報］タブで、承認ルートを使用する組織や申請書などの基本情報を登録します。⇒『承認ルートの基本情報を登録する』参照③　［ルート情報］タブで処理者や分岐条件などを配置し、ルートを作成します。⇒『承認ルート情報を作成する』参照④　必要に応じて［ルート検証］で承認ルートが正しく機能しているかCSVファイルを出力し、確認します。⇒『承認ルートを検証する』参照⑤　［有効／無効切替］をクリックし、承認ルートを［有効］にします。手順②で設定した申請書の申請画面で、登録した承認ルートを選択して申請できるようになります。</div></div><div id="WFL10021"><div class="search_breadcrumbs">導入処理 &gt; 承認ルート管理 &gt; 承認ルートを登録する &gt; 承認ルートの基本情報を登録する</div><div class="search_title">承認ルートの基本情報を登録する</div><div class="displayText">承認ルートの基本情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］＞［基本情報］タブ承認ルートを使用する組織や申請書・伝票などの基本情報を登録します。基本 ...</div><div class="search_word">承認ルートの基本情報を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］＞［基本情報］タブ承認ルートを使用する組織や申請書・伝票などの基本情報を登録します。基本設定承認ルート名称承認ルートの名称を入力します。部門体系パターン承認ルートを使用する部門体系を選択します。承認ルート種別承認ルートを使用する申請書・伝票などの処理の種類を選択します。［申請書］申請書でこの承認ルートを使用する場合に選択します。［伝票］『財務大将』の伝票でこの承認ルートを使用する場合に選択します。［申請書・伝票グループ］『申請書・伝票グループ登録』で登録したグループに含まれる申請書・伝票でこの承認ルートを使用する場合に選択します。グループの登録方法については、次を参照してください。⇒『同じ承認ルートの申請書・伝票をグループ登録する』参照処理名称承認ルートを使用する申請書・伝票・グループを選択します。期限申請画面に表示される［期限］（承認期限）を算出するための日数を入力します。申請日にここで入力した日数を加えた日付が、承認期限に表示されます。申請時に修正することも可能です。たとえば、ここで［3日後］と設定した場合、申請時にこの承認ルートを選択すると、［期限］に申請日から3日後の日付が自動表示されます。［申請］画面休日を考慮した日付を表示する場合は、『基本情報設定』で休日カレンダーを選択します。自動承認処理自動確認処理処理が滞った場合の自動処理（承認・否認・確認）の使用可否を選択します。［自動承認する］［自動否認する］［自動確認する］を選択した場合は、承認・確認依頼があった時点から何日後に自動処理を行うかを入力します。自動処理を行うには、併せて［ルート情報］タブの［自動処理］で自動処理を行うユニットに対して［実行する］を選択します。ルートガイドルートの説明を入力します。入力した説明は、申請画面の［ルート表示］をクリックし、承認ルート画面の［ルートガイド］をクリックすると表示されます。［申請］画面使用可能部門設定対象この承認ルートを使用できる部門を設定します。［全部門］所属部門に関係なくすべての社員がこの承認ルートを使用できます。［部門指定］指定した部門の社員のみ、この承認ルートを使用できます。指定した部門以外の社員には、申請時にこの承認ルートは表示されません。［部門追加］で部門を指定します。使用可能者この承認ルートを使用できる権限（『所属人員登録』の部門長区分）を選択します。『所属人員登録』で部門承認者1~5のいずれかで登録していたとしても、『ワークフロー』では、すべて［部門承認者］として扱われます。管理部門設定管理者以外が、他の社員の申請データを確認する場合に、ここで部門の設定を行います。設定した内容に従って『申請書検索（管理部門）』で申請データを確認できます。⇒『申請書・伝票を検索する』参照対象『申請書検索（管理部門）』において、この承認ルートで申請された申請データを確認できる部門を設定します。たとえば「ルートＡ」という承認ルートで［対象］を［経理部］と設定した場合、『申請書検索（管理部門）』では、経理部に所属する社員が、「ルートＡ」を使用した申請書をすべて確認できるようになります。（例）［経理部］としたときに確認できる範囲申請部門『申請書検索（管理部門）』において、この承認ルートを使用し、かつ自身と同じ部門に所属する人の申請書を確認できるようにする場合は、［管理部門とする］に設定します。たとえば「ルートＡ」という承認ルートで［管理部門とする］に設定し、ルートBで管理部門に「経理部」が存在するか、［申請部門を管理部門にする］が［ON］に設定している場合、『申請書検索（管理部門）』では次の図のように確認できます。（例）［管理部門とする］としたときに確認できる範囲参照者設定申請時対象完了時対象この承認ルートに参照者を設定する場合、参照者とする社員を設定します。ここで設定した社員は、申請時に指定しなくても自動で参照者として設定されます。参照者として設定された社員は、『参照依頼一覧』から申請データを参照できます。［申請時対象］申請時に参照させる場合は、参照者とする社員を［社員追加］から選択します。［完了時対象］承認完了（最終承認、または否認・取下）時に参照させる場合は、参照者とする社員を［社員追加］から選択します。</div></div><div id="WFL10022"><div class="search_breadcrumbs">導入処理 &gt; 承認ルート管理 &gt; 承認ルートを登録する &gt; 承認ルート情報を作成する</div><div class="search_title">承認ルート情報を作成する</div><div class="displayText">承認ルート情報を作成する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］＞［ルート情報］タブ［ルート情報］タブでは、処理者や条件（条件・並列）などのユニットを申請者（ ...</div><div class="search_word">承認ルート情報を作成する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］＞［ルート情報］タブ［ルート情報］タブでは、処理者や条件（条件・並列）などのユニットを申請者（）と完了（）の間に配置・設定し、承認ルート情報を作成します。承認者・確認者承認者は、申請に対して承認・否認の決裁を行います。確認者は、申請に対して決裁は行わず、確認の処理を行います。 承認者（社員） 確認者（社員）承認者・確認者に特定の社員を配置する場合に使用します。。 承認者（部門） 確認者（部門）承認者・確認者に特定の社員ではなく部門に属する社員を配置する場合に使用します。承認者・確認者に該当する社員が複数いる場合は、該当する社員全員に承認依頼が行われます。そのうち1人が処理すると、次の処理へ進みます。 承認者（実行時指定） 確認者（実行時指定）承認者・確認者を申請者または承認・確認などの処理者自身に選択させる場合に使用します。条件分岐 条件分岐申請書の入力内容を条件にしてルートを分ける場合に使用します。たとえば、申請書の精算金額を条件に承認者を分ける場合などに使用します。並列処理 並列承認並列承認を行う場合に使用します。並列承認とは、並列設定した複数の承認者のうち、一人の承認者が承認すると、次の承認に進める承認機能です。 合議承認合議承認を行う場合に使用します。合議承認とは、並列設定した複数の承認者の全員が承認すると、次の承認に進める承認機能です。その他業務 その他業務「契約書・見積書などの資料を集める」「申請書をファイリングする」など、申請・承認・確認以外の処理を承認ルートに配置する場合に使用します。   ユニットを配置する①　配置するユニットをクリックします。ルートの線が点線になります。②　点線上で、ユニットを配置する場所をクリックします。ユニットが配置されます。③　申請者・配置したユニットをクリックし、ユニットの詳細設定を行います。申請者・承認者・確認者ユニットの詳細設定については、次を参照してください。⇒『申請者・ 承認者・確認者を設定する』参照条件分岐・合議承認・並列承認の設定方法については、次を参照してください。⇒『条件分岐を設定する』参照⇒『並列処理を設定する』参照その他業務の設定方法については、次を参照してください。⇒『その他業務を設定する』参照④　［更新］をクリックします。 申請者・ 承認者・確認者を設定する承認者・確認者のユニットを配置後、ユニットの詳細設定を行います。配置したユニットによって設定する内容が異なります。査印設定入力者査印欄申請者査印欄査印欄申請者・処理者が処理を行ったときに申請書や伝票へ査印を出力する場合は、『申請書登録』の［フォーム設定］または［設定］＞［導入処理］＞［財務］＞［査印情報登録］で設定した査印No.を選択します。選択した場所に査印が出力されます。［指定なし］の場合は、処理をしても査印は出力されません。［入力者査印欄］申請者のユニットの場合に、申請書・伝票を入力した社員の査印の出力先を選択します。代行申請を行った場合は、代行申請者の査印が出力されます。［申請者査印欄］申請者のユニットの場合に、申請書・伝票を申請した社員の査印の出力先を選択します。［査印欄］処理者のユニットの場合に、処理者の社員の査印の配置場所を設定します。代行処理を行った場合は、代行処理者の社員の査印が出力されます。処理者設定・実行時指定設定処理者（社員のユニットの場合）処理者とする社員を設定します。［コード指定］特定の社員を処理者とする場合に選択し、［社員コード］で社員を選択します。［申請者指定］申請者を処理者とする場合に選択します。処理者（部門のユニットの場合）処理者とする社員の部門を設定します。 ［コード指定］特定の部門および『所属人員登録』の部門長区分に該当する社員を処理者とする場合に選択します。［部門コード］で部門を選択し、［依頼先］で社員の区分（『所属人員登録』の部門長区分）を選択します。『所属人員登録』で部門承認者1~5のいずれかで登録していたとしても、『ワークフロー』では、［部門承認者］として扱われます。たとえば、経理部の部門長が承認できるようにする場合は、［部門コード］で経理部を選択し、［依頼先］で部門長に✔をつけます。［階層指定］申請者が所属する部門において、申請部門から見た特定の階層および『所属人員登録』の部門長区分に該当する社員を処理者とする場合に選択します。　［階層指定］で階層を選択し、［依頼先］で社員の区分（『所属人員登録』の部門長区分）を選択します。階層は部門体系の位置を示します。たとえば、申請者がEさんの場合、0～2階層は次のようになります。たとえば、［階層］で1を選択し、［依頼先］で部門長に✔をつけた場合、承認できる社員はBさんになります。なお、部門長区分に該当する社員がいない場合は申請時にエラーになり、申請はできません。階層に相当する部門が存在しない場合は、承認がスルーされ次の処理に進みます。指定者設定（実行時指定ユニットの場合）申請者を含む、承認ルート上の［実行時指定］ユニットよりも前の処理者が表示されます。表示された処理者の中から、実行時指定の処理者を決めるユニットに✔をつけます。たとえば、承認者2に［実行時指定］ユニットを配置した承認ルートで、申請者に承認者2で処理する社員を選択させる場合は、申請者に✔をつけます。複数のユニットに✔をつけ、複数のユニットで実行時指定に対して異なる処理者を選択した場合は、ルート上の後のユニットで選択した社員が処理者となります。実行時に処理者を指定するユニットには、申請者から実行時指定ユニットまでのすべてのルートに、指定者を1人以上設定してください。エラーになる例「みろく一花」だけを指定者にすると、条件分岐によって「みろく一花」を経由しない可能性があるため、設定が完了しません。正しい例「みろく一花」と「弥勒花子」の両方を指定者にしたり、「ミロク太郎」や「0階層/部門承認者」を指定者にすると、すべてのルートで指定者を経由するため設定が完了します。処理依頼通知このユニットの社員に処理依頼を通知する場合は、［通知する］を選択します。あらかじめ、通知の設定を行う必要があります。通知の設定については、次を参照してください。⇒『通知機能を設定する』参照自動処理このユニットに対して［基本情報］タブで設定した自動処理を行う場合は、［実行する］を選択します。申請書等の修正承認時に申請内容の修正や添付ファイルの追加・削除ができるようにする場合は、［修正可］を選択します。あらかじめ、『基本情報設定』の［承認者による修正］を［使用可］にする必要があります。実行時スルー設定（実行時指定ユニットの場合）申請や承認・確認時に、実行時処理者の指定を必須にするか、任意とするかを設定します。任意とし、実行時指定の処理者を選択しなかった場合は、実行時指定の処理がスキップされます。［指定不可］実行時指定の処理者の選択を必須とする場合に選択します。実行時指定の画面で［実行時指定］の［指定する］に✔がついた状態になり、はずすことはできません。［指定可］実行時指定の処理者の選択を任意とし、実行時指定の画面の初期表示を［実行時指定］の［指定する］に✔がついた状態とする場合に選択します。［指定可（初期設定とする）］実行時指定の処理者の選択を任意とし、実行時指定の画面の初期表示を［実行時指定］の［指定する］に✔がついていない状態とする場合に選択します。代理者設定代理者とは本来の処理者が一定期間処理を行わなかった場合に、代わって処理を行う人のことです。［代理者設定］で指定した日数を経過しても本来の処理者が未処理の場合は、代理者に処理依頼が行われます。代理者を設定することで、処理の滞留を防ぐことができます。代理者設定処理が滞った場合に代理で処理を行う社員を設定する場合は、［ON］にします。［代理者］で代理で処理を行う社員を設定し、本来の処理者に依頼された日から、未承認の状態が何日続いた場合に、代理の処理依頼を行うかを［依頼までの日数］で設定します。代理者に処理依頼があったときや、代理者が処理を行ったときに通知メールを送信する場合は、通知の設定が必要です。『通知設定』については、次を参照してください。⇒『通知機能を設定する』参照   代行者との違いについて代行者とは、本来の承認者が不在の際に、その人に代わって処理を行う人のことです。承認依頼は、本来の承認者と代行者の両方に行われます。長期休暇などに備えて処理を代行する社員を配置する場合に設定します。代行者は『代行者設定』で設定します。設定方法については、次を参照してください。⇒『管理者が社員の代行者を設定する』参照その他設定表示・入力権限処理者の修正・表示箇所を限定する場合に設定します。処理が申請書の場合にのみ設定できます。あらかじめ、『申請書登録』の［表示・入力権限設定］タブで修正の権限を登録し、ここで登録した権限名称を選択します。集計階層『財務大将』側で階層ごとに承認状況を集計し、このユニットで処理した申請データに対して、『財務大将』で集計できるようにする場合は、［導入処理］＞［財務］＞［財務基本情報登録］＞［処理区分：基本情報］の［階層別集計採用区分］で設定した階層を選択します。『仕訳帳』などのメニューで、設定した階層ごとに仕訳の承認状況を確認できます。［仕訳帳］［階層別集計採用区分］については、次を参照してください⇒『財務大将の基本情報を登録する』参照コメント［ルート情報］タブの承認ルートに表示されるコメントを入力します。コメントは［ルートコメント表示］を［ON］にしたときに表示されます。ただし、コメント表示中は、承認ルートの修正はできません。ユニットに関するメモとして活用できます。  条件分岐を設定する条件分岐は、申請書の入力内容を条件にしてルートを分ける場合に使用します。申請後に分岐のルートが変わるような申請内容の変更を行った場合、分岐のルートを通過していないときは、変更内容に応じて分岐のルートが変わります。分岐のルートを通過した後は、もとの分岐のルートで進みます。 ここでは、条件分岐の設定方法について説明します。ユニットを配置、クリックして、右側に表示される詳細設定で条件を設定します。 1分岐追加分岐3、分岐4など、分岐を追加します。2分岐申請書の項目と等号・不等号記号を選択して、分岐の条件を設定します。条件の設定は、追加した分岐すべてに行います。また、申請時にすべての分岐条件に合致しなかった場合は、一番左に設定した分岐で処理が進みます。［＜＞］は「以外」を示しています。次の画像のように設定すると、申請日がR7年4月1日以外が条件となります。条件を追加する場合は、［+］をクリックし、［AND］［OR］どちらかを選択し、追加の条件を入力します。AND：設定した条件すべてを満たす場合OR：設定した条件いずれかを満たす場合 条件分岐の設定例設定例１仮払金額が5,000円未満の場合は弥勒花子さん、5,000円以上の場合は所属部門の部門長が承認する場合を例に設定方法を説明します。 条件分岐［IF］を配置後、承認者のユニットを分岐1と分岐2に配置します。今回の例では、次のように設定します。分岐1：［承認者（社員）］を配置し、処理者の［コード指定］で弥勒花子を設定分岐2：［承認者（部門）］配置し、処理者の［階層指定］の［階層］で0を選択し［依頼先］で［部門長］に✔ 条件分岐［IF］をクリックし、分岐1と分岐2の詳細設定で分岐の条件を設定します。今回の例では、次のように設定します。分岐1：仮払金額 ＜  5,000分岐2：仮払金額  ＞＝5,000 設定例２仮払金額が5,000円以上の場合のみ所属部門の部門長が承認するようにするには、分岐2に［承認者（部門）］配置し、処理者の［階層指定］の［階層］で0を選択し［依頼先］で［部門長］に✔をつけます。   すべての条件に合致しない場合・合致する場合の承認ルート申請内容が設定した条件にいずれも合致しない、または合致する場合は、左側に設置したルートで進みます。(例)10万円以上の申請を課長（弥勒花子）、50万円以上の申請を部門長が承認、10万円未満はそのまま最終承認に進む場合次のような設定をしたとき、［分岐1］の条件設定：仮払金額 ＞100,000 ［分岐2］の条件設定：仮払金額 ＞500,000仮払金額を1万円で申請した場合は、分岐1と2両方に合致しないため、［分岐1］のルートで進みます。仮払金額を60万円で申請した場合は、分岐1と2両方に合致するため、［分岐1］のルートで進みます。今回の例のような条件を設定する場合は、３つ分岐を設定し、一番左のルートにはユニットを配置せず、分岐の条件を次のように設定します。［分岐1］の条件設定：仮払金額 ＞= 100,000   and 仮払金＜500,000［分岐2］の条件設定：仮払金額 ＞= 500,000 並列処理を設定する並列処理は、合議承認・並列承認を行う場合に使用します。合議承認とは、並列設定した複数の承認者の全員が承認すると、次の承認に進める承認機能です。並列承認とは、並列設定した複数の承認者のうち、誰かがが承認すると、次の承認に進める承認機能です。その場合、並列処理に設定した他の処理者は処理できなくなります。また、処理依頼された際は、並列処理者に設定された社員全員に処理依頼が行われます。 ここでは、合議承認・並列承認の設定方法について説明します。 ［合議承認］画面［並列承認］画面 分岐追加分岐3、分岐4など、分岐を追加します。分岐を追加した後は必ずユニットを配置します。。分岐追加追加した分岐が表示されます。をクリックすると、分岐を削除できます。 並列処理の設定例弥勒花子さんとみろく一花さんの両方に処理依頼をし、2名とも承認したら処理を完了とする場合（合議承認）を例に説明します。設定方法は、並列承認も同様です。 合議承認［AND］を配置後、承認者のユニットを分岐1と分岐2に配置します。今回の例では、次のように設定します。分岐1：［承認者（社員）］を配置し、処理者の［コード指定］で弥勒花子を設定分岐2：［承認者（社員）］配置し、処理者の［コード指定］でみろく一花を設定 その他業務を設定する［その他業務］のユニットは、申請・承認・確認以外の処理を承認ルートに配置する場合に使用します。ここでは、［その他業務］のユニットの設定方法について説明します。部門長の承認後に、みろく一花さんが申請書を出力して経理部に提出する場合を例に説明します。 ［承認者（部門）］のユニットを配置・設定後、［その他業務］のユニットを配置します。今回の例では、［その他業務］の詳細設定を次のように設定します。その他業務設定：作業の内容（申請書を出力し、経理部に提出）を入力処理者設定：［処理者］を［社員］［コード指定］にし、みろく一花を設定この承認ルートを使用して申請し、部門長が承認すると、申請データはみろく一花さんの『承認依頼一覧』の［承認依頼］タブに表示されます。みろく一花さんは、申請データを開いて［業務内容確認］で作業内容を確認します。作業後、［作業完了］をクリックします。</div></div><div id="WFL10027"><div class="search_breadcrumbs">導入処理 &gt; 承認ルート管理 &gt; 承認ルートを登録する &gt; 承認ルートを検証する</div><div class="search_title">承認ルートを検証する</div><div class="displayText">承認ルートを検証する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］CSVファイルを出力し、承認ルートに不備がないかを確認します。CSVファイルには、登録した承認ルー ...</div><div class="search_word">承認ルートを検証する　［設定］＞［導入処理］＞［ワークフロー］＞［承認ルート登録］CSVファイルを出力し、承認ルートに不備がないかを確認します。CSVファイルには、登録した承認ルートを使用したときの申請や承認の結果が出力されます。 ①　［…］から［ルート検証］をクリックします。②　各項目で検証する内容を設定し、［検証開始］をクリックします。たとえば、ミロク太郎さんが2025年4月1日に［出張申請書］を使用したときの承認ルートに不備がないかを検証する場合は、次のように設定します。［出張申請書］と［出張申請書］を含む申請書・伝票グループの承認ルートに対して検証が行われます。③　［ファイル名］を任意で修正し、［出力］をクリックします。CSVファイルが出力されます。④　をクリックし、出力したCSVファイルをクリックして開きます。CSVファイルの項目内容 項目名内容申請者［承認ルート検証］画面で選択した申請者が表示されます。申請部門［申請者］の所属部門が表示されます。処理名称［承認ルート検証］画面で選択した申請書・伝票が表示されます。ルート名称選択した申請日と申請者、申請書・伝票に対して使用できる承認ルートが表示されます。ユニット種類承認ルートに設定されているユニットが表示されます。ユニット 位置（行）ユニット 位置（列）承認ルート上でユニットがどこに配置されているかの位置が表示されます。承認ルートの段階が行、分岐が列で表示されます。処理者ユニットに設定した処理者の内容が表示されます。結果申請者が申請日に申請書・伝票を使用して申請できるかの結果が表示されます。結果詳細［結果］がNGだった場合はその理由などが表示されます。処理者可能者処理可能な社員が表示されます。部門承認など、処理できる社員が複数いる場合は、いずれか１人が『所属人員登録』の［部門長区分］が部門長＞部門承認者＞一般社員の優先順位で表示されます。処理部門［処理可能者］の所属部門が表示されます。入力者査印［ユニット種類］が申請者の場合、［入力者査印欄］で設定した番号が表示されます。申請者査印［ユニット種類］が申請者の場合、［申請者査印欄］で設定した番号が表示されます。処理者査印［ユニット種類］が処理者の場合、［査印欄］で設定した番号が表示されます。 ［結果］欄に「OK」と表示されていれば、申請者が申請日に該当の申請書を使用して申請可能であることを示します。「NG」の場合は［結果詳細］欄に理由が表示されるので、確認し、修正を行います。</div></div><div id="WFL10029"><div class="search_breadcrumbs">導入処理 &gt; システム管理 &gt; 申請・承認時の基本機能を設定する</div><div class="search_title">申請・承認時の基本機能を設定する</div><div class="displayText">申請・承認時の基本機能を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［基本情報設定］申請・承認時に使用する機能を設定します。申請書関連承認者による修正承認者による申請書・伝 ...</div><div class="search_word">申請・承認時の基本機能を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［基本情報設定］申請・承認時に使用する機能を設定します。申請書関連承認者による修正承認者による申請書・伝票の修正可否を設定します。［修正可］申請書・伝票のすべての項目が修正できます。［修正不可］修正はできません。［修正可］［修正可（制限あり）］にした場合は、承認者に対して修正の権限を割り当てる必要があります。設定は『承認ルート登録』の［ルート情報］タブの［申請書等の修正］で行います。申請書No.付番タイミング申請書No.を付番するタイミングを選択します。［申請・一時保存時］申請または一時保存したタイミングで申請書・伝票No.が付番されます。［申請時］申請したタイミングで申請書・伝票No.が付番されます。ワークフロー関連代行申請代行申請機能を使用する場合は、［使用可］を選択します。代行申請とは、代行者設定により登録された別の社員が、本人の代わりに申請を行うことです。代行者の設定は、『代行者設定』で行います。引上承認・否認引上承認・否認機能を使用する場合は、［使用可］を選択します。引上承認・否認とは、通常のフローの承認者をスキップし、その上位の承認者が承認・否認を行うことです。［使用可］にすると、『承認依頼一覧』に［承認予定］タブが表示され、引き上・げ・差し戻しした申請データが表示されるようになります。申請依頼申請依頼機能を使用する場合は、［使用可］を選択します。申請依頼とは、システム上で社員に申請を依頼する機能です。申請依頼については、次を参照してください。⇒『申請依頼の権限を設定する』参照申請取下申請の取下機能の使用可否を選択します。取下とは承認前の申請データを撤回するプロセスのことです。［使用可］承認が完了（最終承認または否認・取下）していない申請を取下できます。［使用可（制限あり）］承認前の申請のみ、取下できます。［使用不可］取下できません。取戻申請の取戻機能の使用可否を選択します。取戻とは、自身が処理した後に、自身に申請データを戻すプロセスのことです。［使用可］承認が完了（最終承認または否認・取下）していない申請を取戻できます。［使用可（制限あり）］承認前の申請のみ、取戻できます。［使用不可］取戻できません。一括承認一括承認機能を使用する場合は、［使用可］を選択します。一括承認とは、『承認依頼一覧』で複数の申請データを選択して一括で承認・否認・差戻できる機能です。承認時参照者設定参照者設定機能を申請時に加えて承認時にも使用する場合は、［使用可］を選択します。参照者設定とは、承認ルート外の社員が申請内容を参照できる機能です。自己承認申請者が処理者に含まれる承認ルートで申請できないようにする場合は、［使用不可］を選択します。ただし、処理者を「部門」に設定している場合は、処理部門に申請者以外の社員が所属していれば、申請できます。差戻先リスト差戻先として指定できる範囲を選択します。［全処理者］申請者または現在の処理者よりも前の処理者に差戻できます。［申請者］申請者のみに差戻できます。連続承認初期設定申請書・伝票の承認画面で［連続承認］に✔がついた状態とする場合は、［連続承認する］を選択します。［連続承認］に✔がついていると、承認時に画面を閉じずに続けて承認できます。（例）交通費精算書の承認画面連続処理スキップ連続処理スキップ機能を使用する場合は、［使用可］を選択します。連続処理スキップとは、承認ルート上で同じ処理者が続く場合に、処理をスキップする機能です。スキップできる例は次のとおりです。例1:申請者と承認者が同じ場合例2：同一の承認者が続く場合ただし、並列承認を設定した承認ルートでは、並列承認者をスキップできません。未申請一覧での伝票表示『財務大将』で一時保存された伝票の申請データを『ワークフロー』で閲覧できるようにする場合は、［表示する］を選択します。伝票の一時保存の申請データは『申請一覧』の［未申請］タブに表示されます。代行承認者表示代行承認したときに、査印欄に代行者の名前を表示する場合は、［出力する］を選択します。休日カレンダー休日を考慮して承認期限や自動承認などの日数計算をする場合は、［設定］＞［導入処理］＞［会社情報］＞［休日登録］で設定したカレンダーを選択します。たとえば、『承認ルート登録』で「［期限］を3日後」に設定し、「4/11（金）に申請」した場合、申請時の［期限］の初期表示は次のようになります。</div></div><div id="WFL10030"><div class="search_breadcrumbs">導入処理 &gt; システム管理 &gt; 通知機能を設定する</div><div class="search_title">通知機能を設定する</div><div class="displayText">通知機能を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［通知設定］承認を依頼されたときや、代行者に設定されたときなどに送信される通知の設定を行います。送信先や通知のメッセー ...</div><div class="search_word">通知機能を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［通知設定］承認を依頼されたときや、代行者に設定されたときなどに送信される通知の設定を行います。送信先や通知のメッセージが初期設定されているため、必要に応じて修正します。［通知設定］タブで通知方法を設定し、［採用・通知先設定］タブで通知有無や通知先、通知内容を設定します。 ［基本設定］タブ 通知設定通知の送信方法を選択します。現在はメールのみ使用できます。送信先メールアドレス『社員登録』で登録しているメールアドレスのうち、どのメールアドレスを送信先とするかを選択します。メールアドレスの設定内容については、次を参照してください。⇒『社員登録の設定項目について』参照 ［採用・通知先設定］タブ送付される通知の種類が表示されます。通知を行うをクリックすることで、通知有無や通知先、通知内容を設定できます。 通知設定画面 宛先設定通知メールの送信先を選択します。通知を行わない場合は、［採用なし］を選択します。通知によって設定できる送信先が異なります。通知ごとの送信先の説明については、次を参照してください。⇒『通知機能を設定する』参照滞留警告通知日滞留警告通知の場合に設定します。処理依頼日から処理者に滞留警告が通知されるまでの日数を入力します。件名通知メールの件名を入力します。申請者名や申請書・伝票名など、申請データに応じた情報を表示する場合は、［件名に変数を追加］から変数を追加します。表示される内容については、次を参照してください。⇒『変数と表示される内容』参照本文通知メールの本文を入力します。申請者名や申請書・伝票名など、申請データに応じた情報を表示する場合は、［本文に変数を追加］から変数を追加します。表示される内容については、次を参照してください。⇒『変数と表示される内容』参照 変数と表示される内容メールの件名や本文に変数を追加すると、申請データに応じた情報が表示されます。表示される内容は次のとおりです。なお、通知の種類によって設定できる変数は異なります。変数名表示される内容会社コード申請データの会社コード会社名称申請データの会社名決算開始年月日申請データの会社の決算開始年月日処理No.申請データの申請書No.または伝票No.処理名称申請データの申請書名や伝票の名称決裁No.申請データの決裁No.申請部門名称申請者の所属部門の名称申請者名称申請者の氏名申請日時申請が行われた日時処理依頼日時処理依頼された日時期限申請時に入力された承認期限コメント申請・承認時に入力されたコメント処理起動URL申請書入力画面のURL代行依頼者名称『代行者設定』または『代行者設定（管理者）』で設定された代行依頼者の氏名代行依頼対象処理『代行者設定』または『代行者設定（管理者）』で設定された代行処理の名称（代行申請または代行承認）代行処理者名称『代行者設定』または『代行者設定（管理者）』で設定された代行処理者の氏名処理日時通知の対象となる処理が行われた日時（たとえば『処理依頼通知』の場合、処理依頼された日時が表示されます。）代行申請者名称代行申請を行った社員の氏名代理処理者名称代理処理を行った社員の氏名申請依頼者名称申請依頼を行った社員の氏名申請依頼日時申請依頼された日時修正者名称修正を行った社員の氏名ステータス参照依頼されたタイミング（随時または完了時）スキップ日スキップされた日付 通知の種類と設定可能なタイミング通知の種類宛先設定通知のタイミング処理依頼通知［処理者］処理者に通知されます。承認・確認などの処理を依頼されたときに通知されます。代行処理依頼通知［代行処理者］代行処理者に通知されます。［代行処理者＋代行依頼者］代行処理者と代行依頼者に通知されます。代行依頼者に承認・確認などの処理を依頼されたときに通知されます。処理完了通知［申請者］申請者に通知されます。［既処理者］最終承認または否認・取下するまでに処理をした社員全員に通知されます。最終承認・否認・取下がされたきときに通知されます。申請データが最終承認、または否認・取下されたときに通知されます。代行設定通知［代行処理者］代行処理者に設定された社員に通知されます。『代行者設定』で代行処理者に設定・解除されたときに通知されます。代行申請通知［代行依頼者］代行依頼者に通知されます。代行申請者が代行で申請したときに通知されます。代行処理通知［代行依頼者］代行依頼者に通知されます。代行処理者が代行で承認・確認などの処理したときに通知されます。管理者代行者設定通知［代行処理者＋代行依頼者］代行処理者・代行依頼者に設定された社員に通知されます。『代行者設定（管理者）』で代行依頼者または代行処理者に設定・解除されたときに通知されます。代理処理通知［処理者］本来の処理者に通知されます。代理処理者が代理で承認・確認などの処理をしたときに通知されます。申請依頼通知［申請依頼先］依頼先の社員に通知されます。申請依頼されたときに通知されます。申請依頼取下通知［申請依頼先］依頼先の社員に通知されます。申請依頼者によって申請依頼が取下られたときに通知されます。自動処理通知［処理者］自動処理された処理の本来の処理者に通知されます。承認ルートの指定の日数が経過し、自動承認（否認）・自動確認が行われたときに通知されます。修正通知［申請者］申請者に通知されます。［既処理者］修正前のすべての処理者に通知されます。［申請者（表示・入力権限に基づく修正は通知しない）］［表示・入力権限］を設定していない場合に、申請者に通知されます。［既処理者（表示・入力権限に基づく修正は通知しない］［表示・入力権限］を設定していない場合に、修正前のすべての処理者に通知されます。承認者が申請データの内容を修正したときに通知されます。滞留警告通知［処理者］処理者に通知されます。［処理者＋申請者］処理者と申請者に通知されます。処理依頼日から［滞留警告通知日］で設定した日数以内に処理が行われなかった場合に通知されます。期限通知［処理者］処理者に通知されます。［申請者］申請者に通知されます。承認期限を超過したときに通知されます。催促通知［処理者］処理者に通知されます。［処理者＋申請者］処理者と申請者に通知されます。催促通知画面で催促されたときに通知されます。参照依頼通知［参照者（随時）］参照依頼されたタイミングで参照者に通知されます。［参照者（完了時）］最終承認、または否認・取下されたタイミングで参照者に通知されます。参照者となるタイミングで通知されます。タイミングは次のとおりです。申請・承認時に参照者として設定されたととき参照者として設定された承認ルートで申請が行われたときスキップ通知［処理予定者（随時）］スキップされたタイミングで処理者に通知されます。［処理予定者（完了時）］最終承認、または否認・取下されたタイミングで処理者に通知されます。承認・確認などの処理を行う予定の社員の処理がスキップされたときに［宛先設定］で設定したタイミングで通知されます。スキップとは、次の状況のことを指します。後続の承認者の引上処理によって、自身の処理が飛ばされたとき承認ルートの処理者が部門で指定されている処理依頼において、承認可能な他の社員が処理を行ったとき承認ルートの並列ユニット内で、自身が処理者に含まれない経路で処理が進行したとき</div></div><div id="WFL10031"><div class="search_breadcrumbs">導入処理 &gt; システム管理 &gt; 申請の一覧に表示する項目を登録する</div><div class="search_title">申請の一覧に表示する項目を登録する</div><div class="displayText">申請の一覧に表示する項目を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［一覧表示項目共通設定］『申請・承認一覧』の各メニューと『申請書検索（管理者）』『申請書検索（管理部門 ...</div><div class="search_word">申請の一覧に表示する項目を登録する　［設定］＞［導入処理］＞［ワークフロー］＞［一覧表示項目共通設定］『申請・承認一覧』の各メニューと『申請書検索（管理者）』『申請書検索（管理部門）』に表示される列の内容を追加・削除する場合に、列項目の表示設定を行います。表示設定には、管理者が行う『一覧表示項目共通設定』と、社員が行う『一覧表示項目設定』があります。『一覧表示項目共通設定』『一覧表示項目設定』（『申請一覧』などメニューの［…］から［一覧表示項目設定］をクリック）『一覧表示項目共通設定』は、導入時に管理者が初期設定として列項目を定義するための機能です。『一覧表示項目設定』は、社員が初期設定をもとに列項目をカスタマイズする機能です。一度『一覧表示項目設定』で更新した社員のメニューには、『一覧表示項目共通設定』で更新した内容は反映されません。 ここでは、『一覧表示項目共通設定』ついて説明します。 申請の一覧に表示する列項目の表示・非表示を切り替える①　表示設定するメニューのをクリックします。②　［表示項目情報］タブで、表示設定する列項目のをクリックします。各メニューの列項目の説明については、次を参照してください。⇒『申請データの一覧画面について』参照表示されていない申請書・伝票の項目を列に表示することができます。登録方法については、次を参照してください。⇒『申請書・伝票の特定の項目を申請一覧に追加する』参照③　［表示切替］を選択し、［更新］をクリックします。手順①で選択したメニューの列項目に、［表示切替］で設定した内容が反映されます。  申請一覧に表示する列項目の並び順を変更する①　［…］の［表示順変更］をクリックします。②　並び替えをしたい列項目を選択した状態で、移動したい場所にドラッグ＆ドロップします。③　［更新］をクリックします。並び替えした順番で列項目が表示されます。 申請書・伝票の特定の項目を申請一覧に追加する［表示項目情報］タブに表示されている項目以外に、申請書・伝票の項目を列に表示する場合は、［フリー項目情報］タブで列名と申請書・伝票の項目を登録します。申請書の備考欄に入力した内容を『申請一覧』の［申請済］タブに表示する場合を例に手順を説明します。 ①　［申請一覧（申請済）］の［新規フリー項目登録］をクリックします。②　列名称を入力して［更新］をクリックします。③　［フリー項目情報］タブで、備考欄が設定されている申請書・伝票のをクリックします。④　［申請書・伝票項目名称］で申請書・伝票の備考欄の項目名称を選択します。⑤　［更新］をクリックします。『申請一覧』に登録した項目が表示されます。</div></div><div id="WFL10032"><div class="search_breadcrumbs">導入処理 &gt; システム管理 &gt; 申請依頼の権限を設定する</div><div class="search_title">申請依頼の権限を設定する</div><div class="displayText">申請依頼の権限を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［申請依頼権限設定］申請依頼とは、システム上で社員に申請を依頼する機能です。申請依頼は申請書の入力画面から行い、 ...</div><div class="search_word">申請依頼の権限を設定する　［設定］＞［導入処理］＞［ワークフロー］＞［申請依頼権限設定］申請依頼とは、システム上で社員に申請を依頼する機能です。申請依頼は申請書の入力画面から行い、申請依頼を行うと、依頼先の社員の『申請一覧』の［未申請］タブに申請依頼があった申請書が表示されます。依頼先の社員は、［未申請］タブに表示された申請書から申請が可能です。この機能を使用する場合は、あらかじめ『基本情報設定』の［申請依頼］を［使用可］にする必要があります。 ここでは、申請書ごとに申請依頼機能を使用できる社員の権限と依頼先に指定できる社員の範囲を設定します。申請依頼時に依頼先の社員に通知する場合は、あわせて『通知設定』で設定を行います。設定方法については、次を参照してください。⇒『通知機能を設定する』参照 申請依頼の権限を設定する①　［新規権限設定登録］をクリックします。②　各項目を設定します。対象申請書設定適用申請書指定申請依頼機能を使用する申請書を選択します。申請依頼可能部門使用可能者申請依頼ができる権限（『所属人員登録』の部門長区分）を選択します。『所属人員登録』で部門承認者1~5のいずれかで登録していたとしても、『ワークフロー』では、すべて［部門承認者］として扱われます。使用可能部門申請依頼ができる部門を選択します。たとえば、［使用可能者］で［部門長］に✔をつけ、［使用可能部門］で［経理部］を指定した場合、経理部に所属している部門長のみ、申請依頼ができます。依頼先表示範囲依頼先範囲依頼先に指定できる社員の範囲を選択します。［全部門］所属部門に関係なくすべての部門の社員に申請依頼ができます。［自部門内］申請依頼者と同じ部門の社員にのみ申請依頼ができます。たとえば依頼者が経理部に所属している場合、経理部の社員にのみ申請依頼ができます。③　［更新］をクリックします。 申請依頼の権限を与えられた社員は、［申請書入力］で申請依頼ができるようになります。［申請書入力］画面 依頼先の社員は、『申請一覧』の［未申請］タブに依頼された申請書が表示されます。ここから申請が可能です。</div></div></div>');
// ========================================
// グローバル変数定義
// ========================================

// MutationObserver機能用のグローバル変数
var currentSearchValue = ""; // 現在の検索キーワード
var mutationObserver = null; // MutationObserverインスタンス
var debounceTimer = null; // DOM変更用のデバウンスタイマー

// jQueryセレクタキャッシュ
var $cachedElements = {
    iframe: null,
    searchField: null,
    searchResultItemsBlock: null,
    searchResultsEnd: null,
    searchMsg: null,
    searchInput: null
};

// セレクタマップ（キャッシュ機構の効率化）
var selectorMap = {
    iframe: "iframe.topic",
    searchField: ".wSearchField",
    searchResultItemsBlock: ".wSearchResultItemsBlock",
    searchResultsEnd: ".wSearchResultsEnd",
    searchMsg: "#searchMsg",
    searchInput: ".search-input"
};

// HTMLエンティティ復元用の正規表現（効率化のためグローバル定義）
var htmlEntityRegexes = {
    nbsp: /&nbsp;(?=[^<>]*<)/gm,
    gt: /&gt;(?=[^<>]*<)/gm,
    lt: /&lt;(?=[^<>]*<)/gm,
    quot: /&quot;(?=[^<>]*<)/gm,
    amp: /&amp;(?=[^<>]*<)/gm
};

// 文字変換マップ（効率化のため初期化時に正規表現を構築）
var characterMappings = (function () {
    // 文字変換用の配列定義（配列リテラルに変更）
    var wide = ["０", "１", "２", "３", "４", "５", "６", "７", "８", "９", "ａ", "ｂ", "ｃ", "ｄ", "ｅ", "ｆ", "ｇ", "ｈ", "ｉ", "ｊ", "ｋ", "ｌ", "ｍ", "ｎ", "ｏ", "ｐ", "ｑ", "ｒ", "ｓ", "ｔ", "ｕ", "ｖ", "ｗ", "ｘ", "ｙ", "ｚ", "ガ", "ギ", "グ", "ゲ", "ゴ", "ザ", "ジ", "ズ", "ゼ", "ゾ", "ダ", "ヂ", "ヅ", "デ", "ド", "バ", "ビ", "ブ", "ベ", "ボ", "パ", "ピ", "プ", "ペ", "ポ", "。", "「", "」", "、", "ヲ", "ァ", "ィ", "ゥ", "ェ", "ォ", "ャ", "ュ", "ョ", "ッ", "ー", "ア", "イ", "ウ", "エ", "オ", "カ", "キ", "ク", "ケ", "コ", "サ", "シ", "ス", "セ", "ソ", "タ", "チ", "ツ", "テ", "ト", "ナ", "ニ", "ヌ", "ネ", "ノ", "ハ", "ヒ", "フ", "ヘ", "ホ", "マ", "ミ", "ム", "メ", "モ", "ヤ", "ユ", "ヨ", "ラ", "リ", "ル", "レ", "ロ", "ワ", "ン"];
    var narrow = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "ｶﾞ", "ｷﾞ", "ｸﾞ", "ｹﾞ", "ｺﾞ", "ｻﾞ", "ｼﾞ", "ｽﾞ", "ｾﾞ", "ｿﾞ", "ﾀﾞ", "ﾁﾞ", "ﾂﾞ", "ﾃﾞ", "ﾄﾞ", "ﾊﾞ", "ﾋﾞ", "ﾌﾞ", "ﾍﾞ", "ﾎﾞ", "ﾊﾟ", "ﾋﾟ", "ﾌﾟ", "ﾍﾟ", "ﾎﾟ", "｡", "｢", "｣", "､", "ｦ", "ｧ", "ｨ", "ｩ", "ｪ", "ｫ", "ｬ", "ｭ", "ｮ", "ｯ", "ｰ", "ｱ", "ｲ", "ｳ", "ｴ", "ｵ", "ｶ", "ｷ", "ｸ", "ｹ", "ｺ", "ｻ", "ｼ", "ｽ", "ｾ", "ｿ", "ﾀ", "ﾁ", "ﾂ", "ﾃ", "ﾄ", "ﾅ", "ﾆ", "ﾇ", "ﾈ", "ﾉ", "ﾊ", "ﾋ", "ﾌ", "ﾍ", "ﾎ", "ﾏ", "ﾐ", "ﾑ", "ﾒ", "ﾓ", "ﾔ", "ﾕ", "ﾖ", "ﾗ", "ﾘ", "ﾙ", "ﾚ", "ﾛ", "ﾜ", "ﾝ"];
    var highlight = ["(?:０|0)", "(?:１|1)", "(?:２|2)", "(?:３|3)", "(?:４|4)", "(?:５|5)", "(?:６|6)", "(?:７|7)", "(?:８|8)", "(?:９|9)", "(?:ａ|a)", "(?:ｂ|b)", "(?:ｃ|c)", "(?:ｄ|d)", "(?:ｅ|e)", "(?:ｆ|f)", "(?:ｇ|g)", "(?:ｈ|h)", "(?:ｉ|i)", "(?:ｊ|j)", "(?:ｋ|k)", "(?:ｌ|l)", "(?:ｍ|m)", "(?:ｎ|n)", "(?:ｏ|o)", "(?:ｐ|p)", "(?:ｑ|q)", "(?:ｒ|r)", "(?:ｓ|s)", "(?:ｔ|t)", "(?:ｕ|u)", "(?:ｖ|v)", "(?:ｗ|w)", "(?:ｘ|x)", "(?:ｙ|y)", "(?:ｚ|z)", "(?:ガ|ｶﾞ)", "(?:ギ|ｷﾞ)", "(?:グ|ｸﾞ)", "(?:ゲ|ｹﾞ)", "(?:ゴ|ｺﾞ)", "(?:ザ|ｻﾞ)", "(?:ジ|ｼﾞ)", "(?:ズ|ｽﾞ)", "(?:ゼ|ｾﾞ)", "(?:ゾ|ｿﾞ)", "(?:ダ|ﾀﾞ)", "(?:ヂ|ﾁﾞ)", "(?:ヅ|ﾂﾞ)", "(?:デ|ﾃﾞ)", "(?:ド|ﾄﾞ)", "(?:バ|ﾊﾞ)", "(?:ビ|ﾋﾞ)", "(?:ブ|ﾌﾞ)", "(?:ベ|ﾍﾞ)", "(?:ボ|ﾎﾞ)", "(?:パ|ﾊﾟ)", "(?:ピ|ﾋﾟ)", "(?:プ|ﾌﾟ)", "(?:ペ|ﾍﾟ)", "(?:ポ|ﾎﾟ)", "(?:。|｡)", "(?:「|｢)", "(?:」|｣)", "(?:、|､)", "(?:ヲ|ｦ)", "(?:ァ|ｧ)", "(?:ィ|ｨ)", "(?:ゥ|ｩ)", "(?:ェ|ｪ)", "(?:ォ|ｫ)", "(?:ャ|ｬ)", "(?:ュ|ｭ)", "(?:ョ|ｮ)", "(?:ッ|ｯ)", "(?:ー|ｰ)", "(?:ア|ｱ)", "(?:イ|ｲ)", "(?:ウ|ｳ)", "(?:エ|ｴ)", "(?:オ|ｵ)", "(?:カ|ｶ)", "(?:キ|ｷ)", "(?:ク|ｸ)", "(?:ケ|ｹ)", "(?:コ|ｺ)", "(?:サ|ｻ)", "(?:シ|ｼ)", "(?:ス|ｽ)", "(?:セ|ｾ)", "(?:ソ|ｿ)", "(?:タ|ﾀ)", "(?:チ|ﾁ)", "(?:ツ|ﾂ)", "(?:テ|ﾃ)", "(?:ト|ﾄ)", "(?:ナ|ﾅ)", "(?:ニ|ﾆ)", "(?:ヌ|ﾇ)", "(?:ネ|ﾈ)", "(?:ノ|ﾉ)", "(?:ハ|ﾊ)", "(?:ヒ|ﾋ)", "(?:フ|ﾌ)", "(?:ヘ|ﾍ)", "(?:ホ|ﾎ)", "(?:マ|ﾏ)", "(?:ミ|ﾐ)", "(?:ム|ﾑ)", "(?:メ|ﾒ)", "(?:モ|ﾓ)", "(?:ヤ|ﾔ)", "(?:ユ|ﾕ)", "(?:ヨ|ﾖ)", "(?:ラ|ﾗ)", "(?:リ|ﾘ)", "(?:ル|ﾙ)", "(?:レ|ﾚ)", "(?:ロ|ﾛ)", "(?:ワ|ﾜ)", "(?:ン|ﾝ)"];

    // 全角→半角の変換マップを作成
    var wideToNarrowMap = {};
    var narrowToHighlightMap = {};

    for (var i = 0; i < wide.length; i++) {
        wideToNarrowMap[wide[i]] = narrow[i];
        // 半角文字をキーにしてハイライトパターンをマップ
        narrowToHighlightMap[narrow[i]] = highlight[i];
    }

    // 全角文字の正規表現パターンを作成（エスケープ処理を含む）
    var wideCharsPattern = wide.map(function (char) {
        return char.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }).join('|');

    var wideToNarrowRegex = new RegExp(wideCharsPattern, 'g');

    return {
        wideToNarrowMap: wideToNarrowMap,
        narrowToHighlightMap: narrowToHighlightMap,
        wideToNarrowRegex: wideToNarrowRegex,
        // 効率的な変換関数
        convertWideToNarrow: function (text) {
            return text.replace(wideToNarrowRegex, function (match) {
                return wideToNarrowMap[match] || match;
            });
        }
    };
})();

// ========================================
// 基本ユーティリティ関数（依存なし）
// ========================================

// セレクタ用のエスケープ処理
function selectorEscape(val) {
    return val.replace(/[-\/\\^$*+?.()|[\]{}\!]/g, '\\$&');
}

// 文字列を正規化（全角→半角カナ変換、小文字化）
function normalizeForSearch(text) {
    var normalized = text.toLowerCase();
    return characterMappings.convertWideToNarrow(normalized);
}

// HTMLエンティティを復元
function decodeHtmlEntities(html) {
    return html
        .replace(htmlEntityRegexes.nbsp, "　")
        .replace(htmlEntityRegexes.gt, ">")
        .replace(htmlEntityRegexes.lt, "<")
        .replace(htmlEntityRegexes.quot, '"')
        .replace(htmlEntityRegexes.amp, "&");
}

// ========================================
// キャッシュ管理関数
// ========================================

// キャッシュを初期化
function initializeCachedElements() {
    for (var key in selectorMap) {
        if (selectorMap.hasOwnProperty(key)) {
            if (key === 'searchInput') {
                $cachedElements[key] = $(selectorMap[key], document);
            } else {
                $cachedElements[key] = $(selectorMap[key]);
            }
        }
    }
}

// キャッシュされた要素を取得（存在チェック付き）
function getCachedElement(key) {
    if (!$cachedElements[key] || $cachedElements[key].length === 0) {
        // キャッシュが無効な場合は再取得
        if (selectorMap.hasOwnProperty(key)) {
            if (key === 'searchInput') {
                $cachedElements[key] = $(selectorMap[key], document);
            } else {
                $cachedElements[key] = $(selectorMap[key]);
            }
        }
    }
    return $cachedElements[key];
}

// ========================================
// 検索処理関連関数（依存関係順）
// ========================================

// 検索語を正規化してエスケープ
function prepareSearchWords(searchValue) {
    // 全角・半角スペースを統一して連続スペースを1つにまとめる
    var searchWordTmp = searchValue.replace(/[　\s]+/g, " ").trim().toLowerCase();
    searchWordTmp = characterMappings.convertWideToNarrow(searchWordTmp);

    var searchWord = searchWordTmp.split(" ");
    for (var i = 0; i < searchWord.length; i++) {
        searchWord[i] = selectorEscape(searchWord[i].replace(/>/g, "&gt;").replace(/</g, "&lt;"));
    }
    return searchWord;
}

// ハイライト用の正規表現パターンを生成
function createHighlightPattern(searchWords) {
    // 各検索ワードを全角・半角両対応のパターンに変換
    var patterns = searchWords.map(function(word) {
        // 2文字パターンを優先的にマッチさせる正規表現を作成
        var result = '';
        var pos = 0;
        
        while (pos < word.length) {
            var matched = false;
            
            // 2文字の組み合わせを試行
            if (pos + 1 < word.length) {
                var twoChar = word.substring(pos, pos + 2);
                var pattern = characterMappings.narrowToHighlightMap[twoChar];
                if (pattern) {
                    result += pattern;
                    pos += 2;
                    matched = true;
                }
            }
            
            // 1文字で処理
            if (!matched) {
                var char = word.charAt(pos);
                var pattern = characterMappings.narrowToHighlightMap[char];
                result += pattern || char.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                pos++;
            }
        }
        
        return result;
    });
    return patterns.join("|");
}

// iframeのbody要素を取得
function getIframeBody() {
    var $iframe = getCachedElement('iframe');
    if ($iframe.length === 0) return null;
    return $iframe.contents().find("body");
}

// iframeコンテンツにハイライトを適用
function applyHighlight(searchValue) {
    var $body = getIframeBody();
    if (!$body) return;

    var searchWords = prepareSearchWords(searchValue);
    var highlightPattern = createHighlightPattern(searchWords);
    var reg = new RegExp("(" + highlightPattern + ")(?=[^<>]*<)", "gmi");
    var html = $body.html();
    var decodedHtml = decodeHtmlEntities(html);
    var highlightedHtml = decodedHtml.replace(reg, "<font class='keyword' style='color:rgb(0, 0, 0); background-color:rgb(252, 255, 0);'>$1</font>");

    $body.html(highlightedHtml);
}

// キーワードのハイライトを削除
function removeHighlight() {
    var $body = getIframeBody();
    if (!$body) return;

    $body.find(".keyword").each(function () {
        var $this = $(this);
        $this.replaceWith($this.contents());
    });
}

// 検索結果をクリア
function clearSearchResults() {
    var $searchResultItemsBlock = getCachedElement('searchResultItemsBlock');
    var $searchResultsEnd = getCachedElement('searchResultsEnd');
    var $searchMsg = getCachedElement('searchMsg');

    $searchResultItemsBlock.html("");
    $searchResultsEnd.addClass("rh-hide");
    $searchResultsEnd.attr("hidden", "");
    $searchMsg.html("2つ以上の語句を入力して検索する場合は、スペース（空白）で区切ります。");
    removeHighlight();
    currentSearchValue = "";
    disconnectMutationObserver();
}

// ========================================
// MutationObserver関連関数
// ========================================

// キーワード要素のみの追加かどうかを判定
function isOnlyKeywordAddition(mutation) {
    if (mutation.addedNodes.length !== 1) {
        return false;
    }
    
    var node = mutation.addedNodes[0];
    if (node.nodeType !== Node.ELEMENT_NODE) {
        return false;
    }
    
    // 追加されたノードがキーワード要素か、キーワード要素を含むか
    return (node.classList && node.classList.contains('keyword')) ||
           (node.querySelector && node.querySelector('.keyword') !== null);
}

// デバウンスされた再ハイライト処理
function debouncedReHighlight() {
    if (debounceTimer) {
        clearTimeout(debounceTimer);
    }

    debounceTimer = setTimeout(function () {
        reHighlightAfterDomChange();
    }, 500);
}

// DOM変更後の再ハイライト処理
function reHighlightAfterDomChange() {
    if (!currentSearchValue || currentSearchValue.trim() === "") {
        return;
    }

    try {
        disconnectMutationObserver();
        removeHighlight();
        applyHighlight(currentSearchValue);

        setTimeout(function () {
            setupMutationObserver();
        }, 100);

        console.debug("DOM変更後に検索語を再ハイライトしました");
    } catch (error) {
        console.warn("DOM変更後の再ハイライトに失敗しました:", error);
        setupMutationObserver();
    }
}

// iframeコンテンツ用のMutationObserverをセットアップ
function setupMutationObserver() {
    disconnectMutationObserver();

    try {
        var $iframe = getCachedElement('iframe');
        if ($iframe.length === 0) return;

        var iframeDocument = $iframe[0].contentDocument || $iframe[0].contentWindow.document;
        if (!iframeDocument || !iframeDocument.body) return;

        mutationObserver = new MutationObserver(function (mutations) {
            if (!currentSearchValue || currentSearchValue.trim() === "") {
                return;
            }

            var shouldReHighlight = mutations.some(function(mutation) {
                if (mutation.type === 'characterData') {
                    return true;
                }
                
                if (mutation.type === 'childList') {
                    // キーワード要素自身の追加は無視
                    if (isOnlyKeywordAddition(mutation)) {
                        return false;
                    }
                    
                    // ノードの追加または削除があれば再ハイライト
                    return mutation.addedNodes.length > 0 || mutation.removedNodes.length > 0;
                }
                
                return false;
            });

            if (shouldReHighlight) {
                debouncedReHighlight();
            }
        });

        mutationObserver.observe(iframeDocument.body, {
            childList: true,
            subtree: true,
            characterData: true,
            attributes: false
        });

        console.debug("iframeコンテンツ用のMutationObserverをセットアップしました");
    } catch (error) {
        console.warn("MutationObserverのセットアップに失敗しました:", error);
    }
}

// MutationObserverを切断
function disconnectMutationObserver() {
    if (mutationObserver) {
        mutationObserver.disconnect();
        mutationObserver = null;
    }

    if (debounceTimer) {
        clearTimeout(debounceTimer);
        debounceTimer = null;
    }
}

// ========================================
// jQueryカスタムセレクタ
// ========================================

// カスタムの:contains()セレクタ（正規化された検索用）
$.expr[':'].containsNormalized = function (elem, index, match) {
    var normalizedElemText = normalizeForSearch($(elem).text());
    var normalizedSearchText = normalizeForSearch(match[3]);
    return normalizedElemText.indexOf(normalizedSearchText) >= 0;
};

// ========================================
// jQueryイベントハンドラー
// ========================================

$(function () {
    // 要素のキャッシュを初期化
    initializeCachedElements();

    $(document).on("click", "ul.toc li.book", function () {
        if ($(this).children("a[href='#'],a[href='javascript:void 0;']").length == 0) {
            $(this).children("a").each(function () {
                location.href = location.href.replace(location.hash, "") + "#t=" + $(this).attr("href");
            });
        }
    });

    getCachedElement('searchField').each(function () {
        $(this).off();
    });

    $(document).on("keyup", ".wSearchField", function () {
        var $searchResultItemsBlock = getCachedElement('searchResultItemsBlock');
        var $searchResultsEnd = getCachedElement('searchResultsEnd');
        var $searchMsg = getCachedElement('searchMsg');
        var searchValue = $(this).val();

        // trim()を追加してスペースのみの入力も空として扱う
        if (searchValue.trim() === "") {
            clearSearchResults();
            return;
        }

        $searchMsg.html("");
        currentSearchValue = searchValue; // 現在の検索値を保存
        
        // スペースを正規化
        var searchWordTmp = searchValue.replace(/[　\s]+/g, " ").trim();
        // 正規化（全角→半角カナ、小文字化）
        searchWordTmp = normalizeForSearch(searchWordTmp);

        // 正規化後も空文字列チェックを追加
        if (searchWordTmp === "") {
            clearSearchResults();
            return;
        }

        var searchWord = searchWordTmp.split(" ");
        var searchQuery = searchWord.map(function(word) {
            return ":containsNormalized(" + word + ")";
        }).join("");

        var findItems = searchWords.find(".search_word" + searchQuery);
        if (findItems.length !== 0) {
            $searchResultsEnd.removeClass("rh-hide");
            $searchResultsEnd.removeAttr("hidden");
            $searchResultItemsBlock.html("");
            findItems.each(function () {
                var displayText = $(this).parent().find(".displayText").text();
                var parentId = $(this).parent().attr("id");
                var searchTitle = $(this).parent().find(".search_title").html();
                
                var resultHtml = "<div class='wSearchResultItem'>" +
                    "<a class='nolink' href='./" + parentId + ".html'>" +
                    "<div class='wSearchResultTitle'>" + searchTitle + "</div>" +
                    "</a>" +
                    "<div class='wSearchContent'>" +
                    "<span class='wSearchContext'>" + displayText + "</span>" +
                    "</div></div>";
                
                $searchResultItemsBlock.append($(resultHtml));
            });
            removeHighlight();
            applyHighlight(currentSearchValue);
        }
        else {
            removeHighlight();
            $searchResultsEnd.addClass("rh-hide");
            $searchResultsEnd.attr("hidden", "");
            $searchResultItemsBlock.html("");
            var displayText = "検索条件に一致するトピックはありません。";
            $searchResultItemsBlock.append($("<div class='wSearchResultItem'><div class='wSearchContent'><span class='wSearchContext'>" + displayText + "</span></div></div>"));
        }
    });

    getCachedElement('iframe').on("load", function () {
        var $searchInput = getCachedElement('searchInput');
        var $searchField = getCachedElement('searchField');

        if ($searchInput.is(":not(.rh-hide)") && ($searchField.val() != "")) {
            var searchValue = $searchField.val();
            currentSearchValue = searchValue; // 現在の検索値を保存
            applyHighlight(searchValue);
        }

        // iframeコンテンツ変更用のMutationObserverをセットアップ
        setupMutationObserver();
    });
});
