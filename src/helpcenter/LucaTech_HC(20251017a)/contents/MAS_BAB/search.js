var searchWords = $('<div class="search"><div id="MAS13001"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 　はじめに</div></div><div id="MAS13003"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 残高登録の概要</div><div class="search_title">残高登録の概要</div><div class="displayText">残高登録の概要『LucaTech GX』導入時に、会社の残高を登録します。『LucaTech GX』には次の３つの残高登録のメニューがあります。各メニュー、部門ごとに残高の登録が可 ...</div><div class="search_word">残高登録の概要『lucatech gx』導入時に､会社の残高を登録します｡『lucatech gx』には次の3つの残高登録のﾒﾆｭｰがあります｡各ﾒﾆｭｰ､部門ごとに残高の登録が可能です｡ 残高登録のﾒﾆｭｰ説明勘定科目残高登録会社全体の残高を科目・科目別補助ごとに登録するﾒﾆｭｰです｡ｼｽﾃﾑ導入時に必ず登録します｡⇒『1.2科目の残高を登録する』参照摘要残高登録科目のほかに､固定摘要で残高を管理する場合に登録するﾒﾆｭｰです｡たとえば､交際費を｢会食向けの交際費｣｢贈答向けの交際費｣といった内訳で残高を管理する場合に使用します｡⇒『1.3摘要の残高を登録』参照共通補助残高登録科目のほかに､取引先や銀行などの共通補助で残高を管理する場合に登録するﾒﾆｭｰです｡たとえば､売掛金を｢a社｣｢b社｣といった取引先別などで残高を管理する場合に使用します｡⇒『1.4共通補助の残高を登録』参照 残高登録の登録ｲﾒｰｼﾞ</div></div><div id="MAS13004"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 科目の残高を登録する</div><div class="search_title">科目の残高を登録する</div><div class="displayText">科目の残高を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］『LucaTech GX』の導入時に、科目・科目別補助ごとに残高を登録します。ここでは、残高を手入力する方法 ...</div><div class="search_word">科目の残高を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］『lucatech gx』の導入時に､科目・科目別補助ごとに残高を登録します｡ここでは､残高を手入力する方法について説明します｡残高を一括で登録する場合は､［ﾃﾞｰﾀ関係処理］＞［ﾃﾞｰﾀ交換］＞［ｲﾝﾎﾟｰﾄ］で行います｡ｲﾝﾎﾟｰﾄの方法については､次を参照してください｡⇒『ﾃﾞｰﾀ交換 1.2 ﾃﾞｰﾀ交換の流れ』参照どの時点の残高を登録するかによって､登録する残高の種類が異なります｡登録する残高の種類説明期首残高期首の残高を登録します｡『lucatech gx』に残高を登録する場合は､必ず期首残高を登録します｡⇒『1.2.1期首残高を登録する』参照経過月発生残高期中から『lucatech   gx』を導入した場合に､期首から仕訳入力を開始する月までの実績を登録します｡⇒『1.2.2経過月発生高を登録する』参照過年度残高過去の期首残高と実績を登録します｡最大4年分の実績を登録できます｡⇒『1.2.3過年度の実績金額を登録する』参照 たとえば､2025年7月に他ｼｽﾃﾑから『lucatech gx』にﾃﾞｰﾀを移行するときは､次のような期首残高や実績を登録します｡『lucatech gx』運用後は､『決算更新』を行うことで過年度分の残高が自動的に更新されるため､『残高登録』を行う必要はありません｡ 期首残高を登録した後の推移は､『仕訳参照』で確認できます｡ 勘定科目残高の画面説明［入力区分：過年度実績の場合］ 1［…］［一括削除］登録した残高を一括削除します｡科目を範囲指定して削除できます｡⇒『1.2.1.2登録した残高を削除する』参照2出力条件設定ｴﾘｱ登録する残高の条件を指定します｡3残高表示ｴﾘｱ入力した残高の借方・貸方の合計金額や貸借差額が表示されます｡［合計ｾｯﾄ］部門､または科目別補助ごとに残高を登録した場合に､個別に登録した残高を全体の科目の残高に反映させます｡⇒『1.2.1.1合計ｾｯﾄを行う』参照4残高登録ｴﾘｱ科目・科目補助の残高を入力します｡［出力順序］『科目出力順序』で登録したﾊﾟﾀｰﾝで科目の並び順を変更できます｡5すべて閉じるすべて展開科目別補助の予算入力欄の表示有無を切り替えることができます｡6＞＞＞画面に表示されていない右側にも入力欄があることを示しています｡</div></div><div id="MAS13005"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 科目の残高を登録する &gt; 期首残高を登録する</div><div class="search_title">期首残高を登録する</div><div class="displayText">期首残高を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］＞［入力区分：期首残高］期首の残高を登録します。『LucaTech GX』に残高を登録する場合は、必ず登録しま ...</div><div class="search_word">期首残高を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］＞［入力区分：期首残高］期首の残高を登録します｡『lucatech gx』に残高を登録する場合は､必ず登録します｡勘定科目残高で共通する項目の説明については､次を参照してください｡⇒『勘定科目残高の画面説明』参照  期首残高を登録する①　残高を登録する条件を指定します｡ 入力区分［期首残高］を選択します｡種類会社全体で管理する科目の残高を登録する場合は［全社］を選択します｡部門ごとに管理する科目の残高を登録する場合は［部門］を選択し､から部門を選択します｡②　［条件で出力］をｸﾘｯｸします｡③　科目・科目別補助ごとに残高を入力します｡ﾏｲﾅｽ金額を入力する場合は､｢－｣を入力します｡ただし､貸倒引当金､減価償却累計額などの減算する科目はﾏｲﾅｽ金額にする必要はありません｡▶がついた科目をｸﾘｯｸすると､右側に科目別補助が表示され､科目別補助の残高を入力できます｡前期末の繰越利益剰余金は､当期首の期首繰越利益剰余金に入力します｡④　［更新］をｸﾘｯｸします｡⑤　他の部門の残高を登録する場合は［種類］で部門を選択し､手順①～手順④までを繰り返します｡⑥　科目別補助､部門ごとに残高を登録した場合は､［合計ｾｯﾄ］をｸﾘｯｸして､個々に登録した残高を全体の科目の残高に反映させます｡［合計ｾｯﾄ］については､次を参照してください｡⇒『1.2.1.1合計ｾｯﾄを行う』参照⑦　すべての残高の登録が完了した後は､［種類］で［全社］を選択して､総合計の貸借差額が｢0｣になっていることを確認します｡   総合計の貸借差額が発生している場合総合計の貸借差額が｢0｣になっていない場合､その差額が｢繰越利益剰余金｣として処理され､財務報告書などの帳票の｢繰越利益剰余金｣に正しい金額が表示されません｡  合計ｾｯﾄを行う科目別補助や部門ごとに残高を登録しただけでは､会社全体の科目残高には反映されません｡登録した残高を会社全体の科目残高に反映させるには､合計ｾｯﾄを行う必要があります｡ 合計ｾｯﾄのｲﾒｰｼﾞ（部門ごとに登録した場合） 基本的な合計ｾｯﾄ：科目別補助などの内訳を集計して全社の科目に残高をｾｯﾄします｡ 『勘定科目残高』で部門と科目別補助の両方を登録している場合の合計ｾｯﾄ：最初に各科目別補助の残高を集計して､部門の合計を求めます｡次に､部門を集計して全社の科目に残高をｾｯﾄします｡『共通補助残高』で部門ごとに残高を登録している場合の合計ｾｯﾄ：最初に『共通補助残高』で共通補助の残高を集計して部門の合計を求めます｡次に『勘定科目残高』で部門を集計して全社の科目に残高をｾｯﾄします｡ 合計ｾｯﾄを行う①　残高登録画面で集計先を選択し､［条件で出力］をｸﾘｯｸします｡［全社］会社全体の科目に対して部門・科目別補助の合計ｾｯﾄを行う場合に選択します｡［部門］特定の部門の科目に対して科目別補助の合計ｾｯﾄを行う場合に選択します｡②　［合計ｾｯﾄ］をｸﾘｯｸします｡［合計ｾｯﾄ］画面が別ｳｨﾝﾄﾞｳで開きます｡③　合計ｾｯﾄ行う条件を指定します｡ ｾｯﾄ種類集計対象の内訳を選択します｡ｾｯﾄ範囲特定の科目で表示を絞り込む場合に､開始と終了の科目ｺｰﾄﾞを指定します｡csv出力合計ｾｯﾄを行う科目の一覧をcsvﾌｧｲﾙに出力する場合は､［出力する］を選択します｡④　［条件で出力］をｸﾘｯｸします｡全体の科目の残高と､部門や科目別補助別に登録した残高に差異がある科目は､［ｽﾃｰﾀｽ］欄に［差異あり］が表示されます｡⑤　［差異あり］の科目の［残高（合計前）］と［残高（合計後）］の金額を確認し､［合計ｾｯﾄ反映］をｸﾘｯｸします｡［差異あり］の表示がなくなり､［残高（合計後）］の金額が全体の科目の残高にｾｯﾄされます｡⑥　［合計ｾｯﾄ］画面の［×］をｸﾘｯｸして画面を閉じます｡⑦　残高登録の画面を開き､をｸﾘｯｸします｡補助や部門の残高が科目の残高に反映されます｡  登録した残高を削除する登録した残高を一括で削除します｡   削除の注意点削除したﾃﾞｰﾀは元に戻すことはできません｡ ［…］から［一括削除］をｸﾘｯｸします｡ 一括削除の画面が開きます｡削除する残高の条件を指定して［削除］をｸﾘｯｸします｡ 入力区分削除する残高の種類を選択します｡年度区分［入力区分］で［過年度実績］を選択した場合に､削除する残高の年を選択します｡種類削除する種類を選択します｡［全社］全体科目の残高を削除する場合に選択します｡［部門］特定の部門の残高を削除する場合に選択します｡部門［種類］で部門を選択した場合に､削除する部門の範囲を指定します｡翌期以降の残高登録において､期首残高を部門配賦前の金額で開始したい場合に､［配賦金額のみ削除］を［適用する］にします｡科目削除する科目の範囲を指定します｡指定した科目に対して､科目別補助のみ削除する場合は､［科目別補助のみ削除］を［適用する］にします｡対象月［入力区分］で［経過月発生残高］［過年度実績］を選択した場合に､削除したい月の範囲を指定します｡</div></div><div id="MAS13008"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 科目の残高を登録する &gt; 経過月発生高を登録する</div><div class="search_title">経過月発生高を登録する</div><div class="displayText">経過月発生高を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］＞［入力区分：経過月発生高］期中に『LucaTech GX』を導入した場合に、期首から仕訳入力開始月までの ...</div><div class="search_word">経過月発生高を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］＞［入力区分：経過月発生高］期中に『lucatech gx』を導入した場合に､期首から仕訳入力開始月までの実績（経過月発生高）を登録します｡勘定科目残高で共通する項目の説明については､次を参照してください｡⇒『勘定科目残高の画面説明』参照  経過月発生高を登録する①　経過月発生高を登録する条件を指定します｡ 入力区分［経過月発生高］を選択します｡種類会社全体の科目の経過月発生高を登録する場合は［全社］を選択します｡部門ごとに科目の経過月発生高を登録する場合は［部門］を選択し､から部門を選択します｡月度登録する経過月発生高の月を入力します｡②　［条件で出力］をｸﾘｯｸします｡③　科目・科目別補助ごとに借方・貸方の経過月発生高を入力します｡▶がついた科目をｸﾘｯｸすると､右側に科目別補助が表示され､科目別補助の残高を入力できます｡④　［更新］をｸﾘｯｸします｡⑤　他の部門の残高を登録する場合は［種類］で部門を選択し､手順①～手順④までを繰り返します｡⑥　部門・科目別補助ごとに金額を登録した場合は､［合計ｾｯﾄ］をｸﾘｯｸして､個々に登録した金額を全体の科目の金額に反映させます｡［合計ｾｯﾄ］については､次を参照してください｡⇒『1.2.1.1合計ｾｯﾄを行う』参照⑦　経過月発生高の登録が完了した後は､［種類］で［全社］を選択して､総合計の貸借差額が｢0｣になっていることを確認します｡   総合計の貸借差額が発生している場合総合計の貸借差額が｢0｣になっていない場合､その差額が｢繰越利益剰余金｣として処理され､財務報告書などの帳票の｢繰越利益剰余金｣に正しい金額が表示されません｡</div></div><div id="MAS13009"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 科目の残高を登録する &gt; 過年度の実績金額を登録する</div><div class="search_title">過年度の実績金額を登録する</div><div class="displayText">過年度の実績金額を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］＞［入力区分：過年度実績］他システムの実績金額を『LucaTech GX』に反映する場合に、過年度の期 ...</div><div class="search_word">過年度の実績金額を登録する　［設定］＞［残高登録］＞［財務］＞［勘定科目残高］＞［入力区分：過年度実績］他ｼｽﾃﾑの実績金額を『lucatech gx』に反映する場合に､過年度の期首残高と実績金額を登録します｡登録できる過年度は､最大4年までです｡勘定科目残高で共通する項目の説明については､次を参照してください｡⇒『勘定科目残高の画面説明』参照  過年度の期首残高と実績金額を登録する①　 過年度の期首残高と実績を登録する条件を指定します｡ 入力区分［過年度実績］を選択します｡年度区分登録する過年度の年を選択します｡種類会社全体の科目の残高を登録する場合は［全社］を選択します｡部門ごとに科目の残高を登録する場合は［部門］を選択し､から部門を選択します｡②　［条件で出力］をｸﾘｯｸします｡③　科目・科目別補助ごとに期首残高と各年月の借方・貸方の実績金額を入力します｡金額を入力して［enter］を押すと､ｶｰｿﾙが右に移動します｡期首残高欄について､ﾏｲﾅｽ金額を入力する場合は､｢－｣を入力します｡ただし､貸倒引当金､減価償却累計額などの減算する科目はﾏｲﾅｽ金額にする必要はありません｡▶がついた科目をｸﾘｯｸすると､科目別補助が表示され､科目別補助の残高を入力できます｡④　［更新］をｸﾘｯｸします｡⑤　他の部門の残高を登録する場合は［種類］で部門を選択し､手順①～手順④までを繰り返します｡⑥　部門・科目別補助ごとに残高を登録した場合は､［合計ｾｯﾄ］をｸﾘｯｸして､個々に登録した残高を全体の科目の残高に反映させます｡［合計ｾｯﾄ］については､次を参照してください｡⇒『1.2.1.1合計ｾｯﾄを行う』参照⑦　残高登録の最後に､［種類］で［全社］を選択して､総合計の貸借差額が｢0｣になっていることを確認します｡</div></div><div id="MAS13010"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 摘要の残高を登録する</div><div class="search_title">摘要の残高を登録する</div><div class="displayText">摘要の残高を登録する　［設定］＞［残高登録］＞［財務］＞［摘要残高］科目の残高登録に加え、『固定摘要』で登録した摘要を用いて残高を管理する場合は、ここで摘要の期首の残高を登録します ...</div><div class="search_word">摘要の残高を登録する　［設定］＞［残高登録］＞［財務］＞［摘要残高］科目の残高登録に加え､『固定摘要』で登録した摘要を用いて残高を管理する場合は､ここで摘要の期首の残高を登録します｡摘要の残高は､科目のほかに科目別補助や銀行などの共通補助に対して登録できます｡ 科目別に摘要残高を登録するｲﾒｰｼﾞ 科目別補助に対して摘要残高を登録するｲﾒｰｼﾞ共通補助（銀行）に対して摘要残高を登録するｲﾒｰｼﾞ 摘要残高を登録した後の推移は､『補助・摘要残高一覧表』や『仕訳参照』＞［参照種別：検証］の［科目別集計］などで確認できます｡ 摘要残高の画面説明 1［…］［一括削除］登録した残高を一括削除します｡科目を範囲指定して削除できます｡⇒『1.2.1.2登録した残高を削除する』参照2出力条件設定ｴﾘｱ登録する残高を条件指定します｡3残高登録ｴﾘｱ入力した残高の借方・貸方の合計金額や貸借差額が表示されます｡［絞り込み］ 科目別補助などと組み合わせて摘要残高を登録する場合､新規に摘要行を追加するときに､固定摘要の検索画面に表示する摘要を絞り込みます｡［新規摘要行追加］ｴﾘｱに表示されていない摘要の残高を登録する場合は､［新規摘要行追加］をｸﾘｯｸして摘要を追加します｡ 摘要の残高を登録する摘要の残高の登録手順について説明します｡科目に対して残高を登録する場合と､科目別補助や汎用補助と組み合わせて残高を登録する場合で方法が異なります｡  摘要の残高を登録する（科目の場合）①　［入力区分］で［科目］を選択します｡②　［条件で出力］をｸﾘｯｸします｡『固定摘要登録』の［科目連想］の［摘要残高］が［管理あり］に設定されている科目とその摘要が表示されます｡③　表示されていない摘要の残高を登録する場合は､［新規摘要行追加］をｸﾘｯｸして科目と摘要を追加します｡④　科目の摘要の残高を入力します｡ﾏｲﾅｽ金額を入力する場合は､［－］を入力します｡残高がない場合は0を入力します｡⑤　［更新］をｸﾘｯｸします｡［新規摘要行追加］で摘要を追加した場合は､『固定摘要登録』の科目連想にその科目が追加され､自動的に［摘要残高］が［管理あり］に設定されます｡［固定摘要登録］画面［摘要残高］が［管理あり］に設定されている科目は､仕訳入力時に摘要の入力が必須になり､残高の推移を管理できるようになります｡  摘要の残高を登録する（科目別補助や汎用補助と組み合わせる場合）科目別補助に対して摘要の残高を登録する場合を例に説明します｡①　 ［入力区分］で［科目別補助］を選択し､［科目］で摘要を設定する科目を選択します｡②　［条件で出力］をｸﾘｯｸします｡③　［新規摘要行追加］をｸﾘｯｸして科目別補助と摘要を追加し､残高を入力します｡ﾏｲﾅｽ金額を入力する場合は､［－］を入力します｡④　［更新］をｸﾘｯｸします｡ここで残高を登録した摘要は､『固定摘要登録』の科目連想にその科目が追加され､自動的に［摘要残高］が［管理なし］に設定されます｡ ［固定摘要登録］画面</div></div><div id="MAS13011"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 共通補助の残高を登録する</div><div class="search_title">共通補助の残高を登録する</div><div class="displayText">共通補助の残高を登録する　［設定］＞［残高登録］＞［財務］＞［共通補助残高］科目の残高登録に加え、取引先や銀行などの共通補助を用いて残高を管理する場合は、ここで共通補助の残高を登録 ...</div><div class="search_word">共通補助の残高を登録する　［設定］＞［残高登録］＞［財務］＞［共通補助残高］科目の残高登録に加え､取引先や銀行などの共通補助を用いて残高を管理する場合は､ここで共通補助の残高を登録します｡たとえば､売掛金を｢a社｣｢b社｣といった取引先別などで残高の推移を確認できます｡共通補助残高を登録した後の推移は､『補助・摘要残高一覧表』や『仕訳参照』の［科目別集計］などで確認できます｡『補助・摘要残高一覧表』 共通補助残高の画面説明［入力区分：過年度実績の場合］ 1［…］［一括削除］登録した残高を一括削除します｡科目を範囲指定して削除できます｡⇒『1.2.1.2登録した残高を削除する』参照2出力条件設定ｴﾘｱ登録する残高を条件指定します｡3残高表示ｴﾘｱ『勘定科目残高』の科目の残高と､登録した共通補助の科目の残高が表示されます｡［合計ｾｯﾄ］部門ごとに残高を登録した場合に､個別に登録した残高を全体の科目の残高に反映させます｡⇒『1.2.1.1合計ｾｯﾄを行う』参照4残高登録ｴﾘｱ共通補助の残高を入力します｡5＞＞＞画面に表示されていない右側にも入力欄があることを示しています｡</div></div><div id="MAS13012"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 共通補助の残高を登録する &gt; 期首残高を登録する（共通補助）</div><div class="search_title">期首残高を登録する（共通補助）</div><div class="displayText">期首残高を登録する（共通補助）　［設定］＞［残高登録］＞［財務］＞［共通補助残高］＞［入力区分：期首残高］共通補助の期首残高を登録します。  共通補助の期首残高を登録する『取引先登 ...</div><div class="search_word">期首残高を登録する（共通補助）　［設定］＞［残高登録］＞［財務］＞［共通補助残高］＞［入力区分：期首残高］共通補助の期首残高を登録します｡  共通補助の期首残高を登録する『取引先登録』のﾏｽﾀｰを使用して売掛金の残高を登録する場合の画面を例に説明します｡①　残高を登録する条件を指定します｡ 補助区分残高を登録する共通補助を選択します｡入力区分［期首残高］を選択します｡種類会社全体で管理する科目の残高を登録する場合は［全社］を選択します｡部門ごとに管理する科目の残高を登録する場合は［部門］を選択し､から部門を選択します｡科目残高を登録する科目を選択します｡②　［条件で出力］をｸﾘｯｸします｡③　共通補助ごとに残高を入力します｡ﾏｲﾅｽ金額を入力する場合は､｢－｣を入力します｡『勘定科目残高』で登録した科目の残高が表示されるので､一致するように共通補助の残高を入力します｡④　［更新］をｸﾘｯｸします｡⑤　共通補助ごとに登録した科目の残高が表示されるので､［科目残高］と同じ金額になっていることを確認します｡⑥　他の部門の残高を登録する場合は［種類］で部門を選択し､手順①～手順⑤までを繰り返します｡⑦　部門ごとに残高を登録した場合は､全社の状態で［合計ｾｯﾄ］をｸﾘｯｸして､個々に登録した残高を共通補助の科目全体の残高に反映させます｡［合計ｾｯﾄ］については､次を参照してください｡⇒『1.2.1.1合計ｾｯﾄを行う』参照</div></div><div id="MAS13013"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 共通補助の残高を登録する &gt; 経過月発生高を登録する（共通補助）</div><div class="search_title">経過月発生高を登録する（共通補助）</div><div class="displayText">経過月発生高を登録する（共通補助）　［設定］＞［残高登録］＞［財務］＞［共通補助残高］＞［入力区分：経過月発生高］期中に『LucaTech GX』を導入した場合に、期首から仕訳入力 ...</div><div class="search_word">経過月発生高を登録する（共通補助）　［設定］＞［残高登録］＞［財務］＞［共通補助残高］＞［入力区分：経過月発生高］期中に『lucatech gx』を導入した場合に､期首から仕訳入力開始月までの共通補助の実績（経過月発生高）を登録します｡共通補助残高で共通する項目の説明については､次を参照してください｡⇒『共通補助残高の画面説明』参照  共通補助の経過月発生高を登録する『取引先登録』のﾏｽﾀｰを使用して売掛金の経過月発生高を登録する場合の画面を例に説明します｡①　経過月発生高を登録する条件を指定します｡ 補助区分残高を登録する共通補助を選択します｡入力区分［経過月発生高］を選択します｡種類会社全体の科目の経過月発生高を登録する場合は［全社］を選択します｡部門ごとに科目の経過月発生高を登録する場合は［部門］を選択し､から部門を選択します｡科目登録する科目を選択します｡月度登録する経過月発生高の月を入力します｡②　［条件で出力］をｸﾘｯｸします｡③　共通補助ごとに借方・貸方の経過月発生高を入力します｡『勘定科目残高』の［経過月発生高］で登録した科目の経過月発生高が表示されるので､一致するように共通補助の実績金額を入力します｡④　［更新］をｸﾘｯｸします｡⑤　共通補助ごとに登録した科目の金額が表示されるので､［科目ﾊﾞﾗﾝｽ］と同じ金額になっていることを確認します｡⑥　他の部門の経過月発生高を登録する場合は［種類］で部門を選択し､手順①～手順⑤までを繰り返します｡⑦　部門ごとに経過月発生高を登録した場合は､［合計ｾｯﾄ］をｸﾘｯｸして､個々に登録した金額を共通補助全体の科目の金額に反映させます｡［合計ｾｯﾄ］については､次を参照してください｡⇒『1.2.1.1合計ｾｯﾄを行う』参照</div></div><div id="MAS13014"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 残高登録 &gt; 共通補助の残高を登録する &gt; 過年度実績を登録する（共通補助）</div><div class="search_title">過年度実績を登録する（共通補助）</div><div class="displayText">過年度実績を登録する（共通補助）　［設定］＞［残高登録］＞［財務］＞［共通補助残高］＞［入力区分：過年度実績］他システムの共通補助の実績金額を『LucaTech GX』に反映する場 ...</div><div class="search_word">過年度実績を登録する（共通補助）　［設定］＞［残高登録］＞［財務］＞［共通補助残高］＞［入力区分：過年度実績］他ｼｽﾃﾑの共通補助の実績金額を『lucatech gx』に反映する場合に､過年度の期首残高と実績金額を登録します｡登録できる過年度は､最大4年までです｡共通補助残高で共通する項目の説明については､次を参照してください｡⇒『共通補助残高の画面説明』参照  共通補助の過年度の期首残高と実績金額を登録する『取引先登録』のﾏｽﾀｰを使用して売掛金の期首残高と実績を登録する場合の画面を例に説明します｡①　 過年度の期首残高と実績を入力する条件を指定します｡ 補助区分登録する共通補助を選択します｡入力区分［過年度実績］を選択します｡年度区分登録する過年度の年を選択します｡種類会社全体の科目の残高を登録する場合は［全社］を選択します｡部門ごとに科目の残高を登録する場合は［部門］を選択し､から部門を選択します｡科目残高を登録する科目を選択します｡②　［条件で出力］をｸﾘｯｸします｡③　共通補助ごとに期首残高と各年月の借方・貸方の実績金額を入力します｡金額を入力して［enter］を押すと､ｶｰｿﾙが右に移動します｡期首残高欄について､ﾏｲﾅｽ金額を入力する場合は､｢－｣を入力します｡ただし､貸倒引当金､減価償却累計額などの減算する科目はﾏｲﾅｽ金額にする必要はありません｡④　［更新］をｸﾘｯｸします｡⑤　他の部門の残高を登録する場合は［種類］で部門を選択し､手順①～手順④までを繰り返します｡⑥　部門ごとに残高を登録した場合は､［合計ｾｯﾄ］をｸﾘｯｸして､個々に登録した残高を共通補助全体の科目の残高に反映させます｡［合計ｾｯﾄ］については､次を参照してください｡⇒『1.2.1.1合計ｾｯﾄを行う』参照</div></div><div id="MAS13016"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 予算登録の概要</div><div class="search_title">予算登録の概要</div><div class="displayText">予算登録の概要『LucaTech GX』では、次の予算登録のメニューがあります。各メニュー、部門ごとに複数の予算の登録が可能です。予算登録を行うには、あらかじめ［設定］＞［導入処理 ...</div><div class="search_word">予算登録の概要『lucatech gx』では､次の予算登録のﾒﾆｭｰがあります｡各ﾒﾆｭｰ､部門ごとに複数の予算の登録が可能です｡予算登録を行うには､あらかじめ［設定］＞［導入処理］＞［会社情報］＞［ﾏｽﾀｰ採用情報登録］で予算登録を行うﾏｽﾀｰに対して［予算採用］を設定する必要があります｡ 予算登録のﾒﾆｭｰ説明勘定科目予算登録会社全体の予算を科目・科目別補助ごとに登録するﾒﾆｭｰです｡⇒『2.2科目の予算を登録する』参照共通補助予算登録科目のほかに､取引先や銀行などの共通補助で予算を管理する場合に登録するﾒﾆｭｰです｡たとえば､売掛金を｢a社｣｢b社｣といった取引先別などで予算を管理する場合に使用します｡⇒『2.3共通補助の予算を登録する』参照 予算登録では､当期予算と来期予算の2つの年度を登録できます｡ 登録した当期予算と来期予算は､『決算更新』の実行時に次期会社ﾃﾞｰﾀへ移送されます｡『決算更新』については､次を参照してください｡⇒『会社ﾃﾞｰﾀ管理　1.2 決算を更新する』参照   『ﾏｽﾀｰ更新』で来期予算の配賦を行っている場合『ﾏｽﾀｰ更新』の［予算配賦更新条件］で［来期の予算配賦は通期で更新する］に✔をつけると､『部門配賦情報』の内容で配賦された金額が来期予算に表示されます｡</div></div><div id="MAS13017"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 科目の予算を登録する</div><div class="search_title">科目の予算を登録する</div><div class="displayText">科目の予算を登録する　［設定］＞［予算登録］＞［財務］＞［勘定科目予算登録］科目・科目別補助ごとに予算を登録します。予算の登録は次の方法があります。 月ごとに予算を入力して登録しま ...</div><div class="search_word">科目の予算を登録する　［設定］＞［予算登録］＞［財務］＞［勘定科目予算登録］科目・科目別補助ごとに予算を登録します｡予算の登録は次の方法があります｡ 月ごとに予算を入力して登録します｡⇒『2.2.1月ごとに予算を登録する』参照配賦基準を登録し､配賦基準で年間予算を月別・部門別に自動配賦します｡⇒『2.2.2年間の予算を月別・部門別に配賦して予算を登録する』参照非会計科目を計算式に使用して予算を登録します｡⇒『2.2.3非会計科目を使用して部門の予算を登録する』参照excelﾌｧｲﾙを取り込んで予算を一括で登録します｡⇒『2.2.4excelﾌｧｲﾙを取り込んで予算を登録する』参照  1［…］［予算配賦処理］［予算配賦設定］年間科目の予算を月別・部門別に自動で割り振り､予算配賦を行います｡［予算配賦設定］で予算の配賦方法を設定し､［予算配賦処理］で配賦処理を行います｡⇒『2.2.2年間の予算を月別・部門別に配賦して予算を登録する』参照［一括削除］登録した予算を一括で削除します｡科目を範囲指定して削除できます｡⇒『2.2.1.2予算の合計ｾｯﾄを行う』参照［excel取込］予算を入力したexcelを取り込み､一括で登録します｡⇒『2.2.4excelﾌｧｲﾙを取り込んで予算を登録する』参照2出力条件設定ｴﾘｱ登録する予算を条件指定します｡3単位表示する金額の単位を切り替えます｡端数が生じたときは､切り捨てて表示されます｡出力順序『科目出力順序』で登録したﾊﾟﾀｰﾝで科目の並び順を変更できます｡合計ｾｯﾄ部門､または科目別補助ごとに予算を入力した場合に､個別に入力した予算を全体の科目の予算に反映させます｡合計ｾｯﾄについては､次を参照してください｡⇒『2.2.1.2予算の合計ｾｯﾄを行う』参照すべて閉じるすべて展開科目別補助の予算入力欄の表示有無を切り替えることができます｡［…］［非会計演算］非会計科目を計算式に使用して予算を登録します⇒『2.2.3非会計科目を使用して部門の予算を登録する』参照4予算表示ｴﾘｱ入力した予算の金額が表示されます｡［＞＞＞］は､画面に表示されていない右側にも入力欄があることを示しています｡</div></div><div id="MAS13018"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 科目の予算を登録する &gt; 月ごとに予算を登録する</div><div class="search_title">月ごとに予算を登録する</div><div class="displayText">月ごとに予算を登録する　［設定］＞［予算登録］＞［財務］＞［勘定科目予算登録］月ごとに科目の予算を登録します。①　予算を入力する条件を指定します。 予算区分登録する予算を選択します ...</div><div class="search_word">月ごとに予算を登録する　［設定］＞［予算登録］＞［財務］＞［勘定科目予算登録］月ごとに科目の予算を登録します｡①　予算を入力する条件を指定します｡ 予算区分登録する予算を選択します｡［設定］＞［導入処理］＞［会社情報］＞［ﾏｽﾀｰ採用情報登録］において､勘定科目で採用した予算が表示されます｡予算年度登録する予算の年度を選択します｡当期・来期の予算の用途については､次を参照してください｡⇒『2.1予算登録の概要』参照参照実績実績ﾃﾞｰﾀを参照して予算を入力する場合に､表示する実績の年度を選択します｡表示できる実績ﾃﾞｰﾀは過去4年までです｡表示しない場合は［なし］を選択します｡種類会社全体の科目の予算を入力する場合は､［全社］を選択します｡部門ごとに科目の予算を入力する場合は､［部門］を選択し､から部門を選択します｡②　［条件で出力］をｸﾘｯｸします｡③　科目・科目別補助ごとに予算を入力します｡他の月の予算や､実績からｺﾋﾟｰして予算を入力する場合は､ﾌｧﾝｸｼｮﾝｷｰを使用します｡入力方法については､次を参照してください｡⇒『2.2.1.1登録済みの予算・実績をｺﾋﾟｰして入力する』参照④　［更新］をｸﾘｯｸします｡⑤　他の部門の残高を登録する場合は［種類］で部門を選択し､手順①～手順④までを繰り返します｡⑥　科目別補助､部門ごとに予算を登録した場合は､［合計ｾｯﾄ］をｸﾘｯｸして､個々に登録した予算を全体の科目の予算に反映させます｡科目別補助や部門ごとに予算を登録しただけでは､会社全体の科目の予算には反映されません｡登録した予算を会社全体の科目の予算に反映させるには､合計ｾｯﾄを行う必要があります｡［合計ｾｯﾄ］については､次を参照してください｡⇒『2.2.1.2予算の合計ｾｯﾄを行う』参照 登録済みの予算・実績をｺﾋﾟｰして入力する実績や他の月の予算などをｺﾋﾟｰして予算を入力する場合は､ﾌｧﾝｸｼｮﾝｷｰを使用します｡ 他の予算区分で登録した予算をｺﾋﾟｰする（f1 予算ｺﾋﾟｰ）他の予算区分で登録した予算をｺﾋﾟｰします｡ 種類会社全体の科目に予算をｺﾋﾟｰして入力する場合は［全社］を選択します｡特定の部門の科目に予算をｺﾋﾟｰして入力する場合は［部門］を選択します｡部門［種類］で［部門］を選択した場合に､から部門を選択します｡予算年度ｺﾋﾟｰする予算年度を選択します｡［当期予算から来期予算］［ｺﾋﾟｰ元］の当期予算を［ｺﾋﾟｰ先］の来期予算にｺﾋﾟｰします｡［当期予算］［ｺﾋﾟｰ元］の当期予算を［ｺﾋﾟｰ先］の当期予算にｺﾋﾟｰします｡［来期予算］［ｺﾋﾟｰ元］の来期予算を［ｺﾋﾟｰ先］の来期予算にｺﾋﾟｰします｡ｺﾋﾟｰ元ｺﾋﾟｰ元とする予算を選択します｡ｺﾋﾟｰ先ｺﾋﾟｰ先とする予算を選択します｡洗い替えで更新ｺﾋﾟｰしたときの洗い替えの有無を選択します｡［洗い替えする］ｺﾋﾟｰ先の予算がすべて削除され､ｺﾋﾟｰ元の予算で上書きされます｡ｺﾋﾟｰ元の予算が0円の科目は､0円になります｡［洗い替えしない］ｺﾋﾟｰ元で予算を登録している科目のみｺﾋﾟｰ先に反映されます｡ｺﾋﾟｰ元の予算が0円の科目は､上書きされません｡ 他の月に入力した予算をｺﾋﾟｰする（f3 範囲ｺﾋﾟｰ）他の月に入力した月のﾃﾞｰﾀをｺﾋﾟｰします｡  ｺﾋﾟｰ元ｺﾋﾟｰ元とする月を入力します｡ｺﾋﾟｰ先ｺﾋﾟｰ先とする月を範囲指定します｡ｺﾋﾟｰする範囲一部の科目のみをｺﾋﾟｰする場合に範囲指定します｡ 前月分をｺﾋﾟｰしする（f4 前月ｺﾋﾟｰ）前月に入力した予算をｺﾋﾟｰします｡予算入力画面でｺﾋﾟｰ先となる箇所にｶｰｿﾙをあて､［f4 前月ｺﾋﾟｰ］を押します｡ 実績をｺﾋﾟｰする（f5 実績ｺﾋﾟｰ）実績をｺﾋﾟｰします｡［参照実績］で実績を表示している場合に､実績をｺﾋﾟｰして予算を入力できます｡  ｺﾋﾟｰ先ｺﾋﾟｰ先とする月を範囲指定します｡実績割合実績値に対してｺﾋﾟｰする割合を入力します｡ｺﾋﾟｰする範囲ｺﾋﾟｰする科目を範囲指定する場合に指定します｡何も指定しない場合は､［ｺﾋﾟｰ元］で指定した月のﾃﾞｰﾀで上書きされます｡ 予算の合計ｾｯﾄを行う　［設定］＞［予算登録］＞［勘定科目予算登録］＞［合計ｾｯﾄ］科目別補助や部門ごとに予算を登録しただけでは､会社全体の科目の予算には反映されません｡登録した予算を会社全体の科目の予算に反映させるには､合計ｾｯﾄを行う必要があります｡ 合計ｾｯﾄのｲﾒｰｼﾞ（部門ごとに登録した場合） 基本的な合計ｾｯﾄ：科目別補助などの内訳を集計して全社の科目に予算をｾｯﾄします｡『勘定科目予算登録』で部門と科目別補助の両方を登録している場合の合計ｾｯﾄ：最初に各科目別補助の予算を集計して､部門の合計を求めます｡次に､部門を集計して全社の科目に予算をｾｯﾄします｡  合計ｾｯﾄを行う①　予算登録画面で集計先を選択し､［条件で出力］をｸﾘｯｸします｡［全社］会社全体の科目に対して部門・科目別補助の合計ｾｯﾄを行う場合に選択します｡［部門］特定の部門の科目に対して科目別補助の合計ｾｯﾄを行う場合に選択します｡②　［合計ｾｯﾄ］をｸﾘｯｸします｡［合計ｾｯﾄ］画面が別ｳｨﾝﾄﾞｳで開きます｡③　合計ｾｯﾄ行う条件を指定します｡ ｾｯﾄ種類集計対象の内訳を選択します｡ｾｯﾄ範囲特定の科目で表示を絞り込む場合に､開始と終了の科目ｺｰﾄﾞを指定します｡予算配賦予算配賦で設定した結果もｾｯﾄするかどうかを選択します｡ ④　［条件で出力］をｸﾘｯｸします｡全体の科目の予算と､部門や科目別補助別に登録した予算に差異がある科目は､［ｽﾃｰﾀｽ］欄に［差異あり］が表示されます｡⑤　［差異あり］の科目の［合計前］と［合計後］の金額を確認し､［合計ｾｯﾄ反映］をｸﾘｯｸします｡［差異あり］の表示がなくなり､［合計後］の金額が全体の科目の予算にｾｯﾄされます｡⑥　［合計ｾｯﾄ］画面の［×］をｸﾘｯｸして画面を閉じます｡⑦　予算登録の画面を開き､をｸﾘｯｸします｡補助や部門の予算が科目の予算に反映されます｡</div></div><div id="MAS13021"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 科目の予算を登録する &gt; 年間の予算を月別・部門別に配賦して予算を登録する</div><div class="search_title">年間の予算を月別・部門別に配賦して予算を登録する</div><div class="displayText">年間の予算を月別・部門別に配賦して予算を登録する年間科目の予算を月別・部門別に自動で割り振る（配賦する）場合は、予算配賦を行います。予算配賦を行うには、［…］から［予算配賦設定］で ...</div><div class="search_word">年間の予算を月別・部門別に配賦して予算を登録する年間科目の予算を月別・部門別に自動で割り振る（配賦する）場合は､予算配賦を行います｡予算配賦を行うには､［…］から［予算配賦設定］で配賦方法を設定した後､［予算配賦処理］で年間予算を入力して配賦を実行します｡配賦金額の合計と年間予算に端数が発生した場合は､先頭月で調整されます｡ 複数の条件を組み合わせて2段階以上の条件で配賦する場合は､［設定］＞［ﾏｽﾀｰ登録処理］＞［部門配賦情報］の［予算配賦情報］ﾀﾌﾞで行います｡『部門配賦情報』については､次を参照してください｡⇒『導入処理（部門設定） 1.1.3 予算の配賦情報を登録する』参照 予算配賦で行える配賦予算配賦では､次のような配賦が行えます｡●全社の科目の年間予算を月別にのみ配賦する●全社の科目の年間予算を月別に配賦し､さらに部門別に配賦する●全社の科目の年間予算を部門の年間予算に配賦する●部門の科目の年間予算を部門の月別に配賦する 予算配賦の配賦方法予算配賦では､次の4つの配賦方法があります｡ 実績金額を基準に配賦（①）全社または部門の科目について､実績から算出した月別割合をもとに年間予算を配賦します｡たとえば､使用する実績が｢前年実績｣で､｢売上高｣の年間予算と前年実績が次の場合､配賦方法は次のようになります｡ 年間予算：1,500,000円配賦割合の計算式：月別実績÷合計実績配賦割金額の計算式：年間予算×配賦割合月前年実績配賦割合配賦金額4月200,000円20％（200,000円÷1,000,000円）300,000円（1,500,000円×20％）5月300,000円30％（300,000円÷1,000,000円）450,000円（1,500,000円×30％）6月500,000円50％（500,000円÷1,000,000円）750,000円（1,500,000円×50％）合計1,000,000円100%1,500,000円 12か月を等分して配賦（②）全社の科目について､年間予算を均等に12分割して配賦します｡たとえば､｢売上高｣の年間予算が次の場合､配賦方法は次のようになります｡ 売上高の年間予算：1,500,000円配賦金額の計算式：年間予算÷12月配賦金額4月125,000円（1,500,000円÷12か月）5月125,000円（1,500,000円÷12か月）6月125,000円（1,500,000円÷12か月）7月…125,000円（1,500,000円÷12か月）…合計1,500,000円 月別に任意の配賦係数を設定して配賦（③）全社の科目について､［実績金額基準］［12か月等分］以外の方法で配賦したい場合に､月ごとに任意の配賦基準値を設定します｡設定した配賦基準値をもとに割合が算出され､算出された月別割合をもとに年間予算を配賦します｡たとえば､｢売上高｣の年間予算と配賦基準が次の場合､配賦方法は次のようになります｡ 売上高の年間予算：1,500,000円配賦割合：月別配賦基準（配賦係数）÷基準値合計配賦金額：年間予算×配賦割合月配賦係数配賦割合配賦金額4月3025％（30÷120）375,000円   (1,500,000円×25％)5月3025％（30÷120）375,000円   (1,500,000円×25％)6月6050％（60÷120）750,000円   (1,500,000円×50％)合計120100%1,500,000円 部門別に任意の配賦係数を設定して配賦（④）部門の科目を［実績金額基準］以外の方法で配賦する場合は､部門ごとに任意の配賦基準値を設定します｡設定した基準値から部門割合を算出し､その割合に基づいて月別に配賦された予算を部門に配賦します｡たとえば､｢売上高｣の月別予算と配賦基準が次の場合､配賦方法は次のようになります｡ 月別の予算4月：750,000円5月：750,000円6月：300,000円配賦割合の計算式：部門配賦基準（配賦係数）÷基準値合計配賦金額の計算式：年間予算×配賦割合 配賦係数配賦割合配賦金額4月5月6月札幌支社1012.5％（10÷80）93,750円（750,000円×12.5％）93,750円（750,000円×12.5％）37,500円（300,000円×12.5％）仙台営業2025％（20÷80）187,500円（750,000円×25％）187,500円（750,000円×25％）75,000円（300,000円×25％）岩手支社5062.5％（50÷80）468,750円（750,000円×62.5％）93,750円（750,000円×62.5％）187,500円（300,000円×62.5％）合計80100%750,000円750,000円300,000円  予算配賦のｲﾒｰｼﾞl　予算配賦の設定を行う　［設定］＞［予算登録］＞［勘定科目予算登録］＞［予算配賦設定］年間の予算をに月別に配賦します｡各科目に対して次の図の赤枠（［月別配賦基準］［部門別配賦基準］）を設定します｡ 月別配賦基準科目ごとに月別の配賦方法を設定します｡なお､すべての科目に対して一括で配賦方法を設定する場合は､［月別配賦基準ﾃﾞﾌｫﾙﾄ設定］で［実績金額基準］または［12か月等分］のどちらかを選択します｡［実績金額基準］実績をもとに配賦基準値を設定して配賦します｡［12か月等分］年間予算を均等に12分割して配賦します｡［実績金額基準］［12か月等分］以外の方法で配賦する場合は､先に［月別配賦基準登録］ﾀﾌﾞで月別の配賦基準値を設定した後､設定した配賦基準値を選択します｡⇒『［月別配賦基準登録］ﾀﾌﾞ』参照部門別配賦基準部門を採用している科目に対して､部門別の配賦基準を設定します｡［実績金額基準］実績をもとに配賦基準値を設定して配賦します｡［実績金額基準］以外の方法で配賦する場合は､先に［部門配賦基準］ﾀﾌﾞで部門別の配賦基準値を設定した後､設定した配賦基準値を選択します｡｡⇒『［部門別配賦基準］ﾀﾌﾞ』参照 全社の年間予算を月別にのみ配賦する場合［月別配賦基準］の設定目的に応じた配賦方法（［実績金額基準］または［12か月等分］､それ以外の配賦方法）を設定します｡［部門別配賦基準］の設定［部門別配賦基準］ﾀﾌﾞですべての部門の配賦係数を0のﾊﾟﾀｰﾝを登録し､部門を採用している科目に対して登録したﾊﾟﾀｰﾝを選択します｡ 全社の年間予算を月別に配賦し､さらに部門別に配賦する場合［月別配賦基準］の設定目的に応じた配賦方法（［実績金額基準］［12か月等分］､またはそれ以外の配賦方法）を設定します｡［部門別配賦基準］の設定目的に応じた配賦方法（［実績金額基準］またはそれ以外の配賦方法）を設定します｡ 全社の年間予算を部門の年間予算に配賦する場合［月別配賦基準］の設定［月別配賦基準登録］ﾀﾌﾞですべての月の配賦係数を0のﾊﾟﾀｰﾝを登録し､部門を採用している科目に対して登録したﾊﾟﾀｰﾝを選択します｡［部門別配賦基準］の設定目的に応じた配賦方法（［実績金額基準］またはそれ以外の配賦方法）を設定します｡ 部門の年間予算を部門の月別に配賦する場合［月別配賦基準］の設定目的に応じた配賦方法（［実績金額基準］［12か月等分］､またはそれ以外の配賦方法）を設定します｡［部門別配賦基準］の設定特に設定を修正する必要はありません｡ ［月別配賦基準登録］ﾀﾌﾞ月ごとに任意の配賦基準値を設定します｡設定した配賦基準値をもとに配賦金額が計算されます｡月のすべて配賦係数が0の場合は､配賦は行われません｡ 月別配賦基準ｺｰﾄﾞ未使用のｺｰﾄﾞを入力し､月別配賦基準の名称を入力します｡配賦係数任意の配賦基準値を小数点以下第4位以下で入力します｡ ［部門別配賦基準］ﾀﾌﾞ部門ごとに配賦基準値を設定します｡設定した配賦基準値をもとに配賦金額が計算されます｡部門のすべて配賦係数が0の場合は､配賦は行われません｡ 部門別配賦基準ｺｰﾄﾞ未使用のｺｰﾄﾞを入力し､部門別配賦基準の名称を入力します｡配賦係数任意の配賦基準値を小数点以下第4位以下で入力します｡ 予算配賦を実行する　［設定］＞［予算登録］＞［勘定科目予算登録］＞［予算配賦処理］入力した年間予算について､［月別配賦基準］で設定した配賦基準や部門を適用している科目の場合は､［部門別配賦基準］で設定した内容に基づき､自動で配賦が行われます｡なお､配賦を行うためには､あらかじめ［予算配賦設定］で科目ごとに配賦設定をしておく必要があります｡ ①　予算を入力する条件を指定します｡ 予算区分登録する予算を選択します｡［設定］＞［導入処理］＞［会社情報］＞［ﾏｽﾀｰ採用情報登録］において､勘定科目で採用した予算が表示されます｡予算年度登録する予算の年度を選択します｡当期・来期の予算の用途については､次を参照してください｡⇒『2.1予算登録の概要』参照参照実績『予算配賦設定』で［実績金額基準］を設定している場合に､配賦割合を算出する実績の年度を選択します｡［実績金額基準］以外を設定している場合は､実績ﾃﾞｰﾀを参照して予算を入力する場合に､表示する実績の年度を選択します｡表示できる実績ﾃﾞｰﾀは過去4年までです｡種類会社全体の科目の年間予算を基に配賦する場合は､［全社］を選択します｡［月別配賦基準］［部門別配賦基準］両方の配賦方法に基づいて年間予算が配賦されます｡部門の科目の年間予算を基に配賦する場合は､［部門］を選択します｡［月別配賦基準］の配賦方法に基づいて部門の年間予算が配賦されます｡②　［条件で出力］をｸﾘｯｸします｡予算登録画面で予算を登録済みの場合は､登録した予算が表示されます｡③　配賦を行う科目・科目別補助の［年間予算］を入力します｡配賦しない科目・科目別補助は､ここでは予算を入力しません（ここで予算を登録すると､配賦された金額で予算が上書きされるため）｡参照実績の金額をｺﾋﾟｰする場合は､［f5 実績ｺﾋﾟｰ］を押します｡実績ｺﾋﾟｰについては､次を参照してください｡⇒『実績をｺﾋﾟｰする（f5 実績ｺﾋﾟｰ）』参照④　［更新］をｸﾘｯｸします｡</div></div><div id="MAS13024"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 科目の予算を登録する &gt; 非会計科目を使用して部門の予算を登録する</div><div class="search_title">非会計科目を使用して部門の予算を登録する</div><div class="displayText">非会計科目を使用して部門の予算を登録する　［設定］＞［予算登録］＞［勘定科目予算登録］＞［非会計演算］非会計科目を使用した計算式を作成し、その計算結果を部門の予算として登録します。 ...</div><div class="search_word">非会計科目を使用して部門の予算を登録する　［設定］＞［予算登録］＞［勘定科目予算登録］＞［非会計演算］非会計科目を使用した計算式を作成し､その計算結果を部門の予算として登録します｡たとえば､｢交際費｣という科目に対して､｢単価×人数｣で予算を登録したい場合などに利用できます｡この場合､｢人数｣を非会計科目として科目を登録する必要があります｡非会計科目の概要については次を参照してください｡⇒『財務会計ｼｽﾃﾑについて 1.4.2 非会計科目について』参照①　予算登録画面の［…］から［非会計演算］をｸﾘｯｸします｡②　［新規ﾊﾟﾀｰﾝ追加］をｸﾘｯｸします｡別ｳｨﾝﾄﾞｳで計算式の登録画面が表示されます｡③　［ﾊﾟﾀｰﾝno.］でnoとﾊﾟﾀｰﾝ名称を入力し､各項目を設定します｡ 予算ｾｯﾄ対象期間登録する予算の期間を入力します｡入力できる期間は､当期の会計期間開始から翌期の終了までの間です｡予算区分登録する予算を選択します｡科目登録する予算の科目を選択します｡部門登録する予算の部門を選択します｡参照ﾏｽﾀｰ非会計科目計算を行う非会計科目を選択します｡ﾏｽﾀｰ計算に使用する非会計科目の実績または予算区分を選択します｡［当年実績］非会計科目の当年実績を使用して計算します｡現在は使用できません｡［予算］予算登録画面で登録した非会計科目の数値を使用します｡［前年実績］非会計科目の過年度実績を使用して計算します｡予算ｾｯﾄ計算式単価計算式に使用する単価を入力します｡たとえば､｢一人当たりの単価×人数｣という計算式で｢人数｣を非会計科目に設定した場合､｢一人当たりの単価｣を入力します｡加算金額計算結果に対して金額を調整する場合に入力します｡ ④　このまま計算式を反映させて予算を登録する場合は､［実行］をｸﾘｯｸします｡計算式のみ登録する場合は､［保存］をｸﾘｯｸします｡⑤　［×］をｸﾘｯｸして､計算式の登録画面を閉じます｡実行後､予算登録画面に計算結果が反映されます｡ 登録したﾊﾟﾀｰﾝは､『勘定科目予算登録_非会計演算』画面に追加されます｡次回以降､ここから計算を行うﾊﾟﾀｰﾝを選択し､実行できます｡</div></div><div id="MAS13025"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 科目の予算を登録する &gt; Excelファイルを取り込んで予算を登録する</div><div class="search_title">Excelファイルを取り込んで予算を登録する</div><div class="displayText">Excelファイルを取り込んで予算を登録する　［設定］＞［予算登録］＞［インポート］＞［Excel取込］Excelファイルを取り込んで予算を一括で登録します。取込用のExcelファ ...</div><div class="search_word">excelﾌｧｲﾙを取り込んで予算を登録する　［設定］＞［予算登録］＞［ｲﾝﾎﾟｰﾄ］＞［excel取込］excelﾌｧｲﾙを取り込んで予算を一括で登録します｡取込用のexcelﾌｧｲﾙはｼｽﾃﾑから出力します｡ 登録できる予算は次のとおりです｡予算の種類登録できる予算科目予算科目別の予算（月別・年間での予算登録が可能）科目別補助別の予算部門別の予算（月別・年間での予算登録が可能）部門・科目別補助別の予算共通補助予算共通補助別の予算部門・共通補助別の予算 excelﾌｧｲﾙから登録できる予算は12か月と決算月（決算月1）です｡決算月2～3や､中間決算月を登録する場合は､取込後､画面から入力します｡ また､科目の年間予算のみを取り込み､［予算配賦処理］で月別・部門別に配賦を行うことも可能です｡ 取込用のexcelﾌｧｲﾙを出力する　［設定］＞［予算登録］＞［ｲﾝﾎﾟｰﾄ］＞［excel取込］＞［ﾃﾝﾌﾟﾚｰﾄ］ﾀﾌﾞ①　『excel取込』または『勘定科目予算登録』の［…］から［excel取込］をｸﾘｯｸします｡②　［ﾃﾝﾌﾟﾚｰﾄ］ﾀﾌﾞで､出力条件を選択します｡ 対象ﾏｽﾀｰ予算を登録するﾏｽﾀｰの種類を選択します｡［予算配賦処理］で配賦を行う場合は､［科目］または［部門］を選択します｡共通補助［対象ﾏｽﾀｰ］で［共通補助予算］を選択した場合に､出力する共通補助を選択します｡ｺｰﾄﾞ範囲［対象ﾏｽﾀｰ］で［部門予算］［部門科目別補助予算］［共通補助予算］［部門共通補助予算］を選択した場合に､出力する範囲を選択します｡参照ｺﾋﾟｰ区分実績金額や他の予算区分で登録した予算を出力する場合は［実績参照する］を選択します｡参照実績［参照ｺﾋﾟｰ区分］で［実績参照する］を選択した場合に､出力する実績の年度を選択します｡実績割合［参照ｺﾋﾟｰ区分］で［実績参照する］を選択した場合に､実績値に対して出力する割合を入力します｡100を入力すると､実績値と同じ金額が出力されます｡予算区分［参照ｺﾋﾟｰ区分］で［実績参照する］を選択した場合､予算区分を選択します｡選択した予算区分に予算が登録されている場合は､予算の年間金額が出力されます｡予算年度予算年度を選択します｡③　［作成］をｸﾘｯｸします｡にﾌｧｲﾙが出力されます｡④　出力されたexcelﾌｧｲﾙに予算を入力します｡［excelﾌｧｲﾙ］（勘定科目のﾌｧｲﾙ）excelﾌｧｲﾙのﾚｲｱｳﾄ列名対象ﾏｽﾀｰ説明科目ｺｰﾄﾞすべて科目ｺｰﾄﾞが表示されます｡［科目別補助予算］［部門予算］［部門科目別補助予算］［共通補助予算］［部門共通補助］を選択した場合は､補助を採用している科目のみ表示されます｡科目名すべて科目名が表示されます｡科目別補助ｺｰﾄﾞ科目別補助予算部門科目別補助予算科目別補助のｺｰﾄﾞが表示されます｡科目別補助名科目別補助予算部門科目別補助予算科目別補助名が表示されます｡補助ｺｰﾄﾞ共通補助予算部門共通補助予算補助ｺｰﾄﾞが表示されます｡補助名共通補助予算部門共通補助予算補助名が表示されます｡年間予算勘定科目予算部門予算年間予算を入力します｡［予算配賦処理］で配賦を行う場合は､ここに入力した予算が使用されます｡［参照実績］で［参照ｺﾋﾟｰ区分］を選択した場合は､［予算区分］と［予算年度］で選択した予算の年間金額が出力されます｡yyyy年mm月すべて月別に予算金額を入力します｡［参照実績］で［参照ｺﾋﾟｰ区分］を選択している場合は､［参照実績］［実績割合］の結果が出力されます｡決算月予算額すべて決算月1の予算を入力します｡合計予算額すべてexcelに予算を入力すると､科目ごとの合計金額が自動で表示されます｡参考値のため､予算には取り込まれません｡ ［対象ﾏｽﾀｰ］で部門を含むﾏｽﾀｰを選択した場合､部門ごとにｼｰﾄが分かれたexcelﾌｧｲﾙが出力されます｡各ｼｰﾄで予算を入力します｡1つのexcelﾌｧｲﾙに出力される部門は50までです｡部門が51以上の場合は､excelﾌｧｲﾙが分かれて出力されます｡ また､最後の行に表示される｢合計｣は､excelﾌｧｲﾙに予算を入力すると月ごとの合計金額が自動で表示されます｡参考値のため､予算には取り込まれません｡  l　予算を入力したexcelﾌｧｲﾙを取り込む　［設定］＞［予算登録］＞［ｲﾝﾎﾟｰﾄ］＞［excel取込］＞［excel取込］ﾀﾌﾞ①　『excel取込』または『勘定科目予算登録』の［…］から［excel取込］をｸﾘｯｸします｡②　［excel取込］ﾀﾌﾞで条件を指定します｡ 対象ﾏｽﾀｰ取り込む予算のﾏｽﾀｰの種類を選択します｡共通補助［対象ﾏｽﾀｰ］で［共通補助予算］を選択した場合に､取り込む共通補助を選択します｡予算区分取り込む予算の予算区分を選択します｡年度区分取り込む予算の年度を選択します｡取込区分［対象ﾏｽﾀｰ］に対して､取り込みの方法を選択します｡［0：更新］excelﾌｧｲﾙに入力した予算のみ登録されます｡excelﾌｧｲﾙの予算が0円の科目は､上書きされません｡［1：洗替］登録済みの予算がすべて削除され､excelﾌｧｲﾙに入力した予算で上書きされます｡excelﾌｧｲﾙの予算が0円の科目は､0円になります取込ﾌｧｲﾙ［ﾌｧｲﾙ選択］をｸﾘｯｸして取り込むexcelﾌｧｲﾙをﾄﾞﾗｯｸﾞ＆ﾄﾞﾛｯﾌﾟまたは選択します｡③　［取込］をｸﾘｯｸします｡取込が完了すると､ﾍｯﾀﾞｰに取り込み結果の通知と､に取り込んだ情報（予算連結ﾘｽﾄまたはｴﾗｰﾘｽﾄ）のpdfﾌｧｲﾙが出力されます｡予算連結ﾘｽﾄ・ｴﾗｰﾘｽﾄについては次を参照してください｡⇒『予算連結ﾘｽﾄ・予算ｴﾗｰﾘｽﾄについて』参照④　予算取込後は､予算登録画面で予算内容を確認します｡科目・科目別補助の予算の場合は『勘定科目予算登録』の［全社］､部門ごとに予算を入力した場合は［部門］を選択すると確認できます｡共通補助の予算の場合は『共通補助予算登録』の［全社］､部門ごとに予算を入力した場合は［部門］を選択すると確認できます｡⑤　必要に応じて他の決算月の入力や､配賦処理の実行を行います｡決算月2～3や､中間決算月を登録する場合は､予算登録画面から入力します｡［予算配賦処理］で配賦を行う場合は､先に［配賦予算設定］で配賦方法を設定してから行います｡［予算配賦処理］で［年間予算］に予算が入力されていることを確認し､入力欄にｶｰｿﾙを置いて［enter］を押して［更新］をｸﾘｯｸします｡ 予算連結ﾘｽﾄ・予算ｴﾗｰﾘｽﾄについてexcelﾌｧｲﾙを取り込むと､から連結ﾘｽﾄ・ｴﾗｰﾘｽﾄをﾀﾞｳﾝﾛｰﾄﾞでき､取込結果を確認できます｡ ［連結ﾘｽﾄ］予算の取込が完了した場合に出力されます｡取り込んだすべての科目と予算の情報が出力されます｡  ［ｴﾗｰﾘｽﾄ］予算が取り込まれなかった場合に出力されます｡ｴﾗｰとなっている科目の情報が出力されます｡ｴﾗｰの科目が一つでもあると､予算は取り込まれません｡</div></div><div id="MAS13028"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 科目の予算を登録する &gt; 登録した予算を削除する</div><div class="search_title">登録した予算を削除する</div><div class="displayText">登録した予算を削除する登録した予算を一括で削除します。 ［…］から［一括削除］をクリックします。 一括削除の画面が開きます。削除する予算の条件を指定して［削除］をクリックします。  ...</div><div class="search_word">登録した予算を削除する登録した予算を一括で削除します｡ ［…］から［一括削除］をｸﾘｯｸします｡ 一括削除の画面が開きます｡削除する予算の条件を指定して［削除］をｸﾘｯｸします｡ 予算区分削除する予算区分を選択します｡予算年度削除する予算年度を選択します｡種類削除する予算の種類を選択します｡［全社］全社の科目の予算を削除する場合に選択します｡［部門］特定の部門の予算を削除する場合に選択します｡部門［種類］で部門を選択した場合に､削除する部門の範囲を指定します｡配賦処理実行前の金額に戻す場合は､［配賦金額のみ削除］を［適用する］にします｡科目削除する科目の範囲を指定します｡指定した科目に対して､科目別補助の予算のみ削除する場合は､［科目別補助のみ削除］を［適用する］にします｡対象月削除する月の範囲を指定します｡</div></div><div id="MAS13029"><div class="search_breadcrumbs">導入処理（残高・予算） &gt; 予算登録 &gt; 共通補助の予算を登録する</div><div class="search_title">共通補助の予算を登録する</div><div class="displayText">共通補助の予算を登録する　［設定］＞［予算登録］＞［財務］＞［共通補助予算登録］科目の予算登録に加え、取引先や銀行などの共通補助を用いて予算を管理する場合は、ここで共通補助の予算を ...</div><div class="search_word">共通補助の予算を登録する　［設定］＞［予算登録］＞［財務］＞［共通補助予算登録］科目の予算登録に加え､取引先や銀行などの共通補助を用いて予算を管理する場合は､ここで共通補助の予算を登録します｡たとえば､売掛金を｢a社｣｢b社｣といった取引先別などで予算の推移を確認できます｡予算の登録は画面から手入力する方法と､excelで一括で登録する方法があります｡ここでは､予算を手入力する方法について説明します｡予算を一括で登録する場合は､『勘定科目予算登録』の［excel取込］で行います｡一括で登録する方法については､次を参照してください｡⇒『2.2.4.2予算を入力したexcelﾌｧｲﾙを取り込む』参照 1［…］［…］登録した予算を一括で削除します｡科目を範囲指定して削除できます｡⇒『2.2.5登録した予算を削除する』参照2出力条件設定ｴﾘｱ登録する予算を条件指定します｡3予算表示ｴﾘｱ入力した予算の金額が表示されます｡［単位］は､表示する金額の単位を切り替えます｡端数が生じたときは､切り捨てて表示されます｡［＞＞＞］は､画面に表示されていない右側にも入力欄があることを示しています｡  共通補助の予算を登録する①　予算を入力する条件を指定します｡ 補助区分登録する予算の補助を選択します予算区分登録する予算を選択します｡［設定］＞［導入処理］＞［会社情報］＞［ﾏｽﾀｰ採用情報登録］において､勘定科目で採用した予算が表示されます｡予算年度登録する予算の年度を選択します｡当期・来期の予算の用途については､次を参照してください｡⇒『2.1予算登録の概要』参照参照実績実績ﾃﾞｰﾀを参照して予算を入力する場合に､表示する実績の年度を選択します｡表示できる実績ﾃﾞｰﾀは過去4年までです｡表示しない場合は［なし］を選択します｡種類会社全体の科目の予算を入力する場合は､［全社］を選択します｡部門ごとに科目の予算を入力する場合は､［部門］を選択し､から部門を選択します｡  部門別に共通補助予算を入力した場合､全社の共通補助の予算に対して［合計ｾｯﾄ］はできません｡また､『勘定科目予算登録』の全社の科目に対して［合計ｾｯﾄ］はできません｡共通補助全体で予算を管理したい場合は､必ず共通補助の全社の科目にも予算を登録してください｡②　［条件で出力］をｸﾘｯｸします｡③　共通補助ごとに予算を入力します｡他の月の予算や､実績からｺﾋﾟｰして予算を入力する場合は､ﾌｧﾝｸｼｮﾝｷｰを使用します｡入力方法については､次を参照してください｡⇒『2.2.1.1登録済みの予算・実績をｺﾋﾟｰして入力する』参照④　［更新］をｸﾘｯｸします｡⑤　他の部門の残高を登録する場合は［種類］で部門を選択し､手順①～手順④までを繰り返します｡⑥　『勘定科目予算登録』の［合計ｾｯﾄ］の［ｾｯﾄ種類］で［共通補助］を選択して合計ｾｯﾄを行います｡共通補助の予算を登録しただけでは会社全体の科目には反映されません｡全体の科目に反映させるには､必ず合計ｾｯﾄを行ってください｡［合計ｾｯﾄ］については､次を参照してください｡⇒『2.2.1.2予算の合計ｾｯﾄを行う』参照</div></div></div>');

// Global variables for MutationObserver feature
var currentSearchValue = ""; // Current search keyword
var mutationObserver = null; // MutationObserver instance
var debounceTimer = null; // Debounce timer for DOM changes

function selectorEscape(val){
  return val.replace(/[-\/\\^$*+?.()|[\]{}\!]/g, '\\$&');
}

// Apply highlight to iframe content
function applyHighlight(searchValue) {
  var searchWordTmp = searchValue.split("　").join(" ").trim();
  searchWordTmp = searchWordTmp.split("  ").join(" ");
  for(var i = 0; i < wide.length; i++) {
    searchWordTmp = searchWordTmp.replace(wide[i], narrow[i]);
  }
  var searchWord = searchWordTmp.split(" ");
  for(var i = 0; i < searchWord.length; i++) {
    searchWord[i] = selectorEscape(searchWord[i].replace(">", "&gt;").replace("<", "&lt;"));
  }
  var hilightWord = searchWord.join("|");
  for(var i = 0; i < hilight.length; i++) {
    var reg = new RegExp(hilight[i], "gm");
    hilightWord = hilightWord.replace(reg, hilight[i]);
  }

  var reg = new RegExp("("+hilightWord+")(?=[^<>]*<)", "gm");
  var regnbsp = new RegExp("&nbsp;(?=[^<>]*<)", "gm");
  var reggt = new RegExp("&gt;(?=[^<>]*<)", "gm");
  var reglt = new RegExp("&lt;(?=[^<>]*<)", "gm");
  var regquot = new RegExp("&quot;(?=[^<>]*<)", "gm");
  var regamp = new RegExp("&amp;(?=[^<>]*<)", "gm");
  $("iframe.topic").contents().find("body").html($("iframe.topic").contents().find("body").html().replace(regnbsp, "　").replace(reggt, ">").replace(reglt, "<").replace(regquot, '"').replace(regamp, "&").replace(reg, "<font class='keyword' style='color:rgb(0, 0, 0); background-color:rgb(252, 255, 0);'>$1</font>"));
}

// Remove keyword highlights
function removeHighlight() {
  $("iframe.topic").contents().find(".keyword").each(function() {
    for(var i = 0; i < $(this)[0].childNodes.length; i++) {
      this.parentNode.insertBefore($(this)[0].childNodes[i], this);
    }
    $(this).remove();
  });
}

// Setup MutationObserver for iframe content
function setupMutationObserver() {
  disconnectMutationObserver();
  
  try {
    var $iframe = $("iframe.topic");
    if ($iframe.length === 0) return;
    
    var iframeDocument = $iframe[0].contentDocument || $iframe[0].contentWindow.document;
    if (!iframeDocument || !iframeDocument.body) return;
    
    mutationObserver = new MutationObserver(function(mutations) {
      if (!currentSearchValue || currentSearchValue.trim() === "") {
        return;
      }
      
      var shouldReHighlight = false;
      for (var i = 0; i < mutations.length; i++) {
        var mutation = mutations[i];
        if (mutation.type === 'childList') {
          var addedKeywords = false;
          for (var j = 0; j < mutation.addedNodes.length; j++) {
            var node = mutation.addedNodes[j];
            if (node.nodeType === Node.ELEMENT_NODE) {
              if (node.classList && node.classList.contains('keyword')) {
                addedKeywords = true;
                break;
              }
              if (node.querySelector && node.querySelector('.keyword')) {
                addedKeywords = true;
                break;
              }
            }
          }
          
          if (addedKeywords && mutation.addedNodes.length === 1) {
            continue;
          }
          
          if (mutation.addedNodes.length > 0 || mutation.removedNodes.length > 0) {
            shouldReHighlight = true;
            break;
          }
        } else if (mutation.type === 'characterData') {
          shouldReHighlight = true;
          break;
        }
      }
      
      if (shouldReHighlight) {
        debouncedReHighlight();
      }
    });
    
    mutationObserver.observe(iframeDocument.body, {
      childList: true,
      subtree: true,
      characterData: true,
      attributes: false
    });
    
    console.debug("MutationObserver setup for iframe content");
  } catch (error) {
    console.warn("Failed to setup MutationObserver:", error);
  }
}

// Debounced re-highlighting
function debouncedReHighlight() {
  if (debounceTimer) {
    clearTimeout(debounceTimer);
  }
  
  debounceTimer = setTimeout(function() {
    reHighlightAfterDomChange();
  }, 500);
}

// Re-highlight after DOM change
function reHighlightAfterDomChange() {
  if (!currentSearchValue || currentSearchValue.trim() === "") {
    return;
  }
  
  try {
    disconnectMutationObserver();
    removeHighlight();
    applyHighlight(currentSearchValue);
    
    setTimeout(function() {
      setupMutationObserver();
    }, 100);
    
    console.debug("Re-highlighted search terms after DOM change");
  } catch (error) {
    console.warn("Failed to re-highlight after DOM change:", error);
    setupMutationObserver();
  }
}

// Disconnect MutationObserver
function disconnectMutationObserver() {
  if (mutationObserver) {
    mutationObserver.disconnect();
    mutationObserver = null;
  }
  
  if (debounceTimer) {
    clearTimeout(debounceTimer);
    debounceTimer = null;
  }
}

$(function(){
  $(document).on("click", "ul.toc li.book", function() {
    if($(this).children("a[href='#'],a[href='javascript:void 0;']").length == 0)
    {
      $(this).children("a").each(function(){
        location.href=location.href.replace(location.hash,"")+"#t="+$(this).attr("href");
      });
    }
  });
  $(".wSearchField").each(function() {
    $(this).off();
  });
  $(document).on("keyup", ".wSearchField", function(){
    if($(this).val() == "")
    {
      $(".wSearchResultItemsBlock").html("");
      $(".wSearchResultsEnd").addClass("rh-hide");
      $(".wSearchResultsEnd").attr("hidden", "");
      $("#searchMsg").html("2つ以上の語句を入力して検索する場合は、スペース（空白）で区切ります。");
      removeHighlight();
      currentSearchValue = ""; // Clear current search value
      disconnectMutationObserver(); // Disconnect observer when clearing
    }
    else
    {
      $("#searchMsg").html("");
      currentSearchValue = $(this).val(); // Store current search value
      var searchWordTmp = $(this).val().replace(/(.*?)(?:　| )+(.*?)/g, "$1 $2").trim().toLowerCase();
      for(i = 0; i < wide.length; i ++)
      {
        searchWordTmp = searchWordTmp.split(wide[i]).join(narrow[i]);
      }
      var searchWord = searchWordTmp.split(" ");
      var searchQuery = "";
      for(i = 0; i < searchWord.length; i ++)
      {
        searchQuery += ":contains(" + searchWord[i] + ")";
      }
      
      var findItems = searchWords.find(".search_word"+searchQuery);
      if(findItems.length != 0)
      {
        $(".wSearchResultsEnd").removeClass("rh-hide");
        $(".wSearchResultsEnd").removeAttr("hidden");
        $(".wSearchResultItemsBlock").html("");
        findItems.each(function() {
          var displayText = $(this).parent().find(".displayText").text();
          $(".wSearchResultItemsBlock").append($("<div class='wSearchResultItem'><a class='nolink' href='./"+$(this).parent().attr("id")+".html'><div class='wSearchResultTitle'>"+$(this).parent().find(".search_title").html()+"</div></a><div class='wSearchContent'><span class='wSearchContext'>"+displayText+"</span></div></div>"));
        });
        removeHighlight();
        applyHighlight(currentSearchValue);
      }
      else
      {
        removeHighlight();
        $(".wSearchResultsEnd").addClass("rh-hide");
        $(".wSearchResultsEnd").attr("hidden", "");
        $(".wSearchResultItemsBlock").html("");
        displayText = "検索条件に一致するトピックはありません。";
        $(".wSearchResultItemsBlock").append($("<div class='wSearchResultItem'><div class='wSearchContent'><span class='wSearchContext'>"+displayText+"</span></div></div>"));
      }
    }
  });
  $("iframe.topic").on("load", function(){
    if($(".search-input", document).is(":not(.rh-hide)") && ($(".wSearchField", document).val() != ""))
    {
      var searchValue = $(".wSearchField", document).val();
      currentSearchValue = searchValue; // Store current search value
      applyHighlight(searchValue);
    }
    
    // Setup MutationObserver for iframe content changes
    setupMutationObserver();
  });
});
